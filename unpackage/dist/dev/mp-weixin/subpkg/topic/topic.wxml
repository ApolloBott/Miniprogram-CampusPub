<view class="topic-page"><view class="header-section"><text class="page-title">发起话题</text></view><view class="input-section"><view class="input-container"><textarea class="topic-input" placeholder="输入你想讨论的话题..." placeholder-class="input-placeholder" maxlength="{{200}}" auto-height="{{true}}" focus="{{autoFocus}}" data-event-opts="{{[['input',[['__set_model',['','topicContent','$event',[]]]]]]}}" value="{{topicContent}}" bindinput="__e"></textarea><view class="images-section"><block wx:if="{{$root.g0}}"><view class="images-grid"><block wx:for="{{selectedImages}}" wx:for-item="img" wx:for-index="index" wx:key="index"><view class="image-item"><image class="image" src="{{img}}" mode="aspectFill"></image><view data-event-opts="{{[['tap',[['deleteImage',[index]]]]]}}" class="delete-icon" bindtap="__e"><text>×</text></view></view></block><block wx:if="{{$root.g1}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="add-image-btn" bindtap="__e"><text class="add-icon">+</text><text class="add-text">添加图片</text></view></block><block wx:if="{{uploading}}"><view class="add-image-btn uploading"><text class="add-icon">⏳</text><text class="add-text">上传中...</text></view></block></view></block></view><view class="input-footer"><view class="char-count"><text class="{{[($root.g2>200)?'over-limit':'']}}">{{''+$root.g3+'/200'}}</text></view><view class="tips-badge"><text class="tips-icon">💡</text><text class="tips-text">简洁的话题更容易引起讨论</text></view></view></view><view class="toggle-section"><view data-event-opts="{{[['tap',[['toggleTextToImage',['$event']]]]]}}" class="toggle-container" bindtap="__e"><view class="toggle-content"><view class="toggle-left"><view class="toggle-info"><text class="toggle-title">文字转图片</text><text class="toggle-desc">{{enableTextToImage?'生成话题背景图':'不生成话题背景图'}}</text></view></view><view class="{{['toggle-switch',(enableTextToImage)?'active':'']}}"><view class="switch-circle"></view></view></view></view></view></view><view class="button-section"><view data-event-opts="{{[['tap',[['handleNext',['$event']]]]]}}" class="{{['next-btn',(!canNext)?'disabled':'']}}" bindtap="__e"><text class="btn-text">下一步</text><text class="btn-icon">→</text></view><view class="hint-text"><text>{{getHintText}}</text></view></view></view>