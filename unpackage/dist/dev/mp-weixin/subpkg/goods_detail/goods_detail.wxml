<view class="goods-detail-page"><view class="{{['search-box',(hideSearchBar)?'hide':'']}}"><view class="search-wrapper"><view class="search-content"><my-search bind:click="__e" vue-id="f5ff30e8-1" data-event-opts="{{[['^click',[['gotoSearch']]]]}}" bind:__l="__l"></my-search></view><view class="action-buttons"><block wx:if="{{openid}}"><button class="share-btn" open-type="share" data-event-opts="{{[['tap',[['',['$event']]]]]}}" catchtap="__e"><uni-icons vue-id="f5ff30e8-2" type="redo" size="24" color="#333" bind:__l="__l"></uni-icons></button></block><block wx:if="{{goods_info.publisher_id!==openid}}"><text data-event-opts="{{[['tap',[['showPostMenu',['$event']]]]]}}" class="more-btn" bindtap="__e">â‹®</text></block></view></view></view><scroll-view class="scroll-content" style="{{('height: calc(100vh - '+(searchHeight+bottomBarHeight)+'px)')}}" scroll-y="{{true}}" data-event-opts="{{[['scroll',[['onScroll',['$event']]]]]}}" bindscroll="__e"><view class="content-wrapper"><view class="publisher-section"><image class="publisher-avatar" src="{{publisher_info.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['gotoPublisherProfile']]]]}}" bindtap="__e"></image><view class="publisher-info"><view class="publisher-name-row"><view class="user-info"><text data-event-opts="{{[['tap',[['gotoPublisherProfile']]]]}}" class="publisher-name" bindtap="__e">{{publisher_info.nickname}}</text><view class="post-meta"><text class="post-views">{{(goods_info.view_count||0)+"äººæµè§ˆ"}}</text></view></view></view><view class="publisher-meta"></view></view><block wx:if="{{goods_info.publisher_id!==userBase.openid}}"><view data-event-opts="{{[['tap',[['toggleFollow',['$event']]]]]}}" class="{{['follow-btn',isFollowing?'following':'']}}" bindtap="__e"><text>{{isFollowing?'å·²å…³æ³¨':'+ å…³æ³¨'}}</text></view></block></view><view class="goods-basic-info"><view class="goods-name-section"><text class="goods-name">{{goods_info.goods_name}}</text></view><view class="price-location-row"><view class="price-container"><text class="price-symbol">Â¥</text><text class="price-value">{{goods_info.goods_price}}</text></view><view class="location-container"><text class="location-text">{{(goods_info.location||'é—µè¡Œ')+"æ ¡åŒº"}}</text></view></view></view><view class="goods-images-section"><swiper class="goods-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{1000}}" circular="{{true}}" data-event-opts="{{[['change',[['onSwiperChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{goods_info.pics}}" wx:for-item="item" wx:for-index="i" wx:key="i"><swiper-item><image class="swiper-image" src="{{item.pics_big}}" mode="aspectFit" data-event-opts="{{[['tap',[['preview',[i]]]]]}}" bindtap="__e"></image></swiper-item></block></swiper><view class="image-counter"><text>{{currentImageIndex+1+"/"+$root.g0}}</text></view></view><view class="comments-section"><view class="section-header"><view class="section-title-wrapper"><text class="section-title">{{"ç•™è¨€ "+$root.g1}}</text></view><view data-event-opts="{{[['tap',[['openMessage',['$event']]]]]}}" class="more-btn" bindtap="__e"><text class="more-text">æŸ¥çœ‹å…¨éƒ¨</text><uni-icons vue-id="f5ff30e8-3" type="arrowright" color="#999" size="16" bind:__l="__l"></uni-icons></view></view><view data-event-opts="{{[['tap',[['showQuickReply',['$event']]]]]}}" class="quick-comment-box" bindtap="__e"><image class="quick-comment-avatar" src="{{userBase.avatarUrl||'/images/1.jpg'}}" mode="aspectFill"></image><view class="quick-comment-input-placeholder"><text>è¯´ç‚¹ä»€ä¹ˆ...</text></view></view><block wx:for="{{$root.l1}}" wx:for-item="comment" wx:for-index="index" wx:key="index"><view class="comment-item"><view data-event-opts="{{[['tap',[['showReplyInput',[index,'$0'],[[['displayedComments','',index]]]]]]]}}" class="comment-main-content" bindtap="__e"><view class="comment-header"><image class="comment-avatar" src="{{comment.$orig.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['gotoProfile',['$0'],[[['displayedComments','',index,'user_openid']]]]]]]}}" catchtap="__e"></image><view class="comment-user-info"><text class="comment-username">{{comment.$orig.nickname}}</text><text class="comment-time">{{comment.m0}}</text></view></view><view class="comment-content"><rich-text nodes="{{comment.m1}}"></rich-text></view></view><block wx:if="{{comment.g2}}"><view class="replies-section"><block wx:for="{{comment.l0}}" wx:for-item="reply" wx:for-index="rIndex" wx:key="rIndex"><view class="reply-item"><image class="reply-avatar" src="{{reply.$orig.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['gotoProfile',['$0'],[[['displayedComments','',index],['displayReplies','',rIndex,'user_openid']]]]]]]}}" catchtap="__e"></image><view class="reply-content-wrapper"><text class="reply-username">{{reply.$orig.nickname+"ï¼š"}}</text><rich-text nodes="{{reply.m2}}"></rich-text></view></view></block><block wx:if="{{comment.g3}}"><view data-event-opts="{{[['tap',[['toggleShowAllReplies',[index]]]]]}}" class="show-more-replies" catchtap="__e"><text>{{"æŸ¥çœ‹"+comment.g4+"æ¡å›å¤"}}</text><text class="iconfont icon-arrow-down"></text></view></block><block wx:if="{{comment.$orig.showAllReplies}}"><view data-event-opts="{{[['tap',[['toggleShowAllReplies',[index]]]]]}}" class="show-more-replies" catchtap="__e"><text>æ”¶èµ·å›å¤</text><text class="iconfont icon-arrow-up"></text></view></block></view></block></view></block></view></view></scroll-view><block wx:if="{{goods_info.publisher_id!==userBase.openid}}"><view class="bottom-bar"><view data-event-opts="{{[['tap',[['openMessage',['$event']]]]]}}" class="bar-item" bindtap="__e"><uni-icons vue-id="f5ff30e8-4" type="chatbubble" size="30" color="#666" bind:__l="__l"></uni-icons></view><text data-event-opts="{{[['tap',[['openMessage',['$event']]]]]}}" class="bar-text" bindtap="__e">ç•™è¨€</text><view data-event-opts="{{[['tap',[['toggleCollect',['$event']]]]]}}" class="bar-item" bindtap="__e"><uni-icons vue-id="f5ff30e8-5" type="{{isCollected?'star-filled':'star'}}" size="30" color="{{isCollected?'#ffd700':'#666'}}" bind:__l="__l"></uni-icons></view><text data-event-opts="{{[['tap',[['toggleCollect',['$event']]]]]}}" class="bar-text" bindtap="__e">{{isCollected?'å·²æ”¶è—':'æ”¶è—'}}</text><view data-event-opts="{{[['tap',[['startChat',['$event']]]]]}}" class="bar-btn chat-btn" bindtap="__e"><text>è”ç³»å–å®¶</text></view></view></block><block wx:else><view class="bottom-bar"><view data-event-opts="{{[['tap',[['openMessage',['$event']]]]]}}" class="bar-item" bindtap="__e"><uni-icons vue-id="f5ff30e8-6" type="chatbubble" size="30" color="#666" bind:__l="__l"></uni-icons></view><text data-event-opts="{{[['tap',[['openMessage',['$event']]]]]}}" class="bar-text" bindtap="__e">ç•™è¨€</text><view data-event-opts="{{[['tap',[['toggleCollect',['$event']]]]]}}" class="bar-item" bindtap="__e"><uni-icons vue-id="f5ff30e8-7" type="{{isCollected?'star-filled':'star'}}" size="30" color="{{isCollected?'#ffd700':'#666'}}" bind:__l="__l"></uni-icons></view><text data-event-opts="{{[['tap',[['toggleCollect',['$event']]]]]}}" class="bar-text" bindtap="__e">{{isCollected?'å·²æ”¶è—':'æ”¶è—'}}</text><view data-event-opts="{{[['tap',[['manageGoods',['$event']]]]]}}" class="bar-btn manage-btn" bindtap="__e"><text>ç®¡ç†å•†å“</text></view></view></block><view data-event-opts="{{[['tap',[['closeMessage',['$event']]]]]}}" class="{{['message-overlay',(showMessagePanel)?'show':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="{{['message-panel',(showMessagePanel)?'show':'']}}" catchtap="__e"><view class="message-header"><view class="message-title-wrapper"><text class="message-title">å…¨éƒ¨ç•™è¨€</text><text class="message-count">{{"("+$root.g5+")"}}</text></view><view data-event-opts="{{[['tap',[['closeMessage',['$event']]]]]}}" bindtap="__e"><uni-icons vue-id="f5ff30e8-8" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><scroll-view class="message-list" scroll-y="{{true}}" scroll-into-view="{{scrollIntoView}}"><block wx:for="{{$root.l3}}" wx:for-item="comment" wx:for-index="index" wx:key="index"><view class="message-item" id="{{'msg-'+index}}"><view data-event-opts="{{[['tap',[['showReplyInput',[index,'$0'],[[['comments','',index]]]]]]]}}" class="message-main-content" bindtap="__e"><image class="message-avatar" src="{{comment.$orig.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['gotoProfile',['$0'],[[['comments','',index,'user_openid']]]]]]]}}" catchtap="__e"></image><view class="message-content-wrapper"><view class="message-user-info"><text class="message-username">{{comment.$orig.nickname}}</text><text class="message-time">{{comment.m3}}</text></view><view class="message-text"><rich-text nodes="{{comment.m4}}"></rich-text></view></view></view><block wx:if="{{comment.g6}}"><view class="replies-section-in-panel"><block wx:for="{{comment.l2}}" wx:for-item="reply" wx:for-index="rIndex" wx:key="rIndex"><view data-event-opts="{{[['tap',[['showReplyToReply',['$0','$1'],[[['comments','',index],['displayReplies','',rIndex]],[['comments','',index]]]]]]]}}" class="reply-item" bindtap="__e"><image class="reply-avatar" src="{{reply.$orig.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['tap',[['gotoProfile',['$0'],[[['comments','',index],['displayReplies','',rIndex,'user_openid']]]]]]]}}" catchtap="__e"></image><view class="reply-content-wrapper"><text class="reply-username">{{reply.$orig.nickname+"ï¼š"}}</text><rich-text nodes="{{reply.m5}}"></rich-text></view></view></block><block wx:if="{{comment.g7}}"><view data-event-opts="{{[['tap',[['toggleShowAllReplies',[index]]]]]}}" class="show-more-replies" catchtap="__e"><text>{{"æŸ¥çœ‹"+comment.g8+"æ¡å›å¤"}}</text></view></block><block wx:if="{{comment.$orig.showAllReplies}}"><view data-event-opts="{{[['tap',[['toggleShowAllReplies',[index]]]]]}}" class="show-more-replies" catchtap="__e"><text>æ”¶èµ·å›å¤</text></view></block></view></block></view></block></scroll-view><view class="message-input-box"><input class="message-input" placeholder="è¯´ç‚¹ä»€ä¹ˆ..." adjust-position="{{true}}" data-event-opts="{{[['confirm',[['sendComment',['$event']]]],['input',[['__set_model',['','newComment','$event',[]]]]]]}}" value="{{newComment}}" bindconfirm="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['showEmojiSelector',['message']]]]]}}" class="emoji-btn-inline" bindtap="__e"><text>{{showEmojiSelector?'âŒ¨ï¸':'ğŸ˜Š'}}</text></view><view data-event-opts="{{[['tap',[['sendComment',['$event']]]]]}}" class="{{['send-btn',($root.g9)?'active':'']}}" bindtap="__e"><text>å‘é€</text></view></view></view><view data-event-opts="{{[['tap',[['closeReply',['$event']]]]]}}" class="{{['reply-overlay',(showReplyPanel)?'show':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="{{['reply-panel',(showReplyPanel)?'show':'']}}" catchtap="__e"><view class="reply-header"><text class="reply-title">{{"å›å¤ "+replyToUser}}</text><view data-event-opts="{{[['tap',[['closeReply',['$event']]]]]}}" bindtap="__e"><uni-icons vue-id="f5ff30e8-9" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><view class="reply-input-box"><textarea class="reply-textarea" placeholder="{{'å›å¤ '+replyToUser+'...'}}" adjust-position="{{true}}" focus="{{showReplyPanel}}" auto-height="{{true}}" maxlength="500" data-event-opts="{{[['confirm',[['sendReply',['$event']]]],['input',[['__set_model',['','newReply','$event',[]]]]]]}}" value="{{newReply}}" bindconfirm="__e" bindinput="__e"></textarea><view class="reply-actions"><view data-event-opts="{{[['tap',[['showEmojiSelector',['reply']]]]]}}" class="emoji-btn" bindtap="__e"><text>{{showEmojiSelector?'âŒ¨ï¸':'ğŸ˜Š'}}</text></view><view class="char-count">{{$root.g10+"/500"}}</view><view data-event-opts="{{[['tap',[['sendReply',['$event']]]]]}}" class="{{['send-btn',($root.g11)?'active':'']}}" bindtap="__e"><text>å‘é€</text></view></view></view></view><view data-event-opts="{{[['tap',[['closeQuickReply',['$event']]]]]}}" class="{{['quick-reply-overlay',(showQuickReplyPanel)?'show':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="{{['quick-reply-panel',(showQuickReplyPanel)?'show':'']}}" catchtap="__e"><view class="quick-reply-header"><text class="quick-reply-title">å‘è¡¨ç•™è¨€</text><view data-event-opts="{{[['tap',[['closeQuickReply',['$event']]]]]}}" bindtap="__e"><uni-icons vue-id="f5ff30e8-10" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><view class="quick-reply-input-box"><textarea class="quick-reply-textarea" placeholder="è¯´ç‚¹ä»€ä¹ˆ..." adjust-position="{{true}}" focus="{{showQuickReplyPanel}}" auto-height="{{true}}" maxlength="500" data-event-opts="{{[['confirm',[['sendQuickComment',['$event']]]],['input',[['__set_model',['','quickComment','$event',[]]]]]]}}" value="{{quickComment}}" bindconfirm="__e" bindinput="__e"></textarea><view class="quick-reply-actions"><view data-event-opts="{{[['tap',[['showEmojiSelector',['quick']]]]]}}" class="emoji-btn" bindtap="__e"><text>{{showEmojiSelector?'âŒ¨ï¸':'ğŸ˜Š'}}</text></view><view class="char-count">{{$root.g12+"/500"}}</view><view data-event-opts="{{[['tap',[['sendQuickComment',['$event']]]]]}}" class="{{['send-btn',($root.g13)?'active':'']}}" bindtap="__e"><text>å‘é€</text></view></view></view></view><view data-event-opts="{{[['tap',[['closeEmojiPicker',['$event']]]]]}}" class="{{['emoji-picker-overlay',(showEmojiPicker)?'show':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="{{['emoji-picker-panel',(showEmojiPicker)?'show':'']}}" catchtap="__e"><view class="emoji-picker-header"><text class="emoji-picker-title">é€‰æ‹©è¡¨æƒ…</text><view data-event-opts="{{[['tap',[['closeEmojiPicker',['$event']]]]]}}" bindtap="__e"><uni-icons vue-id="f5ff30e8-11" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><scroll-view class="emoji-grid-container" scroll-y="{{true}}"><view class="emoji-grid"><block wx:for="{{emojiList}}" wx:for-item="emoji" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['selectEmoji',['$0'],[[['emojiList','id',emoji.id]]]]]]]}}" class="emoji-item" bindtap="__e"><image class="emoji-icon" src="{{emoji.url}}" mode="aspectFit"></image></view></block></view></scroll-view></view><view data-event-opts="{{[['tap',[['closeBuyPanel',['$event']]]]]}}" class="{{['buy-overlay',(showBuyPanel)?'show':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="{{['buy-panel',(showBuyPanel)?'show':'']}}" catchtap="__e"><view class="buy-header"><text class="buy-title">ç¡®è®¤è´­ä¹°</text><view data-event-opts="{{[['tap',[['closeBuyPanel',['$event']]]]]}}" bindtap="__e"><uni-icons vue-id="f5ff30e8-12" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><view class="buy-goods-info"><image class="buy-goods-image" src="{{goods_info.goods_big_logo}}" mode="aspectFill"></image><view class="buy-goods-detail"><text class="buy-goods-name">{{goods_info.goods_name}}</text><view class="buy-goods-price-row"><text class="buy-price-symbol">Â¥</text><text class="buy-price-value">{{goods_info.goods_price}}</text></view></view></view><view class="buy-address-section"><view class="buy-section-title"><text>æ”¶è´§åœ°å€</text><text class="required-mark">*</text></view><textarea class="buy-address-input" placeholder="è¯·è¾“å…¥è¯¦ç»†çš„æ”¶è´§åœ°å€ï¼ˆå¦‚ï¼šxxæ ¡åŒºxxå·æ¥¼xxå®¤ï¼‰" adjust-position="{{true}}" auto-height="{{true}}" maxlength="200" data-event-opts="{{[['input',[['__set_model',['','deliveryAddress','$event',[]]]]]]}}" value="{{deliveryAddress}}" bindinput="__e"></textarea><view class="address-char-count">{{$root.g14+"/200"}}</view><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="default-address-checkbox" bindtap="__e"><view class="checkbox-wrapper"><view class="{{['checkbox',(setAsDefault)?'checked':'']}}"><block wx:if="{{setAsDefault}}"><text class="checkbox-icon">âœ“</text></block></view><text class="checkbox-label">è®¾ä¸ºé»˜è®¤åœ°å€</text></view></view></view><view class="buy-action-section"><view data-event-opts="{{[['tap',[['confirmPurchase',['$event']]]]]}}" class="{{['confirm-buy-btn',($root.g15)?'active':'']}}" bindtap="__e"><text>ç«‹å³è´­ä¹°</text></view></view></view></view>