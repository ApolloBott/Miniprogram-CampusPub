{"version":3,"sources":["webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?af48","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?c38c","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?1419","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?4818","uni-app:///components/my-goods/my-goods.vue","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?8238","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/components/my-goods/my-goods.vue?bd5e"],"names":["name","props","goods","type","default","data","isNavigating","computed","publisherAvatar","publisherName","hoursSince","isRecent","publishedText","methods","gotoProfile","uni","url","console","queryObj","code","res","publisher_info","payload","setTimeout","formatTime","timestamp","gotoDetail","goods_id","user_openid","filters","tofixed"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAmjB,CAAgB,gkBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACwCvkB;AAAA;AAAA;AAAA,eAEA;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;IACA;EACA;EACAC,0CACA;IAEAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;EAAA,EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAAA,KAIA;kBAAA;kBAAA;gBAAA;gBACAC;gBAAA;cAAA;gBAIA;gBAAA;gBAGAC;kBAAAC;gBAAA;gBAAA;gBAAA,OACAJ;cAAA;gBAAA;gBAAAK;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACAH;gBACAI;gBACAC;gBAAA;gBAAA,OAEAP;kBACAC;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAC;cAAA;gBAAA;gBAEAM;kBACA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAC;MACA;MAEA,2CACA,gCACAC;MAEA;MACA;MAEA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MAEA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBACAT;gBAAA;cAAA;gBAIA;gBAAA;gBAGAA;gBAEAF;kBACAY;kBACAC;gBACA;kBAAA;kBACA;oBACAX;kBACA;gBACA;kBACAA;gBACA;gBAAA;gBAAA,OAEAF;kBACAC;gBACA;cAAA;gBAEAC;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACA;cAAA;gBAAA;gBAEAM;kBACA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;EACAM;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvLA;AAAA;AAAA;AAAA;AAAsjC,CAAgB,ugCAAG,EAAC,C;;;;;;;;;;;ACA1kC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/my-goods/my-goods.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./my-goods.vue?vue&type=template&id=8c45c4b8&\"\nvar renderjs\nimport script from \"./my-goods.vue?vue&type=script&lang=js&\"\nexport * from \"./my-goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my-goods.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/my-goods/my-goods.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-goods.vue?vue&type=template&id=8c45c4b8&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 =\n    _vm.goods && _vm.goods.goods_price\n      ? _vm._f(\"tofixed\")(_vm.goods.goods_price)\n      : null\n  var m0 = _vm.formatTime(_vm.goods.add_time)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-goods.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"goods-item\">\n    <!-- ÂõæÁâá -->\n    <view class=\"goods-item-image\" @click=\"gotoDetail(goods)\">\n      <image :src=\"goods.goods_big_logo\" class=\"goods-pic\" mode=\"aspectFill\"></image>\n    </view>\n\n    <!-- ÊñáÊú¨‰ø°ÊÅØ -->\n    <view class=\"goods-item-info\">\n      <view class=\"goods-name\" @click=\"gotoDetail(goods)\">{{ goods.goods_name }}</view>\n      \n      <!-- ‰ª∑Ê†ºÂíåÊ†°Âå∫‰ø°ÊÅØË°å -->\n      <view class=\"goods-footer\" @click=\"gotoDetail(goods)\">\n        <view class=\"goods-price\" v-if=\"goods && goods.goods_price\">\n          <text class=\"price-symbol\">¬•</text>\n          <text class=\"price-num\">{{ goods.goods_price | tofixed }}</text>\n        </view>\n        \n        <view class=\"goods-location\">\n          <text class=\"location-text\">{{ goods.location || '‰ΩçÁΩÆÊú™Áü•' }}Ê†°Âå∫</text>\n        </view>\n      </view>\n\n      <!-- üî• ‰øÆÊîπÔºöÂèëÂ∏ÉËÄÖ‰ø°ÊÅØ - Â∑¶ËæπÂ§¥ÂÉè+ÊòµÁß∞ÔºåÂè≥ËæπÊó∂Èó¥ -->\n      <view class=\"publisher-info\" @click=\"gotoProfile(goods.publisher_id)\">\n        <view class=\"publisher-left\">\n          <image \n            :src=\"publisherAvatar\" \n            class=\"publisher-avatar\"\n            mode=\"aspectFill\"\n          ></image>\n          <text class=\"publisher-name\">{{ publisherName }}</text>\n        </view>\n        <text class=\"card-time\">{{ formatTime(goods.add_time) }}</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  name:\"my-goods\",\n  props: {\n    goods: {\n      type: Object,\n      default: {},\n    },\n  },\n  data() {\n    return {\n      isNavigating: false,\n    };\n  },\n  computed: {\n    ...mapState('m_user', ['openid']),\n    \n    publisherAvatar() {\n      return this.goods?.publisher_avatarUrl || '/images/1.jpg';\n    },\n    publisherName() {\n      return this.goods?.publisher_nickname || 'ÂåøÂêçÁî®Êà∑';\n    },\n    hoursSince() {\n      let currentTimestamp = Math.floor(Date.now() / 1000);\n      let diff = currentTimestamp - this.goods?.add_time;\n      return Math.floor(diff / 3600);\n    },\n    isRecent() {\n      return this.hoursSince !== null && this.hoursSince <= 72;\n    },\n    publishedText() {\n      if (!this.isRecent) return \"\";\n      const h = Math.max(1, this.hoursSince);\n      return `${h}Â∞èÊó∂ÂÜÖÂèëÂ∏É`;\n    },\n  },\n  methods: {\n    async gotoProfile(openid) {\n      if (!this.openid) {\n        uni.switchTab({\n          url: '/pages/my/my'\n        })\n        return\n      }\n      \n      if (this.isNavigating) {\n        console.log('‚è∏Ô∏è Ê≠£Âú®Ë∑≥ËΩ¨‰∏≠ÔºåËØ∑ÂãøÈáçÂ§çÁÇπÂáª');\n        return;\n      }\n      \n      this.isNavigating = true;\n      \n      try {\n        const queryObj = { code: openid };\n        const { data: res } = await uni.$http.get('/users/userinfo', queryObj);\n        \n        if (res.meta.status === 200) {\n          console.log('Ë∑≥ËΩ¨Âà∞Áî®Êà∑‰∏ªÈ°µ');\n          const publisher_info = res.message;\n          const payload = encodeURIComponent(JSON.stringify(publisher_info));\n          \n          await uni.navigateTo({\n            url: `/subpkg/profile/profile?publisher=${payload}`\n          });\n        }\n      } catch (error) {\n        console.error('‚ùå Ë∑≥ËΩ¨Áî®Êà∑‰∏ªÈ°µÂ§±Ë¥•:', error);\n      } finally {\n        setTimeout(() => {\n          this.isNavigating = false;\n        }, 500);\n      }\n    },\n    \n    formatTime(timestamp) {\n      if (!timestamp) return 'ÂàöÂàö'\n      \n      const time = typeof timestamp === 'string' \n        ? new Date(timestamp).getTime() \n        : timestamp * 1000\n      \n      const now = Date.now()\n      const diff = now - time\n      \n      const minute = 60 * 1000\n      const hour = 60 * minute\n      const day = 24 * hour\n      \n      if (diff < 0) return 'ÂàöÂàö'\n      if (diff < minute) return 'ÂàöÂàö'\n      if (diff < hour) return Math.floor(diff / minute) + 'ÂàÜÈíüÂâç'\n      if (diff < day) return Math.floor(diff / hour) + 'Â∞èÊó∂Ââç'\n      if (diff < 7 * day) return Math.floor(diff / day) + 'Â§©Ââç'\n      \n      const date = new Date(time)\n      return `${date.getMonth() + 1}-${date.getDate()}`\n    },\n    \n    async gotoDetail(item) {\n      if (this.isNavigating) {\n        console.log('‚è∏Ô∏è Ê≠£Âú®Ë∑≥ËΩ¨‰∏≠ÔºåËØ∑ÂãøÈáçÂ§çÁÇπÂáª');\n        return;\n      }\n      \n      this.isNavigating = true;\n      \n      try {\n        console.log('üìä Â¢ûÂä†ÂïÜÂìÅÊµèËßàÊ¨°Êï∞:', item.goods_id);\n        \n        uni.$http.post('/goods/view', {\n          goods_id: item.goods_id,\n          user_openid: this.openid || null\n        }).then(({ data: res }) => {\n          if (res.meta.status === 200) {\n            console.log('‚úÖ ÊµèËßàÊ¨°Êï∞Â¢ûÂä†ÊàêÂäü');\n          }\n        }).catch(error => {\n          console.error('‚ùå ÊµèËßàÊ¨°Êï∞Â¢ûÂä†Â§±Ë¥•:', error);\n        });\n\n        await uni.navigateTo({\n          url: '/subpkg/goods_detail/goods_detail?goods_id=' + item.goods_id\n        });\n        \n        console.log('‚úÖ Ë∑≥ËΩ¨ÊàêÂäü');\n        \n      } catch (error) {\n        console.error('‚ùå Ë∑≥ËΩ¨Â§±Ë¥•:', error);\n        this.isNavigating = false;\n      } finally {\n        setTimeout(() => {\n          this.isNavigating = false;\n        }, 500);\n      }\n    },\n  },\n  filters: {\n    tofixed(num) {\n      return Number(num).toFixed(2)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.goods-item {\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  border-radius: 12rpx;\n  overflow: hidden;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n  height: 550rpx;\n}\n\n.goods-item-image {\n  position: relative;\n  width: 100%;\n  height: 370rpx;\n  background: #f5f5f5;\n  flex-shrink: 0;\n\n  .goods-pic {\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n}\n\n.goods-item-info {\n  padding: 20rpx;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  .goods-name {\n    font-size: 30rpx;\n    color: #333;\n    line-height: 40rpx;\n    margin-bottom: 0rpx;\n    height: 40rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    flex-shrink: 0;\n  }\n\n  .goods-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 2rpx;\n    height: 30rpx;\n    flex-shrink: 0;\n\n    .goods-price {\n      display: flex;\n      align-items: baseline;\n      color: #c00000;\n\n      .price-symbol {\n        font-size: 24rpx;\n        font-weight: 500;\n      }\n      .price-num {\n        font-size: 36rpx;\n        font-weight: 700;\n      }\n    }\n\n    .goods-location {\n      display: flex;\n      align-items: center;\n      \n      .location-text {\n        font-size: 22rpx;\n        color: #1890ff;\n        background-color: #f0f9ff;\n        padding: 4rpx 10rpx;\n      }\n    }\n  }\n\n  /* üî• ÂÖ≥ÈîÆ‰øÆÊîπÔºöÂèëÂ∏ÉËÄÖ‰ø°ÊÅØË°å */\n  .publisher-info {\n    display: flex;\n    align-items: center;\n    justify-content: space-between; // Â∑¶Âè≥ÂàÜÂ∏É\n    padding-top: 4rpx;\n    height: 40rpx; // Â¢ûÂä†È´òÂ∫¶‰ª•ÂÆπÁ∫≥ÂÜÖÂÆπ\n    flex-shrink: 0;\n\n    // üî• Êñ∞Â¢ûÔºöÂ∑¶‰æßÂÆπÂô®ÔºàÂ§¥ÂÉè+ÊòµÁß∞Ôºâ\n    .publisher-left {\n      display: flex;\n      align-items: center;\n      flex: 1; // Âç†ÊçÆÂâ©‰ΩôÁ©∫Èó¥\n      min-width: 0; // ÂÖÅËÆ∏ÊñáÊú¨Ê∫¢Âá∫ÈöêËóè\n    }\n\n    .publisher-avatar {\n      width: 40rpx;\n      height: 40rpx;\n      border-radius: 50%;\n      margin-right: 10rpx;\n      background: #f5f5f5;\n      flex-shrink: 0;\n    }\n\n    .publisher-name {\n      font-size: 20rpx;\n      color: #666;\n      max-width: 150rpx; // ÂáèÂ∞èÊúÄÂ§ßÂÆΩÂ∫¶Ôºå‰∏∫Êó∂Èó¥ÁïôÁ©∫Èó¥\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      flex-shrink: 1; // ÂÖÅËÆ∏Êî∂Áº©\n    }\n\n    // üî• ‰øÆÊîπÔºöÊó∂Èó¥Ê†∑ÂºèÔºàÈù†Âè≥ÊòæÁ§∫Ôºâ\n    .card-time {\n      font-size: 20rpx;\n      color: #999;\n      white-space: nowrap; // Èò≤Ê≠¢Êç¢Ë°å\n      flex-shrink: 0; // ‰∏çÂÖÅËÆ∏Êî∂Áº©\n      margin-left: 10rpx; // ‰∏éÊòµÁß∞‰øùÊåÅÈó¥Ë∑ù\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-goods.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-goods.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1762677684048\n      var cssReload = require(\"D:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}