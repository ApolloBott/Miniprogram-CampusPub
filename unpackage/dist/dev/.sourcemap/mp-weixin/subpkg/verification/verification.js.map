{"version":3,"sources":["uni-app:///main.js","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?930a","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?f39f","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?301e","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?e3bd","uni-app:///subpkg/verification/verification.vue","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?7c38","webpack:///E:/ECNU/front-end/Miniprogram-CampusPub/subpkg/verification/verification.vue?d074"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isVerified","verificationData","name","studentId","department","verifyTime","formData","errors","isSubmitting","allDepartments","departmentIndex","onLoad","computed","methods","onDepartmentChange","validateForm","isValid","submitVerification","firstError","uni","title","icon","duration","mask","openid","res","console","confirmAndBack","delta","formatCurrentTime"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACyM;AACzM,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA0xB,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACk+B9yB;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;QACAC;QAAA;QACAC;MACA;MACAC;QACAJ;QACAC;QACAC;MACA;;MACAG;QACAL;QACAC;QACAC;MACA;;MACAI;MAEA;MACAC,iBACA,WACA,YACA,QACA,WACA,SACA,UACA,QACA,QACA,QACA,OACA,aACA,WACA,OACA,UACA,QACA,aACA,UACA,aACA,aACA,cACA,UACA,aACA,aACA,UACA,UACA,aACA,YACA,QACA,QACA,QACA,UACA;MACAC;IACA;EACA;EAEAC;IACA;EAAA,CACA;EAEAC,4BACA,oFACA;EAEAC;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IAGA;IACAC;MACA;MACA;QACAb;QACAC;QACAC;MACA;;MAEA;MACA;QACA;QACAY;MACA;QACA;QACAA;MACA;;MAEA;MACA;QACA;QACAA;MACA;QACA;QACAA;MACA;;MAEA;MACA;QACA;QACAA;MACA;MAEA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAC;gBACAC;kBACAC;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBAEAH;kBACAC;kBACAG;gBACA;gBAAA;gBAAA;gBAAA,OAIAJ;kBACAK;kBACA;kBACA;kBACApB;gBACA;cAAA;gBAAA;gBALAqB;gBAOAN;gBAEA;kBACA;kBACA;oBACAjB;oBACAC;oBACAC;oBACAC;kBACA;kBAEAc;oBACAC;oBACAC;oBACAC;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;oBACApB;oBACAC;oBACAC;kBACA;kBACA;gBAEA;kBACAe;oBACAC;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAF;gBACAO;gBACAP;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAGA;IACAM;MACAR;QACAS;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjrCA;AAAA;AAAA;AAAA;AAAq9C,CAAgB,y6CAAG,EAAC,C;;;;;;;;;;;ACAz+C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpkg/verification/verification.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/verification/verification.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./verification.vue?vue&type=template&id=43883b4c&\"\nvar renderjs\nimport script from \"./verification.vue?vue&type=script&lang=js&\"\nexport * from \"./verification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./verification.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/verification/verification.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./verification.vue?vue&type=template&id=43883b4c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./verification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./verification.vue?vue&type=script&lang=js&\"","<!-- \r\n<template>\r\n  <view class=\"verification-page\">\r\n    <view class=\"verified-status\" v-if=\"verificationInfo && verificationInfo.status === 1\">\r\n      <view class=\"status-icon\">âœ…</view>\r\n      <text class=\"status-title\">æ ¡å›­è®¤è¯å·²é€šè¿‡</text>\r\n      <text class=\"status-desc\">æ‚¨å·²å®Œæˆæ ¡å›­èº«ä»½è®¤è¯ï¼Œäº«å—ä¸“å±æƒç›Š</text>\r\n      <view class=\"verified-info\">\r\n        <view class=\"info-item\">\r\n          <text class=\"label\">è®¤è¯æ—¶é—´ï¼š</text>\r\n          <text class=\"value\">{{ formatTime(verificationInfo.review_time) }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"label\">è®¤è¯çŠ¶æ€ï¼š</text>\r\n          <text class=\"value verified\">å·²è®¤è¯ç”¨æˆ·</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    \r\n    <view class=\"pending-status\" v-else-if=\"verificationInfo && verificationInfo.status === 0\">\r\n      <view class=\"status-icon\">â³</view>\r\n      <text class=\"status-title\">è®¤è¯å®¡æ ¸ä¸­</text>\r\n      <text class=\"status-desc\">æ‚¨çš„è®¤è¯ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­ï¼Œé€šå¸¸1-3ä¸ªå·¥ä½œæ—¥å†…å®Œæˆ</text>\r\n      <text class=\"submit-time\">æäº¤æ—¶é—´ï¼š{{ formatTime(verificationInfo.submit_time) }}</text>\r\n    </view>\r\n\r\n    <view class=\"failed-status\" v-else-if=\"verificationInfo && verificationInfo.status === 2\">\r\n      <view class=\"status-icon\">âŒ</view>\r\n      <text class=\"status-title\">è®¤è¯æœªé€šè¿‡</text>\r\n      <text class=\"status-desc\">å¾ˆé—æ†¾ï¼Œæ‚¨çš„è®¤è¯ç”³è¯·æœªé€šè¿‡å®¡æ ¸</text>\r\n      <view class=\"fail-reason\" v-if=\"verificationInfo.admin_remark\">\r\n        <text class=\"reason-title\">æœªé€šè¿‡åŸå› ï¼š</text>\r\n        <text class=\"reason-text\">{{ verificationInfo.admin_remark }}</text>\r\n      </view>\r\n      \r\n\r\n      <view class=\"time-limit\" v-if=\"!canRetry\">\r\n        <text class=\"limit-title\">â° é‡æ–°ç”³è¯·é™åˆ¶</text>\r\n        <text class=\"limit-desc\">ä¸ºé¿å…é¢‘ç¹ç”³è¯·ï¼Œè¯·åœ¨ {{ remainingTime }} åé‡æ–°æäº¤è®¤è¯</text>\r\n      </view>\r\n      \r\n      <view class=\"retry-btn\" @click=\"startVerification\" :class=\"{ 'disabled': !canRetry }\">\r\n        <text>{{ canRetry ? 'é‡æ–°è®¤è¯' : `${remainingTime}åå¯é‡è¯•` }}</text>\r\n      </view>\r\n    </view>\r\n    \r\n\r\n    <view class=\"verification-form\" v-else>\r\n      <view class=\"form-header\">\r\n        <view class=\"header-icon\">ğŸ“</view>\r\n        <text class=\"header-title\">æ ¡å›­èº«ä»½è®¤è¯</text>\r\n        <text class=\"header-desc\">ä¸Šä¼ æ ¡å›­å¡æ­£åé¢å®Œæˆèº«ä»½è®¤è¯</text>\r\n      </view>\r\n\r\n      <view class=\"guide-section\">\r\n        <text class=\"section-title\">ğŸ“· æ‹ç…§æŒ‡å¯¼</text>\r\n        <text class=\"section-desc\">è¯·æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹æ‹æ‘„æ‚¨çš„æ ¡å›­å¡æ­£åé¢</text>\r\n        \r\n        <view class=\"guide-images\">\r\n          <view class=\"guide-item\">\r\n            <image \r\n              class=\"guide-image\" \r\n              src=\"https://wait00.oss-cn-shanghai.aliyuncs.com/guide/campus-card-front.jpg\"\r\n              mode=\"aspectFit\"\r\n            ></image>\r\n            <text class=\"guide-label\">æ ¡å›­å¡æ­£é¢ç¤ºä¾‹</text>\r\n            <text class=\"guide-tip\">ç¡®ä¿å§“åã€ç…§ç‰‡ã€å­¦å·æ¸…æ™°å¯è§</text>\r\n          </view>\r\n          <view class=\"guide-item\">\r\n            <image \r\n              class=\"guide-image\" \r\n              src=\"https://wait00.oss-cn-shanghai.aliyuncs.com/guide/campus-card-back.jpg\" \r\n              mode=\"aspectFit\"\r\n            ></image>\r\n            <text class=\"guide-label\">æ ¡å›­å¡èƒŒé¢ç¤ºä¾‹</text>\r\n            <text class=\"guide-tip\">ç¡®ä¿å­¦æ ¡åç§°ã€æœ‰æ•ˆæœŸæ¸…æ™°å¯è§</text>\r\n          </view>\r\n        </view>\r\n        \r\n\r\n        <view class=\"photo-requirements\">\r\n          <text class=\"req-title\">æ‹ç…§è¦æ±‚ï¼š</text>\r\n          <view class=\"req-list\">\r\n            <text class=\"req-item\">â€¢ å…‰çº¿å……è¶³ï¼Œé¿å…åå…‰</text>\r\n            <text class=\"req-item\">â€¢ å¡ç‰‡å¹³æ•´ï¼Œä¿¡æ¯æ¸…æ™°</text>\r\n            <text class=\"req-item\">â€¢ é¿å…é®æŒ¡é‡è¦ä¿¡æ¯</text>\r\n            <text class=\"req-item\">â€¢ å»ºè®®ä½¿ç”¨æ·±è‰²èƒŒæ™¯</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"form-section\">\r\n        <text class=\"section-title\">ğŸ“‹ ä¸Šä¼ æ ¡å›­å¡</text>\r\n        <text class=\"section-desc\">è¯·ä¸Šä¼ æ ¡å›­å¡æ­£åé¢ç…§ç‰‡ï¼ˆå¿…é¡»ä¸Šä¼ 2å¼ ï¼‰</text>\r\n        \r\n        <view class=\"image-upload\">\r\n          <view class=\"upload-grid\">\r\n\r\n            <view class=\"upload-item\">\r\n              <text class=\"upload-label\">æ ¡å›­å¡æ­£é¢ *</text>\r\n              <view class=\"upload-area\" @click=\"chooseImage('front')\">\r\n                <image \r\n                  v-if=\"frontImage\" \r\n                  class=\"uploaded-image\" \r\n                  :src=\"frontImage\" \r\n                  mode=\"aspectFill\"\r\n                ></image>\r\n                <view v-else class=\"upload-placeholder\" :class=\"{ 'uploading': uploading === 'front' }\">\r\n                  <text class=\"upload-icon\">{{ uploading === 'front' ? 'â³' : 'ğŸ“·' }}</text>\r\n                  <text class=\"upload-text\">{{ uploading === 'front' ? 'ä¸Šä¼ ä¸­...' : 'ç‚¹å‡»ä¸Šä¼ æ­£é¢' }}</text>\r\n                </view>\r\n                <view v-if=\"frontImage\" class=\"delete-btn\" @click.stop=\"deleteImage('front')\">\r\n                  <text>Ã—</text>\r\n                </view>\r\n              </view>\r\n            </view>\r\n            \r\n            <view class=\"upload-item\">\r\n              <text class=\"upload-label\">æ ¡å›­å¡èƒŒé¢ *</text>\r\n              <view class=\"upload-area\" @click=\"chooseImage('back')\">\r\n                <image \r\n                  v-if=\"backImage\" \r\n                  class=\"uploaded-image\" \r\n                  :src=\"backImage\" \r\n                  mode=\"aspectFill\"\r\n                ></image>\r\n                <view v-else class=\"upload-placeholder\" :class=\"{ 'uploading': uploading === 'back' }\">\r\n                  <text class=\"upload-icon\">{{ uploading === 'back' ? 'â³' : 'ğŸ“·' }}</text>\r\n                  <text class=\"upload-text\">{{ uploading === 'back' ? 'ä¸Šä¼ ä¸­...' : 'ç‚¹å‡»ä¸Šä¼ èƒŒé¢' }}</text>\r\n                </view>\r\n                <view v-if=\"backImage\" class=\"delete-btn\" @click.stop=\"deleteImage('back')\">\r\n                  <text>Ã—</text>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"notice-section\">\r\n        <text class=\"notice-title\">ğŸ“‹ è®¤è¯é¡»çŸ¥</text>\r\n        <view class=\"notice-list\">\r\n          <text class=\"notice-item\">â€¢ ä»…æ”¯æŒæœ¬æ ¡åœ¨è¯»å­¦ç”Ÿè®¤è¯</text>\r\n          <text class=\"notice-item\">â€¢ è¯·ç¡®ä¿ç…§ç‰‡çœŸå®æœ‰æ•ˆ</text>\r\n          <text class=\"notice-item\">â€¢ è®¤è¯ä¿¡æ¯ä»…ç”¨äºèº«ä»½éªŒè¯</text>\r\n          <text class=\"notice-item\">â€¢ å®¡æ ¸æ—¶é—´ï¼š1-3ä¸ªå·¥ä½œæ—¥</text>\r\n          <text class=\"notice-item\">â€¢ è®¤è¯å¤±è´¥å24å°æ—¶å†…ä¸å¯é‡æ–°ç”³è¯·</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"submit-btn\" @click=\"submitVerification\" :class=\"{ 'disabled': isSubmitting || !canSubmit }\">\r\n        <text>{{ isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤è®¤è¯' }}</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      verificationInfo: null, // è®¤è¯ä¿¡æ¯\r\n      frontImage: '', // æ­£é¢å›¾ç‰‡URL\r\n      backImage: '', // èƒŒé¢å›¾ç‰‡URL\r\n      frontImageUrl: '', // æ­£é¢äº‘ç«¯URL\r\n      backImageUrl: '', // èƒŒé¢äº‘ç«¯URL\r\n      uploading: '', // å½“å‰ä¸Šä¼ çŠ¶æ€ 'front' | 'back' | ''\r\n      isSubmitting: false,\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    ...mapState('m_user', ['openid', 'userBase']),\r\n    \r\n    // ğŸ”§ æ–°å¢ï¼šæ˜¯å¦å¯ä»¥æäº¤\r\n    canSubmit() {\r\n      return this.frontImageUrl && this.backImageUrl && !this.uploading && !this.isSubmitting\r\n    },\r\n    \r\n    // ğŸ”§ æ–°å¢ï¼šæ˜¯å¦å¯ä»¥é‡è¯•ï¼ˆ24å°æ—¶é™åˆ¶ï¼‰\r\n    canRetry() {\r\n      if (!this.verificationInfo || this.verificationInfo.status !== 2) {\r\n        return true\r\n      }\r\n      \r\n      const reviewTime = new Date(this.verificationInfo.review_time).getTime()\r\n      const now = new Date().getTime()\r\n      const hoursPassed = (now - reviewTime) / (1000 * 60 * 60)\r\n      \r\n      return hoursPassed >= 24\r\n    },\r\n    \r\n    // ğŸ”§ æ–°å¢ï¼šå‰©ä½™ç­‰å¾…æ—¶é—´\r\n    remainingTime() {\r\n      if (!this.verificationInfo || this.verificationInfo.status !== 2) {\r\n        return ''\r\n      }\r\n      \r\n      const reviewTime = new Date(this.verificationInfo.review_time).getTime()\r\n      const now = new Date().getTime()\r\n      const hoursRemaining = 24 - (now - reviewTime) / (1000 * 60 * 60)\r\n      \r\n      if (hoursRemaining <= 0) return ''\r\n      \r\n      const hours = Math.floor(hoursRemaining)\r\n      const minutes = Math.floor((hoursRemaining - hours) * 60)\r\n      \r\n      if (hours > 0) {\r\n        return `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`\r\n      } else {\r\n        return `${minutes}åˆ†é’Ÿ`\r\n      }\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    this.loadVerificationInfo()\r\n    \r\n    // ğŸ”§ æ–°å¢ï¼šå®šæ—¶æ›´æ–°å‰©ä½™æ—¶é—´\r\n    this.timer = setInterval(() => {\r\n      if (this.verificationInfo && this.verificationInfo.status === 2 && !this.canRetry) {\r\n        this.$forceUpdate()\r\n      }\r\n    }, 60000) // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡\r\n  },\r\n  \r\n  onUnload() {\r\n    // æ¸…é™¤å®šæ—¶å™¨\r\n    if (this.timer) {\r\n      clearInterval(this.timer)\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    // åŠ è½½è®¤è¯ä¿¡æ¯\r\n    async loadVerificationInfo() {\r\n      try {\r\n        const { data: res } = await uni.$http.get('/verification/info', {\r\n          openid: this.openid\r\n        })\r\n        \r\n        if (res.meta.status === 200) {\r\n          this.verificationInfo = res.message\r\n          console.log('è®¤è¯ä¿¡æ¯:', this.verificationInfo)\r\n        }\r\n      } catch (error) {\r\n        console.error('åŠ è½½è®¤è¯ä¿¡æ¯å¤±è´¥:', error)\r\n      }\r\n    },\r\n    \r\n    // å¼€å§‹è®¤è¯ï¼ˆé‡æ–°è®¤è¯ï¼‰\r\n    startVerification() {\r\n      if (!this.canRetry) {\r\n        uni.showToast({\r\n          title: 'è¯·ç¨åå†è¯•',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.verificationInfo = null\r\n      this.frontImage = ''\r\n      this.backImage = ''\r\n      this.frontImageUrl = ''\r\n      this.backImageUrl = ''\r\n    },\r\n    \r\n    // ğŸ”§ ä¿®æ”¹ï¼šé€‰æ‹©å›¾ç‰‡ï¼ˆåŒºåˆ†æ­£åé¢ï¼‰\r\n    chooseImage(type) {\r\n      if (this.uploading) {\r\n        uni.showToast({\r\n          title: 'æ­£åœ¨ä¸Šä¼ ä¸­ï¼Œè¯·ç¨å€™',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: async (res) => {\r\n          const tempFilePath = res.tempFilePaths[0]\r\n          \r\n          // å…ˆæ˜¾ç¤ºæœ¬åœ°å›¾ç‰‡\r\n          if (type === 'front') {\r\n            this.frontImage = tempFilePath\r\n          } else {\r\n            this.backImage = tempFilePath\r\n          }\r\n          \r\n          // ç«‹å³ä¸Šä¼ åˆ° OSS\r\n          await this.uploadImage(tempFilePath, type)\r\n        }\r\n      })\r\n    },\r\n    \r\n    // ğŸ”§ æ–°å¢ï¼šåˆ é™¤å›¾ç‰‡\r\n    deleteImage(type) {\r\n      if (type === 'front') {\r\n        this.frontImage = ''\r\n        this.frontImageUrl = ''\r\n      } else {\r\n        this.backImage = ''\r\n        this.backImageUrl = ''\r\n      }\r\n    },\r\n    \r\n    // ğŸ”§ ä¿®æ”¹ï¼šä¸Šä¼ å•å¼ å›¾ç‰‡\r\n    async uploadImage(filePath, type) {\r\n      this.uploading = type\r\n      \r\n      try {\r\n        // 1. è·å–ä¸Šä¼ å‡­è¯\r\n        const { data: tokenRes } = await uni.$http.get('/upload/token', {\r\n          openid: this.openid,\r\n          fileType: 'image'\r\n        })\r\n\r\n        if (tokenRes.meta.status !== 200) {\r\n          throw new Error('è·å–ä¸Šä¼ å‡­è¯å¤±è´¥')\r\n        }\r\n\r\n        // 2. è¯»å–æ–‡ä»¶\r\n        const fileContent = await new Promise((resolve, reject) => {\r\n          uni.getFileSystemManager().readFile({\r\n            filePath: filePath,\r\n            encoding: 'base64',\r\n            success: (res) => resolve(res.data),\r\n            fail: reject\r\n          })\r\n        })\r\n\r\n        // 3. ä¸Šä¼ åˆ° OSS\r\n        await new Promise((resolve, reject) => {\r\n          uni.request({\r\n            url: tokenRes.message.publicUrl,\r\n            method: 'PUT',\r\n            header: {\r\n              'Content-Type': 'image/jpeg'\r\n            },\r\n            data: uni.base64ToArrayBuffer(fileContent),\r\n            success: (res) => {\r\n              if (res.statusCode === 200) {\r\n                resolve(res)\r\n              } else {\r\n                reject(new Error(`ä¸Šä¼ å¤±è´¥: ${res.statusCode}`))\r\n              }\r\n            },\r\n            fail: reject\r\n          })\r\n        })\r\n\r\n        // 4. ä¿å­˜äº‘ç«¯ URL\r\n        if (type === 'front') {\r\n          this.frontImageUrl = tokenRes.message.publicUrl\r\n        } else {\r\n          this.backImageUrl = tokenRes.message.publicUrl\r\n        }\r\n\r\n        console.log(`${type === 'front' ? 'æ­£é¢' : 'èƒŒé¢'}ä¸Šä¼ æˆåŠŸ:`, tokenRes.message.publicUrl)\r\n\r\n        uni.showToast({\r\n          title: `${type === 'front' ? 'æ­£é¢' : 'èƒŒé¢'}ä¸Šä¼ æˆåŠŸ`,\r\n          icon: 'success',\r\n          duration: 1500\r\n        })\r\n\r\n      } catch (error) {\r\n        console.error('[ERROR] ä¸Šä¼ å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: error.message || 'ä¸Šä¼ å¤±è´¥',\r\n          icon: 'none',\r\n          duration: 3000\r\n        })\r\n        \r\n        // ä¸Šä¼ å¤±è´¥æ—¶ï¼Œæ¸…é™¤æœ¬åœ°å›¾ç‰‡\r\n        if (type === 'front') {\r\n          this.frontImage = ''\r\n        } else {\r\n          this.backImage = ''\r\n        }\r\n      } finally {\r\n        this.uploading = ''\r\n      }\r\n    },\r\n    \r\n    // ğŸ”§ ä¿®æ”¹ï¼šæäº¤è®¤è¯ç”³è¯·\r\n    async submitVerification() {\r\n      try {\r\n        if (!this.canSubmit) {\r\n          uni.showToast({\r\n            title: 'è¯·ä¸Šä¼ æ ¡å›­å¡æ­£åé¢ç…§ç‰‡',\r\n            icon: 'none'\r\n          })\r\n          return\r\n        }\r\n        \r\n        if (this.isSubmitting) return\r\n        \r\n        this.isSubmitting = true\r\n        \r\n        uni.showLoading({\r\n          title: 'æäº¤ä¸­...',\r\n          mask: true\r\n        })\r\n        \r\n        // ğŸ”§ ä¿®æ”¹ï¼šç®€åŒ–æäº¤æ•°æ®\r\n        const { data: res } = await uni.$http.post('/verification/submit', {\r\n          openid: this.openid,\r\n          nickname: this.userBase.nickname,\r\n          avatarUrl: this.userBase.avatarUrl,\r\n          verificationImages: [this.frontImageUrl, this.backImageUrl]\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.meta.status === 201) {\r\n          uni.showToast({\r\n            title: 'æäº¤æˆåŠŸï¼Œè¯·ç­‰å¾…å®¡æ ¸',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          \r\n          // é‡æ–°åŠ è½½è®¤è¯ä¿¡æ¯\r\n          setTimeout(() => {\r\n            this.loadVerificationInfo()\r\n          }, 1000)\r\n          \r\n        } else {\r\n          throw new Error(res.meta.msg || 'æäº¤å¤±è´¥')\r\n        }\r\n        \r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('æäº¤è®¤è¯ç”³è¯·å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: error.message || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.isSubmitting = false\r\n      }\r\n    },\r\n    \r\n    // æ ¼å¼åŒ–æ—¶é—´\r\n    formatTime(timestamp) {\r\n      if (!timestamp) return ''\r\n      const date = new Date(timestamp)\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.verification-page {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n// å·²è®¤è¯çŠ¶æ€\r\n.verified-status,\r\n.pending-status,\r\n.failed-status {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 120rpx 40rpx;\r\n  text-align: center;\r\n  \r\n  .status-icon {\r\n    font-size: 120rpx;\r\n    margin-bottom: 32rpx;\r\n  }\r\n  \r\n  .status-title {\r\n    font-size: 36rpx;\r\n    color: #333333;\r\n    font-weight: 600;\r\n    margin-bottom: 16rpx;\r\n  }\r\n  \r\n  .status-desc {\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n    margin-bottom: 32rpx;\r\n  }\r\n}\r\n\r\n.verified-info {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-top: 32rpx;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  \r\n  .info-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 16rpx 0;\r\n    border-bottom: 1rpx solid #f0f0f0;\r\n    \r\n    &:last-child {\r\n      border-bottom: none;\r\n    }\r\n    \r\n    .label {\r\n      font-size: 28rpx;\r\n      color: #999999;\r\n    }\r\n    \r\n    .value {\r\n      font-size: 28rpx;\r\n      color: #333333;\r\n      font-weight: 500;\r\n      \r\n      &.verified {\r\n        color: #10b981;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.submit-time {\r\n  font-size: 26rpx;\r\n  color: #999999;\r\n}\r\n\r\n.fail-reason {\r\n  background-color: #fff5f5;\r\n  border: 1rpx solid #fecaca;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  margin: 32rpx 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  \r\n  .reason-title {\r\n    font-size: 26rpx;\r\n    color: #dc2626;\r\n    font-weight: 500;\r\n    display: block;\r\n    margin-bottom: 8rpx;\r\n  }\r\n  \r\n  .reason-text {\r\n    font-size: 26rpx;\r\n    color: #dc2626;\r\n    line-height: 1.5;\r\n  }\r\n}\r\n\r\n// ğŸ”§ æ–°å¢ï¼šæ—¶é—´é™åˆ¶æ ·å¼\r\n.time-limit {\r\n  background-color: #fef3c7;\r\n  border: 1rpx solid #f59e0b;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  margin: 32rpx 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  \r\n  .limit-title {\r\n    font-size: 26rpx;\r\n    color: #92400e;\r\n    font-weight: 500;\r\n    display: block;\r\n    margin-bottom: 8rpx;\r\n  }\r\n  \r\n  .limit-desc {\r\n    font-size: 26rpx;\r\n    color: #92400e;\r\n    line-height: 1.5;\r\n  }\r\n}\r\n\r\n.retry-btn {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #ffffff;\r\n  padding: 24rpx 48rpx;\r\n  border-radius: 32rpx;\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  margin-top: 32rpx;\r\n  transition: all 0.3s;\r\n  \r\n  &:active {\r\n    opacity: 0.8;\r\n  }\r\n  \r\n  &.disabled {\r\n    background: #9ca3af;\r\n    opacity: 0.6;\r\n  }\r\n}\r\n\r\n// è®¤è¯è¡¨å•\r\n.verification-form {\r\n  padding: 32rpx;\r\n}\r\n\r\n.form-header {\r\n  text-align: center;\r\n  margin-bottom: 48rpx;\r\n  \r\n  .header-icon {\r\n    font-size: 120rpx;\r\n    margin-bottom: 24rpx;\r\n  }\r\n  \r\n  .header-title {\r\n    font-size: 36rpx;\r\n    color: #333333;\r\n    font-weight: 600;\r\n    margin-bottom: 12rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .header-desc {\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n  }\r\n}\r\n\r\n// ğŸ”§ æ–°å¢ï¼šæ‹ç…§æŒ‡å¯¼æ ·å¼\r\n.guide-section {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-bottom: 24rpx;\r\n  \r\n  .section-title {\r\n    font-size: 32rpx;\r\n    color: #333333;\r\n    font-weight: 500;\r\n    margin-bottom: 16rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .section-desc {\r\n    font-size: 26rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n    margin-bottom: 32rpx;\r\n    display: block;\r\n  }\r\n}\r\n\r\n.guide-images {\r\n  display: flex;\r\n  gap: 24rpx;\r\n  margin-bottom: 32rpx;\r\n  \r\n  .guide-item {\r\n    flex: 1;\r\n    text-align: center;\r\n    \r\n    .guide-image {\r\n      width: 100%;\r\n      height: 200rpx;\r\n      border-radius: 12rpx;\r\n      border: 2rpx solid #e5e7eb;\r\n      margin-bottom: 16rpx;\r\n    }\r\n    \r\n    .guide-label {\r\n      font-size: 28rpx;\r\n      color: #374151;\r\n      font-weight: 500;\r\n      display: block;\r\n      margin-bottom: 8rpx;\r\n    }\r\n    \r\n    .guide-tip {\r\n      font-size: 24rpx;\r\n      color: #6b7280;\r\n      line-height: 1.4;\r\n    }\r\n  }\r\n}\r\n\r\n.photo-requirements {\r\n  background-color: #f9fafb;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  border-left: 4rpx solid #3b82f6;\r\n  \r\n  .req-title {\r\n    font-size: 28rpx;\r\n    color: #1f2937;\r\n    font-weight: 500;\r\n    margin-bottom: 12rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .req-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8rpx;\r\n    \r\n    .req-item {\r\n      font-size: 26rpx;\r\n      color: #4b5563;\r\n      line-height: 1.4;\r\n    }\r\n  }\r\n}\r\n\r\n.form-section {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-bottom: 24rpx;\r\n  \r\n  .section-title {\r\n    font-size: 32rpx;\r\n    color: #333333;\r\n    font-weight: 500;\r\n    margin-bottom: 16rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .section-desc {\r\n    font-size: 26rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n    margin-bottom: 32rpx;\r\n    display: block;\r\n  }\r\n}\r\n\r\n// ğŸ”§ ä¿®æ”¹ï¼šå›¾ç‰‡ä¸Šä¼ æ ·å¼\r\n.image-upload {\r\n  .upload-grid {\r\n    display: flex;\r\n    gap: 24rpx;\r\n  }\r\n  \r\n  .upload-item {\r\n    flex: 1;\r\n    \r\n    .upload-label {\r\n      font-size: 28rpx;\r\n      color: #374151;\r\n      font-weight: 500;\r\n      margin-bottom: 16rpx;\r\n      display: block;\r\n    }\r\n    \r\n    .upload-area {\r\n      position: relative;\r\n      width: 100%;\r\n      height: 240rpx;\r\n      border-radius: 12rpx;\r\n      overflow: hidden;\r\n      \r\n      .uploaded-image {\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 12rpx;\r\n      }\r\n      \r\n      .upload-placeholder {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #f9fafb;\r\n        border: 2rpx dashed #d1d5db;\r\n        border-radius: 12rpx;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        transition: all 0.3s;\r\n        \r\n        &.uploading {\r\n          background-color: #eff6ff;\r\n          border-color: #3b82f6;\r\n          \r\n          .upload-icon,\r\n          .upload-text {\r\n            color: #3b82f6;\r\n          }\r\n        }\r\n        \r\n        .upload-icon {\r\n          font-size: 48rpx;\r\n          color: #9ca3af;\r\n          margin-bottom: 8rpx;\r\n        }\r\n        \r\n        .upload-text {\r\n          font-size: 24rpx;\r\n          color: #9ca3af;\r\n        }\r\n      }\r\n      \r\n      .delete-btn {\r\n        position: absolute;\r\n        top: -8rpx;\r\n        right: -8rpx;\r\n        width: 48rpx;\r\n        height: 48rpx;\r\n        background-color: rgba(0, 0, 0, 0.6);\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        z-index: 10;\r\n        \r\n        text {\r\n          font-size: 28rpx;\r\n          color: #ffffff;\r\n          line-height: 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.notice-section {\r\n  background-color: #f0f9ff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-bottom: 48rpx;\r\n  border-left: 4rpx solid #0ea5e9;\r\n  \r\n  .notice-title {\r\n    font-size: 28rpx;\r\n    color: #0369a1;\r\n    font-weight: 500;\r\n    margin-bottom: 16rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .notice-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8rpx;\r\n    \r\n    .notice-item {\r\n      font-size: 26rpx;\r\n      color: #0369a1;\r\n      line-height: 1.5;\r\n    }\r\n  }\r\n}\r\n\r\n// æäº¤æŒ‰é’®\r\n.submit-btn {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  height: 96rpx;\r\n  border-radius: 48rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.4);\r\n  transition: all 0.3s;\r\n  \r\n  &:active {\r\n    transform: scale(0.98);\r\n  }\r\n  \r\n  &.disabled {\r\n    background: #9ca3af;\r\n    opacity: 0.6;\r\n    pointer-events: none;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  text {\r\n    font-size: 32rpx;\r\n    color: #ffffff;\r\n    font-weight: 500;\r\n  }\r\n}\r\n</style> -->\r\n\r\n<template>\r\n  <view class=\"verification-page\">\r\n    <!-- å·²è®¤è¯çŠ¶æ€ -->\r\n    <view class=\"verified-status\" v-if=\"isVerified\">\r\n      <view class=\"status-icon\">âœ…</view>\r\n      <text class=\"status-title\">æ ¡å›­è®¤è¯å·²é€šè¿‡</text>\r\n      <text class=\"status-desc\">æ‚¨å·²å®Œæˆæ ¡å›­èº«ä»½è®¤è¯ï¼Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½</text>\r\n      \r\n      <!-- ç¡®è®¤æŒ‰é’® -->\r\n      <view class=\"retry-btn\" @click=\"confirmAndBack\">\r\n        <text>ç¡®è®¤</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- è®¤è¯è¡¨å• -->\r\n    <view class=\"verification-form\" v-else>\r\n      <view class=\"form-header\">\r\n        <text class=\"header-icon\">ğŸ“</text>\r\n        <text class=\"header-title\">æ ¡å›­èº«ä»½è®¤è¯</text>\r\n        <text class=\"header-desc\">è¯·å¡«å†™çœŸå®ä¿¡æ¯å®Œæˆèº«ä»½è®¤è¯</text>\r\n      </view>\r\n      \r\n      <view class=\"form-section\">\r\n        <!-- å§“åè¾“å…¥ -->\r\n        <view class=\"form-item\">\r\n          <view class=\"item-label\">\r\n            <text>å§“å</text>\r\n            <text class=\"required\">*</text>\r\n          </view>\r\n          <input \r\n            class=\"item-input\"\r\n            v-model=\"formData.name\"\r\n            placeholder=\"è¯·è¾“å…¥çœŸå®å§“å\"\r\n            placeholder-class=\"input-placeholder\"\r\n            maxlength=\"10\"\r\n          />\r\n          <text class=\"error-tip\" v-if=\"errors.name\">{{ errors.name }}</text>\r\n        </view>\r\n        \r\n        <!-- å­¦å·è¾“å…¥ -->\r\n        <view class=\"form-item\">\r\n          <view class=\"item-label\">\r\n            <text>å­¦å·</text>\r\n            <text class=\"required\">*</text>\r\n          </view>\r\n          <input \r\n            class=\"item-input\"\r\n            v-model=\"formData.studentId\"\r\n            placeholder=\"è¯·è¾“å…¥11ä½å­¦å·\"\r\n            placeholder-class=\"input-placeholder\"\r\n            type=\"number\"\r\n            maxlength=\"11\"\r\n          />\r\n          <text class=\"hint-tip\">å­¦å·ä¸º11ä½æ•°å­—</text>\r\n          <text class=\"error-tip\" v-if=\"errors.studentId\">{{ errors.studentId }}</text>\r\n        </view>\r\n        \r\n        <!-- ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹© -->\r\n        <view class=\"form-item\">\r\n          <view class=\"item-label\">\r\n            <text>å­¦é™¢</text>\r\n            <text class=\"required\">*</text>\r\n          </view>\r\n          <picker \r\n            mode=\"selector\" \r\n            :range=\"allDepartments\" \r\n            :value=\"departmentIndex\"\r\n            @change=\"onDepartmentChange\"\r\n          >\r\n            <view class=\"picker-input\" :class=\"{ 'has-value': formData.department }\">\r\n              <text class=\"picker-text\">{{ formData.department || 'è¯·é€‰æ‹©å­¦é™¢' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <text class=\"error-tip\" v-if=\"errors.department\">{{ errors.department }}</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- æ³¨æ„äº‹é¡¹ -->\r\n      <view class=\"notice-section\">\r\n        <view class=\"notice-title\">ğŸ“Œ æ³¨æ„äº‹é¡¹</view>\r\n        <view class=\"notice-item\">\r\n          <text>â€¢ è¯·ç¡®ä¿å¡«å†™çš„å§“åã€å­¦å·å’Œå­¦é™¢ä¿¡æ¯çœŸå®æœ‰æ•ˆ</text>\r\n        </view>\r\n        <view class=\"notice-item\">\r\n          <text>â€¢ å­¦é™¢ä¿¡æ¯è¯·è°¨æ…å¡«å†™ï¼Œå¡«å†™åæ— æ³•ä¿®æ”¹</text>\r\n        </view>\r\n        <view class=\"notice-item\">\r\n          <text>â€¢ è®¤è¯é€šè¿‡åå¯äº«å—æ‰€æœ‰åŠŸèƒ½</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- æäº¤æŒ‰é’® -->\r\n      <button \r\n        class=\"submit-btn\"\r\n        :class=\"{ 'submitting': isSubmitting }\"\r\n        @click=\"submitVerification\"\r\n        :disabled=\"isSubmitting\"\r\n      >\r\n        <text>{{ isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤è®¤è¯' }}</text>\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n  data() {\r\n    return {\r\n      isVerified: false,\r\n      verificationData: {\r\n        name: '',\r\n        studentId: '',\r\n        department: '',  // ğŸ”¥ æ–°å¢\r\n        verifyTime: ''\r\n      },\r\n      formData: {\r\n        name: '',\r\n        studentId: '',\r\n        department: ''  // ğŸ”¥ æ–°å¢\r\n      },\r\n      errors: {\r\n        name: '',\r\n        studentId: '',\r\n        department: ''  // ğŸ”¥ æ–°å¢\r\n      },\r\n      isSubmitting: false,\r\n      \r\n      // ğŸ”¥ æ–°å¢ï¼šå­¦é™¢åˆ—è¡¨\r\n      allDepartments: [\r\n        'ä¸­å›½è¯­è¨€æ–‡å­¦ç³»',\r\n        'å›½é™…æ±‰è¯­æ–‡åŒ–å­¦é™¢',\r\n        'å¤–è¯­å­¦é™¢',\r\n        'ç»æµä¸ç®¡ç†å­¦é™¢',\r\n        'äºšæ¬§å•†å­¦é™¢',\r\n        'å…¬å…±ç®¡ç†å­¦é™¢',\r\n        'ç»Ÿè®¡å­¦é™¢',\r\n        'ä¼ æ’­å­¦é™¢',\r\n        'å†å²å­¦ç³»',\r\n        'å“²å­¦ç³»',\r\n        'æ”¿æ²»ä¸å›½é™…å…³ç³»å­¦é™¢',\r\n        'é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢',\r\n        'æ³•å­¦é™¢',\r\n        'ç¤¾ä¼šå‘å±•å­¦é™¢',\r\n        'æ•™è‚²å­¦éƒ¨',\r\n        'å¿ƒç†ä¸è®¤çŸ¥ç§‘å­¦å­¦é™¢',\r\n        'æ•°å­¦ç§‘å­¦å­¦é™¢',\r\n        'ç‰©ç†ä¸ç”µå­ç§‘å­¦å­¦é™¢',\r\n        'é€šä¿¡ä¸ç”µå­å·¥ç¨‹å­¦é™¢',\r\n        'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢',\r\n        'è½¯ä»¶å·¥ç¨‹å­¦é™¢',\r\n        'æ•°æ®ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢',\r\n        'åŒ–å­¦ä¸åˆ†å­å·¥ç¨‹å­¦é™¢',\r\n        'ç”Ÿå‘½ç§‘å­¦å­¦é™¢',\r\n        'åœ°ç†ç§‘å­¦å­¦é™¢',\r\n        'ç”Ÿæ€ä¸ç¯å¢ƒç§‘å­¦å­¦é™¢',\r\n        'ç©ºé—´äººå·¥æ™ºèƒ½å­¦é™¢',\r\n        'ç¾æœ¯å­¦é™¢',\r\n        'è®¾è®¡å­¦é™¢',\r\n        'éŸ³ä¹å­¦é™¢',\r\n        'ä½“è‚²ä¸å¥åº·å­¦é™¢'\r\n      ],\r\n      departmentIndex: -1  // ğŸ”¥ æ–°å¢ï¼šå½“å‰é€‰ä¸­çš„å­¦é™¢ç´¢å¼•\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    // this.checkVerificationStatus()\r\n  },\r\n  \r\n  computed: {\r\n\t  ...mapState('m_user', ['token', 'code', 'userBase', 'openid', 'userMajor']),\r\n  },\r\n  \r\n  methods: {\r\n    // ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹©å˜åŒ–\r\n    onDepartmentChange(e) {\r\n      const index = e.detail.value\r\n      this.departmentIndex = index\r\n      this.formData.department = this.allDepartments[index]\r\n      this.errors.department = ''  // æ¸…é™¤é”™è¯¯æç¤º\r\n    },\r\n    \r\n    \r\n    // ğŸ”¥ ä¿®æ”¹ï¼šè¡¨å•éªŒè¯ - å¢åŠ å­¦é™¢éªŒè¯\r\n    validateForm() {\r\n      let isValid = true\r\n      this.errors = {\r\n        name: '',\r\n        studentId: '',\r\n        department: ''\r\n      }\r\n      \r\n      // éªŒè¯å§“å\r\n      if (!this.formData.name.trim()) {\r\n        this.errors.name = 'è¯·è¾“å…¥å§“å'\r\n        isValid = false\r\n      } else if (this.formData.name.trim().length < 2) {\r\n        this.errors.name = 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦'\r\n        isValid = false\r\n      }\r\n      \r\n      // éªŒè¯å­¦å·\r\n      if (!this.formData.studentId) {\r\n        this.errors.studentId = 'è¯·è¾“å…¥å­¦å·'\r\n        isValid = false\r\n      } else if (!/^\\d{11}$/.test(this.formData.studentId)) {\r\n        this.errors.studentId = 'å­¦å·å¿…é¡»ä¸º11ä½æ•°å­—'\r\n        isValid = false\r\n      }\r\n      \r\n      // ğŸ”¥ æ–°å¢ï¼šéªŒè¯å­¦é™¢\r\n      if (!this.formData.department) {\r\n        this.errors.department = 'è¯·é€‰æ‹©å­¦é™¢'\r\n        isValid = false\r\n      }\r\n      \r\n      return isValid\r\n    },\r\n    \r\n    // ğŸ”¥ ä¿®æ”¹ï¼šæäº¤è®¤è¯ - åŒ…å«å­¦é™¢ä¿¡æ¯\r\n    async submitVerification() {\r\n      if (this.isSubmitting) return\r\n      \r\n      // è¡¨å•éªŒè¯\r\n      if (!this.validateForm()) {\r\n        const firstError = this.errors.name || this.errors.studentId || this.errors.department\r\n        uni.showToast({\r\n          title: firstError,\r\n          icon: 'none',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.isSubmitting = true\r\n      \r\n      uni.showLoading({\r\n        title: 'è®¤è¯ä¸­...',\r\n        mask: true\r\n      })\r\n      \r\n      try {\r\n        // âœ… ä¼ é€’å®Œæ•´çš„è®¤è¯ä¿¡æ¯ï¼ˆåŒ…æ‹¬å­¦é™¢ï¼‰\r\n        const { data: res } = await uni.$http.post('/verification/nano_submit', {\r\n          openid: this.openid,\r\n          // name: this.formData.name.trim(),           // å§“å\r\n          // studentId: this.formData.studentId,        // å­¦å·\r\n          department: this.formData.department       // å­¦é™¢ï¼ˆé€šè¿‡ departmentIndex é€‰æ‹©ï¼‰\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.mata.status === 200) {\r\n          // ä¿å­˜è®¤è¯ä¿¡æ¯\r\n          this.verificationData = {\r\n            name: this.formData.name,\r\n            studentId: this.formData.studentId,\r\n            department: this.formData.department,\r\n            verifyTime: this.formatCurrentTime()\r\n          }\r\n          \r\n          uni.showToast({\r\n            title: 'è®¤è¯æˆåŠŸ',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          \r\n          // æ›´æ–°çŠ¶æ€\r\n          this.isVerified = true\r\n          \r\n          // æ¸…ç©ºè¡¨å•\r\n          this.formData = {\r\n            name: '',\r\n            studentId: '',\r\n            department: ''\r\n          }\r\n          this.departmentIndex = -1\r\n          \r\n        } else {\r\n          uni.showToast({\r\n            title: res.mata.msg || 'è®¤è¯å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n        \r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('è®¤è¯å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.isSubmitting = false\r\n      }\r\n    },\r\n\r\n    \r\n    // ç¡®è®¤å¹¶è¿”å›ä¸Šä¸€é¡µ\r\n    confirmAndBack() {\r\n      uni.navigateBack({\r\n        delta: 1\r\n      })\r\n    },\r\n    \r\n    // æ ¼å¼åŒ–å½“å‰æ—¶é—´\r\n    formatCurrentTime() {\r\n      const date = new Date()\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.verification-page {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.verified-status {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 120rpx 40rpx;\r\n  text-align: center;\r\n  \r\n  .status-icon {\r\n    font-size: 120rpx;\r\n    margin-bottom: 32rpx;\r\n  }\r\n  \r\n  .status-title {\r\n    font-size: 36rpx;\r\n    color: #333333;\r\n    font-weight: 600;\r\n    margin-bottom: 16rpx;\r\n  }\r\n  \r\n  .status-desc {\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n    margin-bottom: 32rpx;\r\n  }\r\n}\r\n\r\n.verified-info {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-top: 32rpx;\r\n  width: 100%;\r\n  max-width: 600rpx;\r\n  box-sizing: border-box;\r\n  \r\n  .info-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 16rpx 0;\r\n    border-bottom: 1rpx solid #f0f0f0;\r\n    \r\n    &:last-child {\r\n      border-bottom: none;\r\n    }\r\n    \r\n    .label {\r\n      font-size: 28rpx;\r\n      color: #999999;\r\n    }\r\n    \r\n    .value {\r\n      font-size: 28rpx;\r\n      color: #333333;\r\n      font-weight: 500;\r\n    }\r\n  }\r\n}\r\n\r\n.retry-btn {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #ffffff;\r\n  padding: 24rpx 48rpx;\r\n  border-radius: 32rpx;\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  margin-top: 48rpx;\r\n  transition: all 0.3s;\r\n  \r\n  &:active {\r\n    opacity: 0.8;\r\n    transform: scale(0.98);\r\n  }\r\n}\r\n\r\n.verification-form {\r\n  padding: 32rpx;\r\n}\r\n\r\n.form-header {\r\n  text-align: center;\r\n  margin-bottom: 48rpx;\r\n  \r\n  .header-icon {\r\n    font-size: 120rpx;\r\n    margin-bottom: 24rpx;\r\n  }\r\n  \r\n  .header-title {\r\n    font-size: 36rpx;\r\n    color: #333333;\r\n    font-weight: 600;\r\n    margin-bottom: 12rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .header-desc {\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.5;\r\n  }\r\n}\r\n\r\n.form-section {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 32rpx;\r\n  \r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n  \r\n  .item-label {\r\n    font-size: 28rpx;\r\n    color: #333333;\r\n    font-weight: 500;\r\n    margin-bottom: 16rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    .required {\r\n      color: #ef4444;\r\n      margin-left: 4rpx;\r\n    }\r\n  }\r\n  \r\n  .item-input {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    background-color: #f9fafb;\r\n    border: 2rpx solid #e5e7eb;\r\n    border-radius: 12rpx;\r\n    padding: 0 24rpx;\r\n    font-size: 28rpx;\r\n    color: #333333;\r\n    box-sizing: border-box;\r\n    transition: all 0.3s;\r\n    \r\n    &:focus {\r\n      background-color: #ffffff;\r\n      border-color: #667eea;\r\n    }\r\n  }\r\n  \r\n  .input-placeholder {\r\n    color: #9ca3af;\r\n  }\r\n  \r\n  /* ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹©å™¨æ ·å¼ */\r\n  .picker-input {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    background-color: #f9fafb;\r\n    border: 2rpx solid #e5e7eb;\r\n    border-radius: 12rpx;\r\n    padding: 0 24rpx;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    transition: all 0.3s;\r\n    \r\n    .picker-text {\r\n      font-size: 28rpx;\r\n      color: #9ca3af;\r\n      flex: 1;\r\n    }\r\n    \r\n    &.has-value .picker-text {\r\n      color: #333333;\r\n    }\r\n    \r\n    .picker-arrow {\r\n      font-size: 24rpx;\r\n      color: #9ca3af;\r\n      margin-left: 12rpx;\r\n    }\r\n  }\r\n  \r\n  .hint-tip {\r\n    font-size: 24rpx;\r\n    color: #6b7280;\r\n    margin-top: 8rpx;\r\n    display: block;\r\n  }\r\n  \r\n  .error-tip {\r\n    font-size: 24rpx;\r\n    color: #ef4444;\r\n    margin-top: 8rpx;\r\n    display: block;\r\n  }\r\n}\r\n\r\n.notice-section {\r\n  background-color: #f0f9ff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  margin-bottom: 48rpx;\r\n  border-left: 4rpx solid #3b82f6;\r\n  \r\n  .notice-title {\r\n    font-size: 28rpx;\r\n    color: #1e40af;\r\n    font-weight: 600;\r\n    margin-bottom: 16rpx;\r\n  }\r\n  \r\n  .notice-item {\r\n    font-size: 24rpx;\r\n    color: #475569;\r\n    line-height: 1.8;\r\n    margin-bottom: 8rpx;\r\n    \r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 96rpx;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #ffffff;\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  border-radius: 16rpx;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.4);\r\n  \r\n  &:active {\r\n    transform: translateY(2rpx);\r\n    box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);\r\n  }\r\n  \r\n  &.submitting {\r\n    opacity: 0.7;\r\n    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);\r\n  }\r\n  \r\n  &::after {\r\n    border: none;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./verification.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./verification.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1763135844368\n      var cssReload = require(\"D:/Program/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}