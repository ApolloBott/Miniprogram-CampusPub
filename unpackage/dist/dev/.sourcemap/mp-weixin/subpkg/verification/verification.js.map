{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?589a","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?e595","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?0e15","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?31a8","uni-app:///subpkg/verification/verification.vue","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?1182","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/verification/verification.vue?9dd9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isVerified","verificationData","name","studentId","department","verifyTime","formData","errors","isSubmitting","allDepartments","departmentIndex","onLoad","computed","methods","onDepartmentChange","validateForm","isValid","submitVerification","firstError","uni","title","icon","duration","mask","openid","res","console","confirmAndBack","delta","formatCurrentTime"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAujB,CAAgB,okBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACk+B3kB;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;QACAC;QAAA;QACAC;MACA;MACAC;QACAJ;QACAC;QACAC;MACA;;MACAG;QACAL;QACAC;QACAC;MACA;;MACAI;MAEA;MACAC,iBACA,WACA,YACA,QACA,WACA,SACA,UACA,QACA,QACA,QACA,OACA,aACA,WACA,OACA,UACA,QACA,aACA,UACA,aACA,aACA,cACA,UACA,aACA,aACA,UACA,UACA,aACA,YACA,QACA,QACA,QACA,UACA;MACAC;IACA;EACA;EAEAC;IACA;EAAA,CACA;EAEAC,4BACA,oFACA;EAEAC;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IAGA;IACAC;MACA;MACA;QACAb;QACAC;QACAC;MACA;;MAEA;MACA;QACA;QACAY;MACA;QACA;QACAA;MACA;;MAEA;MACA;QACA;QACAA;MACA;QACA;QACAA;MACA;;MAEA;MACA;QACA;QACAA;MACA;MAEA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAC;gBACAC;kBACAC;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBAEAH;kBACAC;kBACAG;gBACA;gBAAA;gBAAA;gBAAA,OAIAJ;kBACAK;kBACA;kBACA;kBACApB;gBACA;cAAA;gBAAA;gBALAqB;gBAOAN;gBAEA;kBACA;kBACA;oBACAjB;oBACAC;oBACAC;oBACAC;kBACA;kBAEAc;oBACAC;oBACAC;oBACAC;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;oBACApB;oBACAC;oBACAC;kBACA;kBACA;gBAEA;kBACAe;oBACAC;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAF;gBACAO;gBACAP;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAGA;IACAM;MACAR;QACAS;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjrCA;AAAA;AAAA;AAAA;AAA0jC,CAAgB,2gCAAG,EAAC,C;;;;;;;;;;;ACA9kC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpkg/verification/verification.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/verification/verification.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./verification.vue?vue&type=template&id=43883b4c&\"\nvar renderjs\nimport script from \"./verification.vue?vue&type=script&lang=js&\"\nexport * from \"./verification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./verification.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/verification/verification.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./verification.vue?vue&type=template&id=43883b4c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./verification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./verification.vue?vue&type=script&lang=js&\"","<!-- \n<template>\n  <view class=\"verification-page\">\n    <view class=\"verified-status\" v-if=\"verificationInfo && verificationInfo.status === 1\">\n      <view class=\"status-icon\">âœ…</view>\n      <text class=\"status-title\">æ ¡å›­è®¤è¯å·²é€šè¿‡</text>\n      <text class=\"status-desc\">æ‚¨å·²å®Œæˆæ ¡å›­èº«ä»½è®¤è¯ï¼Œäº«å—ä¸“å±æƒç›Š</text>\n      <view class=\"verified-info\">\n        <view class=\"info-item\">\n          <text class=\"label\">è®¤è¯æ—¶é—´ï¼š</text>\n          <text class=\"value\">{{ formatTime(verificationInfo.review_time) }}</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">è®¤è¯çŠ¶æ€ï¼š</text>\n          <text class=\"value verified\">å·²è®¤è¯ç”¨æˆ·</text>\n        </view>\n      </view>\n    </view>\n    \n    \n    <view class=\"pending-status\" v-else-if=\"verificationInfo && verificationInfo.status === 0\">\n      <view class=\"status-icon\">â³</view>\n      <text class=\"status-title\">è®¤è¯å®¡æ ¸ä¸­</text>\n      <text class=\"status-desc\">æ‚¨çš„è®¤è¯ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­ï¼Œé€šå¸¸1-3ä¸ªå·¥ä½œæ—¥å†…å®Œæˆ</text>\n      <text class=\"submit-time\">æäº¤æ—¶é—´ï¼š{{ formatTime(verificationInfo.submit_time) }}</text>\n    </view>\n\n    <view class=\"failed-status\" v-else-if=\"verificationInfo && verificationInfo.status === 2\">\n      <view class=\"status-icon\">âŒ</view>\n      <text class=\"status-title\">è®¤è¯æœªé€šè¿‡</text>\n      <text class=\"status-desc\">å¾ˆé—æ†¾ï¼Œæ‚¨çš„è®¤è¯ç”³è¯·æœªé€šè¿‡å®¡æ ¸</text>\n      <view class=\"fail-reason\" v-if=\"verificationInfo.admin_remark\">\n        <text class=\"reason-title\">æœªé€šè¿‡åŸå› ï¼š</text>\n        <text class=\"reason-text\">{{ verificationInfo.admin_remark }}</text>\n      </view>\n      \n\n      <view class=\"time-limit\" v-if=\"!canRetry\">\n        <text class=\"limit-title\">â° é‡æ–°ç”³è¯·é™åˆ¶</text>\n        <text class=\"limit-desc\">ä¸ºé¿å…é¢‘ç¹ç”³è¯·ï¼Œè¯·åœ¨ {{ remainingTime }} åé‡æ–°æäº¤è®¤è¯</text>\n      </view>\n      \n      <view class=\"retry-btn\" @click=\"startVerification\" :class=\"{ 'disabled': !canRetry }\">\n        <text>{{ canRetry ? 'é‡æ–°è®¤è¯' : `${remainingTime}åå¯é‡è¯•` }}</text>\n      </view>\n    </view>\n    \n\n    <view class=\"verification-form\" v-else>\n      <view class=\"form-header\">\n        <view class=\"header-icon\">ğŸ“</view>\n        <text class=\"header-title\">æ ¡å›­èº«ä»½è®¤è¯</text>\n        <text class=\"header-desc\">ä¸Šä¼ æ ¡å›­å¡æ­£åé¢å®Œæˆèº«ä»½è®¤è¯</text>\n      </view>\n\n      <view class=\"guide-section\">\n        <text class=\"section-title\">ğŸ“· æ‹ç…§æŒ‡å¯¼</text>\n        <text class=\"section-desc\">è¯·æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹æ‹æ‘„æ‚¨çš„æ ¡å›­å¡æ­£åé¢</text>\n        \n        <view class=\"guide-images\">\n          <view class=\"guide-item\">\n            <image \n              class=\"guide-image\" \n              src=\"https://wait00.oss-cn-shanghai.aliyuncs.com/guide/campus-card-front.jpg\"\n              mode=\"aspectFit\"\n            ></image>\n            <text class=\"guide-label\">æ ¡å›­å¡æ­£é¢ç¤ºä¾‹</text>\n            <text class=\"guide-tip\">ç¡®ä¿å§“åã€ç…§ç‰‡ã€å­¦å·æ¸…æ™°å¯è§</text>\n          </view>\n          <view class=\"guide-item\">\n            <image \n              class=\"guide-image\" \n              src=\"https://wait00.oss-cn-shanghai.aliyuncs.com/guide/campus-card-back.jpg\" \n              mode=\"aspectFit\"\n            ></image>\n            <text class=\"guide-label\">æ ¡å›­å¡èƒŒé¢ç¤ºä¾‹</text>\n            <text class=\"guide-tip\">ç¡®ä¿å­¦æ ¡åç§°ã€æœ‰æ•ˆæœŸæ¸…æ™°å¯è§</text>\n          </view>\n        </view>\n        \n\n        <view class=\"photo-requirements\">\n          <text class=\"req-title\">æ‹ç…§è¦æ±‚ï¼š</text>\n          <view class=\"req-list\">\n            <text class=\"req-item\">â€¢ å…‰çº¿å……è¶³ï¼Œé¿å…åå…‰</text>\n            <text class=\"req-item\">â€¢ å¡ç‰‡å¹³æ•´ï¼Œä¿¡æ¯æ¸…æ™°</text>\n            <text class=\"req-item\">â€¢ é¿å…é®æŒ¡é‡è¦ä¿¡æ¯</text>\n            <text class=\"req-item\">â€¢ å»ºè®®ä½¿ç”¨æ·±è‰²èƒŒæ™¯</text>\n          </view>\n        </view>\n      </view>\n      \n      <view class=\"form-section\">\n        <text class=\"section-title\">ğŸ“‹ ä¸Šä¼ æ ¡å›­å¡</text>\n        <text class=\"section-desc\">è¯·ä¸Šä¼ æ ¡å›­å¡æ­£åé¢ç…§ç‰‡ï¼ˆå¿…é¡»ä¸Šä¼ 2å¼ ï¼‰</text>\n        \n        <view class=\"image-upload\">\n          <view class=\"upload-grid\">\n\n            <view class=\"upload-item\">\n              <text class=\"upload-label\">æ ¡å›­å¡æ­£é¢ *</text>\n              <view class=\"upload-area\" @click=\"chooseImage('front')\">\n                <image \n                  v-if=\"frontImage\" \n                  class=\"uploaded-image\" \n                  :src=\"frontImage\" \n                  mode=\"aspectFill\"\n                ></image>\n                <view v-else class=\"upload-placeholder\" :class=\"{ 'uploading': uploading === 'front' }\">\n                  <text class=\"upload-icon\">{{ uploading === 'front' ? 'â³' : 'ğŸ“·' }}</text>\n                  <text class=\"upload-text\">{{ uploading === 'front' ? 'ä¸Šä¼ ä¸­...' : 'ç‚¹å‡»ä¸Šä¼ æ­£é¢' }}</text>\n                </view>\n                <view v-if=\"frontImage\" class=\"delete-btn\" @click.stop=\"deleteImage('front')\">\n                  <text>Ã—</text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"upload-item\">\n              <text class=\"upload-label\">æ ¡å›­å¡èƒŒé¢ *</text>\n              <view class=\"upload-area\" @click=\"chooseImage('back')\">\n                <image \n                  v-if=\"backImage\" \n                  class=\"uploaded-image\" \n                  :src=\"backImage\" \n                  mode=\"aspectFill\"\n                ></image>\n                <view v-else class=\"upload-placeholder\" :class=\"{ 'uploading': uploading === 'back' }\">\n                  <text class=\"upload-icon\">{{ uploading === 'back' ? 'â³' : 'ğŸ“·' }}</text>\n                  <text class=\"upload-text\">{{ uploading === 'back' ? 'ä¸Šä¼ ä¸­...' : 'ç‚¹å‡»ä¸Šä¼ èƒŒé¢' }}</text>\n                </view>\n                <view v-if=\"backImage\" class=\"delete-btn\" @click.stop=\"deleteImage('back')\">\n                  <text>Ã—</text>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <view class=\"notice-section\">\n        <text class=\"notice-title\">ğŸ“‹ è®¤è¯é¡»çŸ¥</text>\n        <view class=\"notice-list\">\n          <text class=\"notice-item\">â€¢ ä»…æ”¯æŒæœ¬æ ¡åœ¨è¯»å­¦ç”Ÿè®¤è¯</text>\n          <text class=\"notice-item\">â€¢ è¯·ç¡®ä¿ç…§ç‰‡çœŸå®æœ‰æ•ˆ</text>\n          <text class=\"notice-item\">â€¢ è®¤è¯ä¿¡æ¯ä»…ç”¨äºèº«ä»½éªŒè¯</text>\n          <text class=\"notice-item\">â€¢ å®¡æ ¸æ—¶é—´ï¼š1-3ä¸ªå·¥ä½œæ—¥</text>\n          <text class=\"notice-item\">â€¢ è®¤è¯å¤±è´¥å24å°æ—¶å†…ä¸å¯é‡æ–°ç”³è¯·</text>\n        </view>\n      </view>\n      \n      <view class=\"submit-btn\" @click=\"submitVerification\" :class=\"{ 'disabled': isSubmitting || !canSubmit }\">\n        <text>{{ isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤è®¤è¯' }}</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      verificationInfo: null, // è®¤è¯ä¿¡æ¯\n      frontImage: '', // æ­£é¢å›¾ç‰‡URL\n      backImage: '', // èƒŒé¢å›¾ç‰‡URL\n      frontImageUrl: '', // æ­£é¢äº‘ç«¯URL\n      backImageUrl: '', // èƒŒé¢äº‘ç«¯URL\n      uploading: '', // å½“å‰ä¸Šä¼ çŠ¶æ€ 'front' | 'back' | ''\n      isSubmitting: false,\n    }\n  },\n  \n  computed: {\n    ...mapState('m_user', ['openid', 'userBase']),\n    \n    // ğŸ”§ æ–°å¢ï¼šæ˜¯å¦å¯ä»¥æäº¤\n    canSubmit() {\n      return this.frontImageUrl && this.backImageUrl && !this.uploading && !this.isSubmitting\n    },\n    \n    // ğŸ”§ æ–°å¢ï¼šæ˜¯å¦å¯ä»¥é‡è¯•ï¼ˆ24å°æ—¶é™åˆ¶ï¼‰\n    canRetry() {\n      if (!this.verificationInfo || this.verificationInfo.status !== 2) {\n        return true\n      }\n      \n      const reviewTime = new Date(this.verificationInfo.review_time).getTime()\n      const now = new Date().getTime()\n      const hoursPassed = (now - reviewTime) / (1000 * 60 * 60)\n      \n      return hoursPassed >= 24\n    },\n    \n    // ğŸ”§ æ–°å¢ï¼šå‰©ä½™ç­‰å¾…æ—¶é—´\n    remainingTime() {\n      if (!this.verificationInfo || this.verificationInfo.status !== 2) {\n        return ''\n      }\n      \n      const reviewTime = new Date(this.verificationInfo.review_time).getTime()\n      const now = new Date().getTime()\n      const hoursRemaining = 24 - (now - reviewTime) / (1000 * 60 * 60)\n      \n      if (hoursRemaining <= 0) return ''\n      \n      const hours = Math.floor(hoursRemaining)\n      const minutes = Math.floor((hoursRemaining - hours) * 60)\n      \n      if (hours > 0) {\n        return `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`\n      } else {\n        return `${minutes}åˆ†é’Ÿ`\n      }\n    }\n  },\n  \n  onLoad() {\n    this.loadVerificationInfo()\n    \n    // ğŸ”§ æ–°å¢ï¼šå®šæ—¶æ›´æ–°å‰©ä½™æ—¶é—´\n    this.timer = setInterval(() => {\n      if (this.verificationInfo && this.verificationInfo.status === 2 && !this.canRetry) {\n        this.$forceUpdate()\n      }\n    }, 60000) // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡\n  },\n  \n  onUnload() {\n    // æ¸…é™¤å®šæ—¶å™¨\n    if (this.timer) {\n      clearInterval(this.timer)\n    }\n  },\n  \n  methods: {\n    // åŠ è½½è®¤è¯ä¿¡æ¯\n    async loadVerificationInfo() {\n      try {\n        const { data: res } = await uni.$http.get('/verification/info', {\n          openid: this.openid\n        })\n        \n        if (res.meta.status === 200) {\n          this.verificationInfo = res.message\n          console.log('è®¤è¯ä¿¡æ¯:', this.verificationInfo)\n        }\n      } catch (error) {\n        console.error('åŠ è½½è®¤è¯ä¿¡æ¯å¤±è´¥:', error)\n      }\n    },\n    \n    // å¼€å§‹è®¤è¯ï¼ˆé‡æ–°è®¤è¯ï¼‰\n    startVerification() {\n      if (!this.canRetry) {\n        uni.showToast({\n          title: 'è¯·ç¨åå†è¯•',\n          icon: 'none'\n        })\n        return\n      }\n      \n      this.verificationInfo = null\n      this.frontImage = ''\n      this.backImage = ''\n      this.frontImageUrl = ''\n      this.backImageUrl = ''\n    },\n    \n    // ğŸ”§ ä¿®æ”¹ï¼šé€‰æ‹©å›¾ç‰‡ï¼ˆåŒºåˆ†æ­£åé¢ï¼‰\n    chooseImage(type) {\n      if (this.uploading) {\n        uni.showToast({\n          title: 'æ­£åœ¨ä¸Šä¼ ä¸­ï¼Œè¯·ç¨å€™',\n          icon: 'none'\n        })\n        return\n      }\n      \n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: async (res) => {\n          const tempFilePath = res.tempFilePaths[0]\n          \n          // å…ˆæ˜¾ç¤ºæœ¬åœ°å›¾ç‰‡\n          if (type === 'front') {\n            this.frontImage = tempFilePath\n          } else {\n            this.backImage = tempFilePath\n          }\n          \n          // ç«‹å³ä¸Šä¼ åˆ° OSS\n          await this.uploadImage(tempFilePath, type)\n        }\n      })\n    },\n    \n    // ğŸ”§ æ–°å¢ï¼šåˆ é™¤å›¾ç‰‡\n    deleteImage(type) {\n      if (type === 'front') {\n        this.frontImage = ''\n        this.frontImageUrl = ''\n      } else {\n        this.backImage = ''\n        this.backImageUrl = ''\n      }\n    },\n    \n    // ğŸ”§ ä¿®æ”¹ï¼šä¸Šä¼ å•å¼ å›¾ç‰‡\n    async uploadImage(filePath, type) {\n      this.uploading = type\n      \n      try {\n        // 1. è·å–ä¸Šä¼ å‡­è¯\n        const { data: tokenRes } = await uni.$http.get('/upload/token', {\n          openid: this.openid,\n          fileType: 'image'\n        })\n\n        if (tokenRes.meta.status !== 200) {\n          throw new Error('è·å–ä¸Šä¼ å‡­è¯å¤±è´¥')\n        }\n\n        // 2. è¯»å–æ–‡ä»¶\n        const fileContent = await new Promise((resolve, reject) => {\n          uni.getFileSystemManager().readFile({\n            filePath: filePath,\n            encoding: 'base64',\n            success: (res) => resolve(res.data),\n            fail: reject\n          })\n        })\n\n        // 3. ä¸Šä¼ åˆ° OSS\n        await new Promise((resolve, reject) => {\n          uni.request({\n            url: tokenRes.message.publicUrl,\n            method: 'PUT',\n            header: {\n              'Content-Type': 'image/jpeg'\n            },\n            data: uni.base64ToArrayBuffer(fileContent),\n            success: (res) => {\n              if (res.statusCode === 200) {\n                resolve(res)\n              } else {\n                reject(new Error(`ä¸Šä¼ å¤±è´¥: ${res.statusCode}`))\n              }\n            },\n            fail: reject\n          })\n        })\n\n        // 4. ä¿å­˜äº‘ç«¯ URL\n        if (type === 'front') {\n          this.frontImageUrl = tokenRes.message.publicUrl\n        } else {\n          this.backImageUrl = tokenRes.message.publicUrl\n        }\n\n        console.log(`${type === 'front' ? 'æ­£é¢' : 'èƒŒé¢'}ä¸Šä¼ æˆåŠŸ:`, tokenRes.message.publicUrl)\n\n        uni.showToast({\n          title: `${type === 'front' ? 'æ­£é¢' : 'èƒŒé¢'}ä¸Šä¼ æˆåŠŸ`,\n          icon: 'success',\n          duration: 1500\n        })\n\n      } catch (error) {\n        console.error('[ERROR] ä¸Šä¼ å¤±è´¥:', error)\n        uni.showToast({\n          title: error.message || 'ä¸Šä¼ å¤±è´¥',\n          icon: 'none',\n          duration: 3000\n        })\n        \n        // ä¸Šä¼ å¤±è´¥æ—¶ï¼Œæ¸…é™¤æœ¬åœ°å›¾ç‰‡\n        if (type === 'front') {\n          this.frontImage = ''\n        } else {\n          this.backImage = ''\n        }\n      } finally {\n        this.uploading = ''\n      }\n    },\n    \n    // ğŸ”§ ä¿®æ”¹ï¼šæäº¤è®¤è¯ç”³è¯·\n    async submitVerification() {\n      try {\n        if (!this.canSubmit) {\n          uni.showToast({\n            title: 'è¯·ä¸Šä¼ æ ¡å›­å¡æ­£åé¢ç…§ç‰‡',\n            icon: 'none'\n          })\n          return\n        }\n        \n        if (this.isSubmitting) return\n        \n        this.isSubmitting = true\n        \n        uni.showLoading({\n          title: 'æäº¤ä¸­...',\n          mask: true\n        })\n        \n        // ğŸ”§ ä¿®æ”¹ï¼šç®€åŒ–æäº¤æ•°æ®\n        const { data: res } = await uni.$http.post('/verification/submit', {\n          openid: this.openid,\n          nickname: this.userBase.nickname,\n          avatarUrl: this.userBase.avatarUrl,\n          verificationImages: [this.frontImageUrl, this.backImageUrl]\n        })\n        \n        uni.hideLoading()\n        \n        if (res.meta.status === 201) {\n          uni.showToast({\n            title: 'æäº¤æˆåŠŸï¼Œè¯·ç­‰å¾…å®¡æ ¸',\n            icon: 'success',\n            duration: 2000\n          })\n          \n          // é‡æ–°åŠ è½½è®¤è¯ä¿¡æ¯\n          setTimeout(() => {\n            this.loadVerificationInfo()\n          }, 1000)\n          \n        } else {\n          throw new Error(res.meta.msg || 'æäº¤å¤±è´¥')\n        }\n        \n      } catch (error) {\n        uni.hideLoading()\n        console.error('æäº¤è®¤è¯ç”³è¯·å¤±è´¥:', error)\n        uni.showToast({\n          title: error.message || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•',\n          icon: 'none'\n        })\n      } finally {\n        this.isSubmitting = false\n      }\n    },\n    \n    // æ ¼å¼åŒ–æ—¶é—´\n    formatTime(timestamp) {\n      if (!timestamp) return ''\n      const date = new Date(timestamp)\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.verification-page {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n// å·²è®¤è¯çŠ¶æ€\n.verified-status,\n.pending-status,\n.failed-status {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 40rpx;\n  text-align: center;\n  \n  .status-icon {\n    font-size: 120rpx;\n    margin-bottom: 32rpx;\n  }\n  \n  .status-title {\n    font-size: 36rpx;\n    color: #333333;\n    font-weight: 600;\n    margin-bottom: 16rpx;\n  }\n  \n  .status-desc {\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 1.5;\n    margin-bottom: 32rpx;\n  }\n}\n\n.verified-info {\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-top: 32rpx;\n  width: 100%;\n  box-sizing: border-box;\n  \n  .info-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16rpx 0;\n    border-bottom: 1rpx solid #f0f0f0;\n    \n    &:last-child {\n      border-bottom: none;\n    }\n    \n    .label {\n      font-size: 28rpx;\n      color: #999999;\n    }\n    \n    .value {\n      font-size: 28rpx;\n      color: #333333;\n      font-weight: 500;\n      \n      &.verified {\n        color: #10b981;\n        font-weight: 600;\n      }\n    }\n  }\n}\n\n.submit-time {\n  font-size: 26rpx;\n  color: #999999;\n}\n\n.fail-reason {\n  background-color: #fff5f5;\n  border: 1rpx solid #fecaca;\n  border-radius: 12rpx;\n  padding: 24rpx;\n  margin: 32rpx 0;\n  width: 100%;\n  box-sizing: border-box;\n  \n  .reason-title {\n    font-size: 26rpx;\n    color: #dc2626;\n    font-weight: 500;\n    display: block;\n    margin-bottom: 8rpx;\n  }\n  \n  .reason-text {\n    font-size: 26rpx;\n    color: #dc2626;\n    line-height: 1.5;\n  }\n}\n\n// ğŸ”§ æ–°å¢ï¼šæ—¶é—´é™åˆ¶æ ·å¼\n.time-limit {\n  background-color: #fef3c7;\n  border: 1rpx solid #f59e0b;\n  border-radius: 12rpx;\n  padding: 24rpx;\n  margin: 32rpx 0;\n  width: 100%;\n  box-sizing: border-box;\n  \n  .limit-title {\n    font-size: 26rpx;\n    color: #92400e;\n    font-weight: 500;\n    display: block;\n    margin-bottom: 8rpx;\n  }\n  \n  .limit-desc {\n    font-size: 26rpx;\n    color: #92400e;\n    line-height: 1.5;\n  }\n}\n\n.retry-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #ffffff;\n  padding: 24rpx 48rpx;\n  border-radius: 32rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n  margin-top: 32rpx;\n  transition: all 0.3s;\n  \n  &:active {\n    opacity: 0.8;\n  }\n  \n  &.disabled {\n    background: #9ca3af;\n    opacity: 0.6;\n  }\n}\n\n// è®¤è¯è¡¨å•\n.verification-form {\n  padding: 32rpx;\n}\n\n.form-header {\n  text-align: center;\n  margin-bottom: 48rpx;\n  \n  .header-icon {\n    font-size: 120rpx;\n    margin-bottom: 24rpx;\n  }\n  \n  .header-title {\n    font-size: 36rpx;\n    color: #333333;\n    font-weight: 600;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  .header-desc {\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 1.5;\n  }\n}\n\n// ğŸ”§ æ–°å¢ï¼šæ‹ç…§æŒ‡å¯¼æ ·å¼\n.guide-section {\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 24rpx;\n  \n  .section-title {\n    font-size: 32rpx;\n    color: #333333;\n    font-weight: 500;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .section-desc {\n    font-size: 26rpx;\n    color: #666666;\n    line-height: 1.5;\n    margin-bottom: 32rpx;\n    display: block;\n  }\n}\n\n.guide-images {\n  display: flex;\n  gap: 24rpx;\n  margin-bottom: 32rpx;\n  \n  .guide-item {\n    flex: 1;\n    text-align: center;\n    \n    .guide-image {\n      width: 100%;\n      height: 200rpx;\n      border-radius: 12rpx;\n      border: 2rpx solid #e5e7eb;\n      margin-bottom: 16rpx;\n    }\n    \n    .guide-label {\n      font-size: 28rpx;\n      color: #374151;\n      font-weight: 500;\n      display: block;\n      margin-bottom: 8rpx;\n    }\n    \n    .guide-tip {\n      font-size: 24rpx;\n      color: #6b7280;\n      line-height: 1.4;\n    }\n  }\n}\n\n.photo-requirements {\n  background-color: #f9fafb;\n  border-radius: 12rpx;\n  padding: 24rpx;\n  border-left: 4rpx solid #3b82f6;\n  \n  .req-title {\n    font-size: 28rpx;\n    color: #1f2937;\n    font-weight: 500;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  .req-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8rpx;\n    \n    .req-item {\n      font-size: 26rpx;\n      color: #4b5563;\n      line-height: 1.4;\n    }\n  }\n}\n\n.form-section {\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 24rpx;\n  \n  .section-title {\n    font-size: 32rpx;\n    color: #333333;\n    font-weight: 500;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .section-desc {\n    font-size: 26rpx;\n    color: #666666;\n    line-height: 1.5;\n    margin-bottom: 32rpx;\n    display: block;\n  }\n}\n\n// ğŸ”§ ä¿®æ”¹ï¼šå›¾ç‰‡ä¸Šä¼ æ ·å¼\n.image-upload {\n  .upload-grid {\n    display: flex;\n    gap: 24rpx;\n  }\n  \n  .upload-item {\n    flex: 1;\n    \n    .upload-label {\n      font-size: 28rpx;\n      color: #374151;\n      font-weight: 500;\n      margin-bottom: 16rpx;\n      display: block;\n    }\n    \n    .upload-area {\n      position: relative;\n      width: 100%;\n      height: 240rpx;\n      border-radius: 12rpx;\n      overflow: hidden;\n      \n      .uploaded-image {\n        width: 100%;\n        height: 100%;\n        border-radius: 12rpx;\n      }\n      \n      .upload-placeholder {\n        width: 100%;\n        height: 100%;\n        background-color: #f9fafb;\n        border: 2rpx dashed #d1d5db;\n        border-radius: 12rpx;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s;\n        \n        &.uploading {\n          background-color: #eff6ff;\n          border-color: #3b82f6;\n          \n          .upload-icon,\n          .upload-text {\n            color: #3b82f6;\n          }\n        }\n        \n        .upload-icon {\n          font-size: 48rpx;\n          color: #9ca3af;\n          margin-bottom: 8rpx;\n        }\n        \n        .upload-text {\n          font-size: 24rpx;\n          color: #9ca3af;\n        }\n      }\n      \n      .delete-btn {\n        position: absolute;\n        top: -8rpx;\n        right: -8rpx;\n        width: 48rpx;\n        height: 48rpx;\n        background-color: rgba(0, 0, 0, 0.6);\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10;\n        \n        text {\n          font-size: 28rpx;\n          color: #ffffff;\n          line-height: 1;\n        }\n      }\n    }\n  }\n}\n\n.notice-section {\n  background-color: #f0f9ff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 48rpx;\n  border-left: 4rpx solid #0ea5e9;\n  \n  .notice-title {\n    font-size: 28rpx;\n    color: #0369a1;\n    font-weight: 500;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .notice-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8rpx;\n    \n    .notice-item {\n      font-size: 26rpx;\n      color: #0369a1;\n      line-height: 1.5;\n    }\n  }\n}\n\n// æäº¤æŒ‰é’®\n.submit-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  height: 96rpx;\n  border-radius: 48rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.4);\n  transition: all 0.3s;\n  \n  &:active {\n    transform: scale(0.98);\n  }\n  \n  &.disabled {\n    background: #9ca3af;\n    opacity: 0.6;\n    pointer-events: none;\n    box-shadow: none;\n  }\n  \n  text {\n    font-size: 32rpx;\n    color: #ffffff;\n    font-weight: 500;\n  }\n}\n</style> -->\r\n\r\n<template>\n  <view class=\"verification-page\">\n    <!-- å·²è®¤è¯çŠ¶æ€ -->\n    <view class=\"verified-status\" v-if=\"isVerified\">\n      <view class=\"status-icon\">âœ…</view>\n      <text class=\"status-title\">æ ¡å›­è®¤è¯å·²é€šè¿‡</text>\n      <text class=\"status-desc\">æ‚¨å·²å®Œæˆæ ¡å›­èº«ä»½è®¤è¯ï¼Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½</text>\n      \n      <!-- ç¡®è®¤æŒ‰é’® -->\n      <view class=\"retry-btn\" @click=\"confirmAndBack\">\n        <text>ç¡®è®¤</text>\n      </view>\n    </view>\n    \n    <!-- è®¤è¯è¡¨å• -->\n    <view class=\"verification-form\" v-else>\n      <view class=\"form-header\">\n        <text class=\"header-icon\">ğŸ“</text>\n        <text class=\"header-title\">æ ¡å›­èº«ä»½è®¤è¯</text>\n        <text class=\"header-desc\">è¯·å¡«å†™çœŸå®ä¿¡æ¯å®Œæˆèº«ä»½è®¤è¯</text>\n      </view>\n      \n      <view class=\"form-section\">\n        <!-- å§“åè¾“å…¥ -->\n        <view class=\"form-item\">\n          <view class=\"item-label\">\n            <text>å§“å</text>\n            <text class=\"required\">*</text>\n          </view>\n          <input \n            class=\"item-input\"\n            v-model=\"formData.name\"\n            placeholder=\"è¯·è¾“å…¥çœŸå®å§“å\"\n            placeholder-class=\"input-placeholder\"\n            maxlength=\"10\"\n          />\n          <text class=\"error-tip\" v-if=\"errors.name\">{{ errors.name }}</text>\n        </view>\n        \n        <!-- å­¦å·è¾“å…¥ -->\n        <view class=\"form-item\">\n          <view class=\"item-label\">\n            <text>å­¦å·</text>\n            <text class=\"required\">*</text>\n          </view>\n          <input \n            class=\"item-input\"\n            v-model=\"formData.studentId\"\n            placeholder=\"è¯·è¾“å…¥11ä½å­¦å·\"\n            placeholder-class=\"input-placeholder\"\n            type=\"number\"\n            maxlength=\"11\"\n          />\n          <text class=\"hint-tip\">å­¦å·ä¸º11ä½æ•°å­—</text>\n          <text class=\"error-tip\" v-if=\"errors.studentId\">{{ errors.studentId }}</text>\n        </view>\n        \n        <!-- ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹© -->\n        <view class=\"form-item\">\n          <view class=\"item-label\">\n            <text>å­¦é™¢</text>\n            <text class=\"required\">*</text>\n          </view>\n          <picker \n            mode=\"selector\" \n            :range=\"allDepartments\" \n            :value=\"departmentIndex\"\n            @change=\"onDepartmentChange\"\n          >\n            <view class=\"picker-input\" :class=\"{ 'has-value': formData.department }\">\n              <text class=\"picker-text\">{{ formData.department || 'è¯·é€‰æ‹©å­¦é™¢' }}</text>\n              <text class=\"picker-arrow\">â–¼</text>\n            </view>\n          </picker>\n          <text class=\"error-tip\" v-if=\"errors.department\">{{ errors.department }}</text>\n        </view>\n      </view>\n      \n      <!-- æ³¨æ„äº‹é¡¹ -->\n      <view class=\"notice-section\">\n        <view class=\"notice-title\">ğŸ“Œ æ³¨æ„äº‹é¡¹</view>\n        <view class=\"notice-item\">\n          <text>â€¢ è¯·ç¡®ä¿å¡«å†™çš„å§“åã€å­¦å·å’Œå­¦é™¢ä¿¡æ¯çœŸå®æœ‰æ•ˆ</text>\n        </view>\n        <view class=\"notice-item\">\n          <text>â€¢ å­¦é™¢ä¿¡æ¯è¯·è°¨æ…å¡«å†™ï¼Œå¡«å†™åæ— æ³•ä¿®æ”¹</text>\n        </view>\n        <view class=\"notice-item\">\n          <text>â€¢ è®¤è¯é€šè¿‡åå¯äº«å—æ‰€æœ‰åŠŸèƒ½</text>\n        </view>\n      </view>\n      \n      <!-- æäº¤æŒ‰é’® -->\n      <button \n        class=\"submit-btn\"\n        :class=\"{ 'submitting': isSubmitting }\"\n        @click=\"submitVerification\"\n        :disabled=\"isSubmitting\"\n      >\n        <text>{{ isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤è®¤è¯' }}</text>\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\nexport default {\n  data() {\n    return {\n      isVerified: false,\n      verificationData: {\n        name: '',\n        studentId: '',\n        department: '',  // ğŸ”¥ æ–°å¢\n        verifyTime: ''\n      },\n      formData: {\n        name: '',\n        studentId: '',\n        department: ''  // ğŸ”¥ æ–°å¢\n      },\n      errors: {\n        name: '',\n        studentId: '',\n        department: ''  // ğŸ”¥ æ–°å¢\n      },\n      isSubmitting: false,\n      \n      // ğŸ”¥ æ–°å¢ï¼šå­¦é™¢åˆ—è¡¨\n      allDepartments: [\n        'ä¸­å›½è¯­è¨€æ–‡å­¦ç³»',\n        'å›½é™…æ±‰è¯­æ–‡åŒ–å­¦é™¢',\n        'å¤–è¯­å­¦é™¢',\n        'ç»æµä¸ç®¡ç†å­¦é™¢',\n        'äºšæ¬§å•†å­¦é™¢',\n        'å…¬å…±ç®¡ç†å­¦é™¢',\n        'ç»Ÿè®¡å­¦é™¢',\n        'ä¼ æ’­å­¦é™¢',\n        'å†å²å­¦ç³»',\n        'å“²å­¦ç³»',\n        'æ”¿æ²»ä¸å›½é™…å…³ç³»å­¦é™¢',\n        'é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢',\n        'æ³•å­¦é™¢',\n        'ç¤¾ä¼šå‘å±•å­¦é™¢',\n        'æ•™è‚²å­¦éƒ¨',\n        'å¿ƒç†ä¸è®¤çŸ¥ç§‘å­¦å­¦é™¢',\n        'æ•°å­¦ç§‘å­¦å­¦é™¢',\n        'ç‰©ç†ä¸ç”µå­ç§‘å­¦å­¦é™¢',\n        'é€šä¿¡ä¸ç”µå­å·¥ç¨‹å­¦é™¢',\n        'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢',\n        'è½¯ä»¶å·¥ç¨‹å­¦é™¢',\n        'æ•°æ®ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢',\n        'åŒ–å­¦ä¸åˆ†å­å·¥ç¨‹å­¦é™¢',\n        'ç”Ÿå‘½ç§‘å­¦å­¦é™¢',\n        'åœ°ç†ç§‘å­¦å­¦é™¢',\n        'ç”Ÿæ€ä¸ç¯å¢ƒç§‘å­¦å­¦é™¢',\n        'ç©ºé—´äººå·¥æ™ºèƒ½å­¦é™¢',\n        'ç¾æœ¯å­¦é™¢',\n        'è®¾è®¡å­¦é™¢',\n        'éŸ³ä¹å­¦é™¢',\n        'ä½“è‚²ä¸å¥åº·å­¦é™¢'\n      ],\n      departmentIndex: -1  // ğŸ”¥ æ–°å¢ï¼šå½“å‰é€‰ä¸­çš„å­¦é™¢ç´¢å¼•\n    }\n  },\n  \n  onLoad() {\n    // this.checkVerificationStatus()\n  },\n  \r\n  computed: {\r\n\t  ...mapState('m_user', ['token', 'code', 'userBase', 'openid', 'userMajor']),\r\n  },\r\n  \n  methods: {\n    // ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹©å˜åŒ–\n    onDepartmentChange(e) {\n      const index = e.detail.value\n      this.departmentIndex = index\n      this.formData.department = this.allDepartments[index]\n      this.errors.department = ''  // æ¸…é™¤é”™è¯¯æç¤º\n    },\n    \n    \n    // ğŸ”¥ ä¿®æ”¹ï¼šè¡¨å•éªŒè¯ - å¢åŠ å­¦é™¢éªŒè¯\n    validateForm() {\n      let isValid = true\n      this.errors = {\n        name: '',\n        studentId: '',\n        department: ''\n      }\n      \n      // éªŒè¯å§“å\n      if (!this.formData.name.trim()) {\n        this.errors.name = 'è¯·è¾“å…¥å§“å'\n        isValid = false\n      } else if (this.formData.name.trim().length < 2) {\n        this.errors.name = 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦'\n        isValid = false\n      }\n      \n      // éªŒè¯å­¦å·\n      if (!this.formData.studentId) {\n        this.errors.studentId = 'è¯·è¾“å…¥å­¦å·'\n        isValid = false\n      } else if (!/^\\d{11}$/.test(this.formData.studentId)) {\n        this.errors.studentId = 'å­¦å·å¿…é¡»ä¸º11ä½æ•°å­—'\n        isValid = false\n      }\n      \n      // ğŸ”¥ æ–°å¢ï¼šéªŒè¯å­¦é™¢\n      if (!this.formData.department) {\n        this.errors.department = 'è¯·é€‰æ‹©å­¦é™¢'\n        isValid = false\n      }\n      \n      return isValid\n    },\n    \n    // ğŸ”¥ ä¿®æ”¹ï¼šæäº¤è®¤è¯ - åŒ…å«å­¦é™¢ä¿¡æ¯\r\n    async submitVerification() {\r\n      if (this.isSubmitting) return\r\n      \r\n      // è¡¨å•éªŒè¯\r\n      if (!this.validateForm()) {\r\n        const firstError = this.errors.name || this.errors.studentId || this.errors.department\r\n        uni.showToast({\r\n          title: firstError,\r\n          icon: 'none',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.isSubmitting = true\r\n      \r\n      uni.showLoading({\r\n        title: 'è®¤è¯ä¸­...',\r\n        mask: true\r\n      })\r\n      \r\n      try {\r\n        // âœ… ä¼ é€’å®Œæ•´çš„è®¤è¯ä¿¡æ¯ï¼ˆåŒ…æ‹¬å­¦é™¢ï¼‰\r\n        const { data: res } = await uni.$http.post('/verification/nano_submit', {\r\n          openid: this.openid,\r\n          // name: this.formData.name.trim(),           // å§“å\r\n          // studentId: this.formData.studentId,        // å­¦å·\r\n          department: this.formData.department       // å­¦é™¢ï¼ˆé€šè¿‡ departmentIndex é€‰æ‹©ï¼‰\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.mata.status === 200) {\r\n          // ä¿å­˜è®¤è¯ä¿¡æ¯\r\n          this.verificationData = {\r\n            name: this.formData.name,\r\n            studentId: this.formData.studentId,\r\n            department: this.formData.department,\r\n            verifyTime: this.formatCurrentTime()\r\n          }\r\n          \r\n          uni.showToast({\r\n            title: 'è®¤è¯æˆåŠŸ',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          \r\n          // æ›´æ–°çŠ¶æ€\r\n          this.isVerified = true\r\n          \r\n          // æ¸…ç©ºè¡¨å•\r\n          this.formData = {\r\n            name: '',\r\n            studentId: '',\r\n            department: ''\r\n          }\r\n          this.departmentIndex = -1\r\n          \r\n        } else {\r\n          uni.showToast({\r\n            title: res.mata.msg || 'è®¤è¯å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n        \r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('è®¤è¯å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.isSubmitting = false\r\n      }\r\n    },\r\n\n    \n    // ç¡®è®¤å¹¶è¿”å›ä¸Šä¸€é¡µ\n    confirmAndBack() {\n      uni.navigateBack({\n        delta: 1\n      })\n    },\n    \n    // æ ¼å¼åŒ–å½“å‰æ—¶é—´\n    formatCurrentTime() {\n      const date = new Date()\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.verification-page {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.verified-status {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 40rpx;\n  text-align: center;\n  \n  .status-icon {\n    font-size: 120rpx;\n    margin-bottom: 32rpx;\n  }\n  \n  .status-title {\n    font-size: 36rpx;\n    color: #333333;\n    font-weight: 600;\n    margin-bottom: 16rpx;\n  }\n  \n  .status-desc {\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 1.5;\n    margin-bottom: 32rpx;\n  }\n}\n\n.verified-info {\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-top: 32rpx;\n  width: 100%;\n  max-width: 600rpx;\n  box-sizing: border-box;\n  \n  .info-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16rpx 0;\n    border-bottom: 1rpx solid #f0f0f0;\n    \n    &:last-child {\n      border-bottom: none;\n    }\n    \n    .label {\n      font-size: 28rpx;\n      color: #999999;\n    }\n    \n    .value {\n      font-size: 28rpx;\n      color: #333333;\n      font-weight: 500;\n    }\n  }\n}\n\n.retry-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #ffffff;\n  padding: 24rpx 48rpx;\n  border-radius: 32rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n  margin-top: 48rpx;\n  transition: all 0.3s;\n  \n  &:active {\n    opacity: 0.8;\n    transform: scale(0.98);\n  }\n}\n\n.verification-form {\n  padding: 32rpx;\n}\n\n.form-header {\n  text-align: center;\n  margin-bottom: 48rpx;\n  \n  .header-icon {\n    font-size: 120rpx;\n    margin-bottom: 24rpx;\n  }\n  \n  .header-title {\n    font-size: 36rpx;\n    color: #333333;\n    font-weight: 600;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  .header-desc {\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 1.5;\n  }\n}\n\n.form-section {\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 24rpx;\n}\n\n.form-item {\n  margin-bottom: 32rpx;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  .item-label {\n    font-size: 28rpx;\n    color: #333333;\n    font-weight: 500;\n    margin-bottom: 16rpx;\n    display: flex;\n    align-items: center;\n    \n    .required {\n      color: #ef4444;\n      margin-left: 4rpx;\n    }\n  }\n  \n  .item-input {\n    width: 100%;\n    height: 88rpx;\n    background-color: #f9fafb;\n    border: 2rpx solid #e5e7eb;\n    border-radius: 12rpx;\n    padding: 0 24rpx;\n    font-size: 28rpx;\n    color: #333333;\n    box-sizing: border-box;\n    transition: all 0.3s;\n    \n    &:focus {\n      background-color: #ffffff;\n      border-color: #667eea;\n    }\n  }\n  \n  .input-placeholder {\n    color: #9ca3af;\n  }\n  \n  /* ğŸ”¥ æ–°å¢ï¼šå­¦é™¢é€‰æ‹©å™¨æ ·å¼ */\n  .picker-input {\n    width: 100%;\n    height: 88rpx;\n    background-color: #f9fafb;\n    border: 2rpx solid #e5e7eb;\n    border-radius: 12rpx;\n    padding: 0 24rpx;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    transition: all 0.3s;\n    \n    .picker-text {\n      font-size: 28rpx;\n      color: #9ca3af;\n      flex: 1;\n    }\n    \n    &.has-value .picker-text {\n      color: #333333;\n    }\n    \n    .picker-arrow {\n      font-size: 24rpx;\n      color: #9ca3af;\n      margin-left: 12rpx;\n    }\n  }\n  \n  .hint-tip {\n    font-size: 24rpx;\n    color: #6b7280;\n    margin-top: 8rpx;\n    display: block;\n  }\n  \n  .error-tip {\n    font-size: 24rpx;\n    color: #ef4444;\n    margin-top: 8rpx;\n    display: block;\n  }\n}\n\n.notice-section {\n  background-color: #f0f9ff;\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 48rpx;\n  border-left: 4rpx solid #3b82f6;\n  \n  .notice-title {\n    font-size: 28rpx;\n    color: #1e40af;\n    font-weight: 600;\n    margin-bottom: 16rpx;\n  }\n  \n  .notice-item {\n    font-size: 24rpx;\n    color: #475569;\n    line-height: 1.8;\n    margin-bottom: 8rpx;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n}\n\n.submit-btn {\n  width: 100%;\n  height: 96rpx;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #ffffff;\n  font-size: 32rpx;\n  font-weight: 600;\n  border-radius: 16rpx;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.4);\n  \n  &:active {\n    transform: translateY(2rpx);\n    box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);\n  }\n  \n  &.submitting {\n    opacity: 0.7;\n    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);\n  }\n  \n  &::after {\n    border: none;\n  }\n}\n</style>\n\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./verification.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./verification.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1762677684069\n      var cssReload = require(\"D:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}