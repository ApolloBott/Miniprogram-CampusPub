{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/publish-post/publish-post.vue?9e02","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/publish-post/publish-post.vue?f6b3","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/publish-post/publish-post.vue?f16a","uni-app:///subpkg/publish-post/publish-post.vue","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/publish-post/publish-post.vue?b689","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/publish-post/publish-post.vue?adc5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","postContent","selectedImages","imageUrls","allTags","availableTags","selectedTagsInContent","isPublishing","uploading","enableGoodsLink","selectedGoods","relatedGoodsId","enableContact","contactInfo","excludeDepartments","includeDepartment","tempSelectedDepartments","tempSelectedDepartment","showModal","modalType","generatedBgImage","showVerificationTip","allDepartments","onlyMyself","imageCheckStatus","allImagesChecked","computed","canPublish","isTopicDiscussion","displayDepartments","verificationStatusClass","verificationStatusIcon","verificationStatusTitle","verificationStatusDesc","methods","toggleOnlyMyself","uni","title","content","showCancel","addTag","icon","duration","console","removeTag","gotoGenerateBgImage","url","events","selectBgImage","gotoVerification","checkVerificationStatus","queryObj","code","res","is_verified","nickname","major","toggleGoodsLink","gotoSelectGoods","selectGoods","toggleContact","chooseImage","maxCount","count","sizeType","sourceType","success","newImages","startIndex","checking","safe","error","fail","checkImagesInBackground","index","filePath","globalIndex","fileInfo","reason","name","formData","openid","statusCode","result","unsafeImages","map","status","filter","errorImages","confirmText","errorReasons","checkTextSafety","uploadImages","mask","uploadedUrls","i","fileType","tokenRes","encoding","fileContent","method","header","resolve","reject","filePaths","deleteImage","selectCategory","showDepartmentPicker","closeModal","isDepartmentSelected","toggleDepartment","confirmDepartments","removeDepartment","clearIncludeDepartment","validateForm","publishPost","cancelText","stillChecking","hasUnsafeImages","pureContent","isTextSafe","finalImages","pureContent1","propertiesString","properties","avatar","images","hasImages","postData","post_id","created_at","likes_count","comments_count","shares_count","post","targetPage","setTimeout","onShow","onLoad","eventChannel"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAujB,CAAgB,okBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACgO3kB;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACA;MACA;MACAC;MACAC;MAEAC;MACAC;MACAC;MAEAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MAEAC,iBACA,WACA,YACA,QACA,WACA,SACA,UACA,QACA,QACA,QACA,OACA,aACA,WACA,OACA,UACA,QACA,aACA,UACA,aACA,aACA,cACA,UACA,aACA,aACA,UACA,UACA,aACA,YACA,QACA,QACA,QACA,UACA;MACA;MACAC;MAAA;;MAEA;MACAC;MAAA;MACAC;IACA;EACA;EAEAC,0CACA;IAEA;IACAC;MACA;MACA;QAAA;MAAA;;MAEA;MACA;QAAA;MAAA;MAEA,6BACA,mBACA,kBACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;QACA;MACA;MAEA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;MAAA;IAEA;IAEAC;MACA;QACA;MACA;MAEA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;MAAA;IAEA;IAEAC;MACA;QACA;MACA;MAEA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;MAAA;IAEA;IAEAC;MACA;QACA;MACA;MAEA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;MAAA;IAEA;EAAA,EACA;EAEAC,yCACA;IAEA;IACAC;MACA;MAEA;QACA;QACA;UACAC;YACAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACAJ;UACAC;UACAI;UACAC;QACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;MAEAC;IACA;IAEA;IACAC;MACA;MACA;QACA;;QAEA;QACA;UACA;QACA;;QAEA;QACA;UACA;UACA;UACA;QACA;QAEAD;MACA;IACA;IAIAE;MAAA;MACA;QACAT;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEAL;QACAU;QACAC;UACAC;YACA;cACA;cACA;gBACA;gBACA;cACA;YACA;YAEA;YACA;YACA;YAEAL;UACA;QACA;MACA;IACA;IAEAM;MACAb;QACAU;MACA;IACA;IAEAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,IAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEAC;kBAAAC;gBAAA;gBAAA;gBAAA,OACAhB;cAAA;gBAAA;gBAAAiB;gBAEA;kBACA;kBACAV;oBACAW;oBACAC;oBACAC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ACAI;YACAC;UACA;UACA;QACA;;QAEA;QACA;MACA;MAEAC;IACA;IAEAgE;MACA;QACAvE;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;UACAC;QACA;QACA;MACA;MAEA;MAEA;QACA;MACA;QACA;MACA;MAEA;IACA;IAEAkE;MACA;MACA;MACA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IAEAC;MACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;MAEA;QACA9E;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAGA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;;MAEA;MACA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;QACAL;UACAC;UACAI;QACA;QACA;MACA;MAEA;IACA;IAEA0E;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAxE;gBACAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACAN;gBACAC;gBAAA,kCAEA;gBAAA,kCACA,yBAGA,0BASA;gBAAA;cAAA;gBAXAA;gBAAA;cAAA;gBAGAD;gBACAC;gBACAF;kBACAC;kBACAI;kBACAC;gBACA;gBAAA;cAAA;gBAGAJ;gBAAA;cAAA;gBAGAA;cAAA;gBAGA;kBACAF;oBACAC;oBACAC;oBACAmD;oBACA2B;oBACAlD;sBACA;wBACA9B;0BACAU;wBACA;sBACA;oBACA;kBACA;gBACA;gBAAA;cAAA;gBAA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","file":"subpkg/publish-post/publish-post.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/publish-post/publish-post.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./publish-post.vue?vue&type=template&id=2c5f9f3a&\"\nvar renderjs\nimport script from \"./publish-post.vue?vue&type=script&lang=js&\"\nexport * from \"./publish-post.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish-post.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/publish-post/publish-post.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish-post.vue?vue&type=template&id=2c5f9f3a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.selectedTagsInContent.length\n  var g1 = _vm.postContent.length\n  var g2 = _vm.postContent.length\n  var g3 = _vm.selectedTagsInContent.length\n  var g4 = g3 > 0 ? _vm.selectedTagsInContent.length : null\n  var g5 = _vm.availableTags.length\n  var g6 = _vm.selectedImages.length > 0 || !_vm.uploading\n  var g7 = g6 ? _vm.selectedImages.length < 9 && !_vm.uploading : null\n  var g8 = _vm.selectedTagsInContent.includes(\"äºŒæ‰‹\")\n  var l0 = _vm.showModal\n    ? _vm.__map(_vm.displayDepartments, function (dept, index) {\n        var $orig = _vm.__get_orig(dept)\n        var m0 = _vm.isDepartmentSelected(dept)\n        var m1 = _vm.isDepartmentSelected(dept)\n        return {\n          $orig: $orig,\n          m0: m0,\n          m1: m1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n        g8: g8,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish-post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish-post.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"publish-page\">\n    <!-- ğŸ¯ ä¿®æ”¹:å†…å®¹è¾“å…¥åŒº + å›¾ç‰‡é€‰æ‹© + è¯é¢˜è®¨è®ºæ•´åˆ -->\n    <view class=\"content-section\">\n      <!-- é¡¶éƒ¨å·¥å…·æ  -->\n      <view class=\"content-header\">\n        <text class=\"header-title\">åˆ†äº«æ–°é²œäº‹</text>\n        <!-- è¯é¢˜è®¨è®ºåˆ‡æ¢æŒ‰é’® -->\n      </view>\n\n      <!-- å†…å®¹è¾“å…¥æ¡† -->\n      <textarea \n        class=\"content-input\"\n        v-model=\"postContent\"\n        placeholder=\"åˆ†äº«æ–°é²œäº‹...\"\n        placeholder-class=\"content-placeholder\"\n        :maxlength=\"500\"\n        auto-height\n      />\n      \n\t     <!-- ğŸ”¥ æ–°å¢ï¼šå†…å®¹ä¸æ ‡ç­¾è”åˆæ˜¾ç¤ºåŒº -->\n\t     <view class=\"content-with-tags\">\n\t       <!-- <text class=\"content-text\">{{ postContent }}</text> -->\n\t       <view class=\"inline-tags\" v-if=\"selectedTagsInContent.length > 0\">\n\t         <view \n\t           class=\"tag-badge\"\n\t           v-for=\"(tag, index) in selectedTagsInContent\"\n\t           :key=\"index\"\n\t           @click=\"removeTag(tag)\"\n\t         >\n\t           <text class=\"tag-text\">#{{ tag }}</text>\n\t         </view>\n\t       </view>\n\t     </view>\n\t\t\n       <!-- å­—æ•°ç»Ÿè®¡ -->\n        <view class=\"content-count\">\n          <text :class=\"{ 'over-limit': postContent.length > 500 }\">\n            {{ postContent.length }}/500\n          </text>\n          <text class=\"tag-count\" v-if=\"selectedTagsInContent.length > 0\">\n            å·²é€‰ {{ selectedTagsInContent.length }}/3 ä¸ªæ ‡ç­¾\n          </text>\n        </view>\n\t\t\n\t\t  <!-- ğŸ”¥ å¯é€‰æ ‡ç­¾åŒºåŸŸï¼ˆç§»åˆ°å­—æ•°ç»Ÿè®¡ä¸‹æ–¹ï¼‰ -->\n\t\t   <view class=\"available-tags\" v-if=\"availableTags.length > 0\">\n\t\t     <view \n\t\t       class=\"tag-item available\"\n\t\t       v-for=\"(tag, index) in availableTags\"\n\t\t       :key=\"index\"\n\t\t       @click=\"addTag(tag)\"\n\t\t     >\n\t\t       <text class=\"tag-text\">#{{ tag }}</text>\n\t\t     </view>\n\t\t   </view>\n      \n      <!-- å›¾ç‰‡ç½‘æ ¼åŒºåŸŸ -->\n      <view class=\"images-grid\" v-if=\"selectedImages.length > 0 || !uploading\">\n        <!-- å·²é€‰æ‹©çš„å›¾ç‰‡ -->\n        <view \n          class=\"image-item\" \n          v-for=\"(img, index) in selectedImages\" \n          :key=\"index\"\n        >\n          <image class=\"image\" :src=\"img\" mode=\"aspectFill\"></image>\n          <view class=\"delete-icon\" @click=\"deleteImage(index)\">\n            <text>Ã—</text>\n          </view>\n        </view>\n        \n        <!-- æ·»åŠ å›¾ç‰‡æŒ‰é’® -->\n        <view \n          class=\"add-image-btn\" \n          @click=\"chooseImage\"\n          v-if=\"selectedImages.length < 9 && !uploading\"\n        >\n          <text class=\"add-icon\">+</text>\n          <text class=\"add-text\">æ·»åŠ å›¾ç‰‡</text>\n        </view>\n        \n        <!-- ä¸Šä¼ ä¸­æç¤º -->\n        <view class=\"add-image-btn uploading\" v-if=\"uploading\">\n          <text class=\"add-icon\">â³</text>\n          <text class=\"add-text\">ä¸Šä¼ ä¸­...</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- äºŒæ‰‹å•†å“å…³è”åŒºåŸŸ -->\n    <view class=\"goods-link-section\" v-if=\"selectedTagsInContent.includes('äºŒæ‰‹')\">\n      <text class=\"section-title\">å•†å“å…³è”ï¼ˆå¯é€‰ï¼‰</text>\n      \n      <view class=\"goods-link-toggle\" @click=\"toggleGoodsLink\">\n        <text class=\"toggle-label\">å…³è”æˆ‘å‘å¸ƒçš„å•†å“</text>\n        <view class=\"toggle-switch\" :class=\"{ 'active': enableGoodsLink }\">\n          <view class=\"toggle-circle\"></view>\n        </view>\n      </view>\n      \n      <view class=\"selected-goods\" v-if=\"enableGoodsLink && selectedGoods\">\n        <view class=\"goods-card\" @click=\"gotoSelectGoods\">\n          <image \n            class=\"goods-image\" \n            :src=\"selectedGoods.goods_small_logo || selectedGoods.goods_big_logo\" \n            mode=\"aspectFill\"\n          ></image>\n          <view class=\"goods-info\">\n            <text class=\"goods-name\">{{ selectedGoods.goods_name }}</text>\n            <text class=\"goods-price\">Â¥{{ selectedGoods.goods_price }}</text>\n          </view>\n          <text class=\"change-btn\">æ›´æ¢</text>\n        </view>\n      </view>\n      \n      <view class=\"select-goods-btn\" v-if=\"enableGoodsLink && !selectedGoods\" @click=\"gotoSelectGoods\">\n        <text class=\"select-icon\">ğŸ“¦</text>\n        <text class=\"select-text\">é€‰æ‹©å•†å“</text>\n      </view>\n      \n      <view class=\"goods-tips\" v-if=\"enableGoodsLink\">\n        <text>ğŸ’¡ å…³è”å•†å“åï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥æŸ¥çœ‹å•†å“è¯¦æƒ…</text>\n      </view>\n    </view>\n    \n    <!-- è”ç³»æ–¹å¼è®¾ç½® -->\n    <view class=\"contact-section\">\n      <text class=\"section-title\">è”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰</text>\n      \n      <view class=\"contact-toggle\" @click=\"toggleContact\">\n        <text class=\"toggle-label\">å…è®¸ä»–äººè”ç³»æˆ‘</text>\n        <view class=\"toggle-switch\" :class=\"{ 'active': enableContact }\">\n          <view class=\"toggle-circle\"></view>\n        </view>\n      </view>\n      \n      <view class=\"contact-input-container\" v-if=\"enableContact\">\n        <view class=\"input-label\">\n          <text>è”ç³»æ–¹å¼</text>\n          <text class=\"input-tip\">è¯·è¾“å…¥å¾®ä¿¡å·æˆ–QQå·</text>\n        </view>\n        <input \n          class=\"contact-input\"\n          v-model=\"contactInfo\"\n          placeholder=\"è¯·è¾“å…¥å¾®ä¿¡å·æˆ–QQå·\"\n          placeholder-class=\"input-placeholder\"\n          :maxlength=\"50\"\n        />\n        <view class=\"contact-tips\">\n          <text>ğŸ’¡ æç¤ºï¼šä»–äººå¯ç‚¹å‡»\"è”ç³»TA\"å¤åˆ¶æ‚¨çš„è”ç³»æ–¹å¼ï¼Œæ²¡æœ‰æ ¡å›­è®¤è¯çš„ç”¨æˆ·æ— æ³•è·å–æ‚¨çš„è”ç³»æ–¹å¼</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- å‘å¸ƒèŒƒå›´è®¾ç½® -->\n    <view class=\"department-section\">\n      <text class=\"section-title\">å‘å¸ƒèŒƒå›´ï¼ˆå¯é€‰ï¼‰</text>\n      \n\n\t  <!-- ğŸ”¥ æ–°å¢:ä»…è‡ªå·±å¯è§é€‰é¡¹ -->\n\t  <view class=\"only-myself-option\">\n\t    <view class=\"option-header\" @click=\"toggleOnlyMyself\">\n\t      <view class=\"option-left\">\n\t        <text class=\"option-label\">ä»…è‡ªå·±å¯è§</text>\n\t        <text class=\"option-desc\">å¼€å¯åè¯¥å¸–å­åªæœ‰ä½ èƒ½çœ‹åˆ°</text>\n\t      </view>\n\t      <view class=\"toggle-switch\" :class=\"{ 'active': onlyMyself }\">\n\t        <view class=\"toggle-circle\"></view>\n\t      </view>\n\t    </view>\n\t  </view>\n      \n      <view class=\"department-tip\">\n        <text>ğŸ’¡ æç¤ºï¼šä¸èƒ½åŒæ—¶è®¾ç½®\"ä¸å‘å¸ƒåˆ°\"å’Œ\"åªå‘å¸ƒåˆ°\"</text>\n      </view>\n    </view>\n        \n    <!-- å‘å¸ƒæŒ‰é’® -->\n    <view class=\"publish-btn\" @click=\"publishPost\" :class=\"{ 'disabled': isPublishing }\">\n      <text>{{ isPublishing ? 'å‘å¸ƒä¸­...' : 'å‘å¸ƒ' }}</text>\n    </view>\n    \n    <!-- é™¢ç³»é€‰æ‹©å¼¹çª— -->\n    <view class=\"department-modal\" v-if=\"showModal\" @click=\"closeModal\">\n      <view class=\"modal-content\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">\n            {{ modalType === 'exclude' ? 'é€‰æ‹©ä¸å‘å¸ƒçš„é™¢ç³»ï¼ˆå¯å¤šé€‰ï¼‰' : 'é€‰æ‹©åªå‘å¸ƒçš„é™¢ç³»' }}\n          </text>\n          <text class=\"modal-close\" @click=\"closeModal\">Ã—</text>\n        </view>\n        \n        <scroll-view class=\"modal-body\" scroll-y>\n          <view \n            class=\"department-item\"\n            v-for=\"(dept, index) in displayDepartments\"\n            :key=\"index\"\n            :class=\"{ 'selected': isDepartmentSelected(dept) }\"\n            @click=\"toggleDepartment(dept)\"\n          >\n            <text class=\"department-name\">{{ dept }}</text>\n            <text class=\"department-check\" v-if=\"isDepartmentSelected(dept)\">âœ“</text>\n          </view>\n          \n          <view class=\"empty-tip\" v-if=\"modalType === 'include' && !userBase.major\">\n            <text class=\"empty-icon\">ğŸ“‹</text>\n            <text class=\"empty-text\">æ‚¨çš„ä¸ªäººä¿¡æ¯ä¸­æœªè®¾ç½®é™¢ç³»</text>\n          </view>\n        </scroll-view>\n        \n        <view class=\"modal-footer\">\n          <view class=\"modal-btn cancel\" @click=\"closeModal\">\n            <text>å–æ¶ˆ</text>\n          </view>\n          <view class=\"modal-btn confirm\" @click=\"confirmDepartments\">\n            <text>ç¡®å®š</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      postContent: '',\n      selectedImages: [],\n      imageUrls: [],\n\t  // ğŸ”¥ ä¿®æ”¹ï¼šæ ‡ç­¾ç›¸å…³æ•°æ®\n\t  allTags: ['æ—¥å¸¸', 'äºŒæ‰‹', 'è¯¢é—®', 'åæ§½'],           // æ‰€æœ‰æ ‡ç­¾\n\t  availableTags: ['æ—¥å¸¸', 'äºŒæ‰‹', 'è¯¢é—®', 'åæ§½'],    // å½“å‰å¯é€‰æ‹©çš„æ ‡ç­¾\n\t  selectedTagsInContent: [],  \n      // categories: ['æ—¥å¸¸', 'äºŒæ‰‹', 'äº¤å‹', 'åæ§½'],\n      // selectedCategory: [], // ğŸ”¥ UIå±‚é¢ä»ä½¿ç”¨æ•°ç»„\n      isPublishing: false,\n      uploading: false,\n      \n      enableGoodsLink: false,\n      selectedGoods: null,\n      relatedGoodsId: null,\n      \n      enableContact: false,\n      contactInfo: '',\n      \n      excludeDepartments: [],\n      includeDepartment: '',\n      tempSelectedDepartments: [],\n      tempSelectedDepartment: '',\n      showModal: false,\n      modalType: '',\n      \n      generatedBgImage: '',\n      showVerificationTip: true,\n      \n      allDepartments: [\n        'ä¸­å›½è¯­è¨€æ–‡å­¦ç³»',\n        'å›½é™…æ±‰è¯­æ–‡åŒ–å­¦é™¢',\n        'å¤–è¯­å­¦é™¢',\n        'ç»æµä¸ç®¡ç†å­¦é™¢',\n        'äºšæ¬§å•†å­¦é™¢',\n        'å…¬å…±ç®¡ç†å­¦é™¢',\n        'ç»Ÿè®¡å­¦é™¢',\n        'ä¼ æ’­å­¦é™¢',\n        'å†å²å­¦ç³»',\n        'å“²å­¦ç³»',\n        'æ”¿æ²»ä¸å›½é™…å…³ç³»å­¦é™¢',\n        'é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢',\n        'æ³•å­¦é™¢',\n        'ç¤¾ä¼šå‘å±•å­¦é™¢',\n        'æ•™è‚²å­¦éƒ¨',\n        'å¿ƒç†ä¸è®¤çŸ¥ç§‘å­¦å­¦é™¢',\n        'æ•°å­¦ç§‘å­¦å­¦é™¢',\n        'ç‰©ç†ä¸ç”µå­ç§‘å­¦å­¦é™¢',\n        'é€šä¿¡ä¸ç”µå­å·¥ç¨‹å­¦é™¢',\n        'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢',\n        'è½¯ä»¶å·¥ç¨‹å­¦é™¢',\n        'æ•°æ®ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢',\n        'åŒ–å­¦ä¸åˆ†å­å·¥ç¨‹å­¦é™¢',\n        'ç”Ÿå‘½ç§‘å­¦å­¦é™¢',\n        'åœ°ç†ç§‘å­¦å­¦é™¢',\n        'ç”Ÿæ€ä¸ç¯å¢ƒç§‘å­¦å­¦é™¢',\n        'ç©ºé—´äººå·¥æ™ºèƒ½å­¦é™¢',\n        'ç¾æœ¯å­¦é™¢',\n        'è®¾è®¡å­¦é™¢',\n        'éŸ³ä¹å­¦é™¢',\n        'ä½“è‚²ä¸å¥åº·å­¦é™¢'\n      ],\n\t   // ğŸ”¥ æ–°å¢:ä»…è‡ªå·±å¯è§å¼€å…³\n\t  onlyMyself: false,  // é»˜è®¤å…³é—­\n\t  \n\t  // ğŸ”¥ æ–°å¢ï¼šå›¾ç‰‡æ£€æµ‹çŠ¶æ€ç®¡ç†\n\t      imageCheckStatus: [], // å­˜å‚¨æ¯å¼ å›¾ç‰‡çš„æ£€æµ‹çŠ¶æ€\n\t      allImagesChecked: false,\n    }\n  },\n  \n  computed: {\n    ...mapState('m_user', ['openid', 'userBase']),\n    \n\t  // ğŸ”¥ æ–°å¢ï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥å‘å¸ƒ\n\t  canPublish() {\n\t    // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦è¿˜åœ¨æ£€æµ‹ä¸­\n\t    const stillChecking = this.imageCheckStatus.some(status => status.checking)\n\t    \n\t    // æ£€æŸ¥æ˜¯å¦æœ‰è¿è§„å›¾ç‰‡\n\t    const hasUnsafeImages = this.imageCheckStatus.some(status => status.safe === false)\n\t    \n\t    return !this.isPublishing && \n\t           !this.uploading && \n\t           !stillChecking && \n\t           !hasUnsafeImages\n\t  },\n\t  \n    isTopicDiscussion() {\n      return this.imageUrls.length > 0\n    },\n    \n    displayDepartments() {\n      if (this.modalType === 'include') {\n        return this.userBase.major ? [this.userBase.major] : []\n      } else {\n        return this.allDepartments\n      }\n    },\n    \n    verificationStatusClass() {\n      if (!this.userBase || this.userBase.is_verified === undefined) {\n        return 'status-loading'\n      }\n      \n      switch (this.userBase.is_verified) {\n        case 0: return 'status-unverified'\n        case 1: return 'status-verified'\n        case 2: return 'status-pending'\n        case 3: return 'status-failed'\n        default: return 'status-unverified'\n      }\n    },\n    \n    verificationStatusIcon() {\n      if (!this.userBase || this.userBase.is_verified === undefined) {\n        return 'â³'\n      }\n      \n      switch (this.userBase.is_verified) {\n        case 0: return 'ğŸ”’'\n        case 1: return 'âœ…'\n        case 2: return 'â³'\n        case 3: return 'âŒ'\n        default: return 'ğŸ”’'\n      }\n    },\n    \n    verificationStatusTitle() {\n      if (!this.userBase || this.userBase.is_verified === undefined) {\n        return 'åŠ è½½ä¸­...'\n      }\n      \n      switch (this.userBase.is_verified) {\n        case 0: return 'æ ¡å›­è®¤è¯æœªå®Œæˆ'\n        case 1: return 'æ ¡å›­è®¤è¯å·²å®Œæˆ'\n        case 2: return 'æ ¡å›­è®¤è¯å®¡æ ¸ä¸­'\n        case 3: return 'æ ¡å›­è®¤è¯å¤±è´¥'\n        default: return 'æ ¡å›­è®¤è¯æœªå®Œæˆ'\n      }\n    },\n    \n    verificationStatusDesc() {\n      if (!this.userBase || this.userBase.is_verified === undefined) {\n        return 'æ­£åœ¨è·å–è®¤è¯çŠ¶æ€...'\n      }\n      \n      switch (this.userBase.is_verified) {\n        case 0: return 'å‘å¸ƒå¸–å­éœ€è¦å®Œæˆæ ¡å›­è®¤è¯'\n        case 1: return 'æ‚¨å¯ä»¥æ­£å¸¸å‘å¸ƒå¸–å­'\n        case 2: return 'è¯·ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸ï¼Œæš‚æ—¶æ— æ³•å‘å¸ƒå¸–å­'\n        case 3: return 'è®¤è¯å¤±è´¥ï¼Œè¯·é‡æ–°æäº¤è®¤è¯ç”³è¯·'\n        default: return 'å‘å¸ƒå¸–å­éœ€è¦å®Œæˆæ ¡å›­è®¤è¯'\n      }\n    }\n  },\n  \n  methods: {\n    ...mapMutations('m_user', ['updateUserBase']),\n    \n\t // ğŸ”¥ æ–°å¢:åˆ‡æ¢ä»…è‡ªå·±å¯è§\n\t  toggleOnlyMyself() {\n\t    this.onlyMyself = !this.onlyMyself;\n\t    \n\t    if (this.onlyMyself) {\n\t      // å¼€å¯ä»…è‡ªå·±å¯è§å,æ¸…é™¤å‘å¸ƒèŒƒå›´è®¾ç½®(å¯é€‰)\n\t      if (this.excludeDepartments.length > 0 || this.includeDepartment) {\n\t        uni.showModal({\n\t          title: 'æç¤º',\n\t          content: 'å¼€å¯\"ä»…è‡ªå·±å¯è§\"å,å‘å¸ƒèŒƒå›´è®¾ç½®å°†è¢«å¿½ç•¥',\n\t          showCancel: false\n\t        });\n\t      }\n\t    }\n\t  },\n\t  \n\t   // ğŸ”¥ ä¿®æ”¹ï¼šæ·»åŠ æ ‡ç­¾ï¼ˆä¸åŠ å…¥åˆ°å†…å®¹ä¸­ï¼‰\n\t    addTag(tag) {\n\t      if (this.selectedTagsInContent.length >= 3) {\n\t        uni.showToast({\n\t          title: 'æœ€å¤šåªèƒ½é€‰æ‹©3ä¸ªæ ‡ç­¾',\n\t          icon: 'none',\n\t          duration: 1500\n\t        });\n\t        return;\n\t      }\n\t      \n\t      // âœ… åªæ›´æ–°å·²é€‰æ ‡ç­¾æ•°ç»„ï¼Œä¸ä¿®æ”¹ postContent\n\t      this.selectedTagsInContent.push(tag);\n\t      \n\t      // ä»å¯é€‰æ ‡ç­¾ä¸­ç§»é™¤\n\t      const index = this.availableTags.indexOf(tag);\n\t      if (index > -1) {\n\t        this.availableTags.splice(index, 1);\n\t      }\n\t      \n\t      // å¦‚æœæ˜¯\"äºŒæ‰‹\"æ ‡ç­¾ï¼Œè‡ªåŠ¨å¯ç”¨å•†å“å…³è”\n\t      if (tag === 'äºŒæ‰‹') {\n\t        this.enableGoodsLink = true;\n\t      }\n\t      \n\t      console.log('âœ… æ·»åŠ æ ‡ç­¾:', tag);\n\t    },\n\t  \n\t  // ğŸ”¥ æ–°å¢ï¼šç§»é™¤æ ‡ç­¾æ–¹æ³•\n\t    removeTag(tag) {\n\t      const index = this.selectedTagsInContent.indexOf(tag);\n\t      if (index > -1) {\n\t        this.selectedTagsInContent.splice(index, 1);\n\t        \n\t        // é‡æ–°æ·»åŠ åˆ°å¯é€‰åˆ—è¡¨\n\t        if (!this.availableTags.includes(tag)) {\n\t          this.availableTags.push(tag);\n\t        }\n\t        \n\t        // å¦‚æœåˆ é™¤çš„æ˜¯\"äºŒæ‰‹\"æ ‡ç­¾ï¼Œæ¸…é™¤å•†å“å…³è”\n\t        if (tag === 'äºŒæ‰‹') {\n\t          this.enableGoodsLink = false;\n\t          this.selectedGoods = null;\n\t          this.relatedGoodsId = null;\n\t        }\n\t        \n\t        console.log('ğŸ—‘ï¸ åˆ é™¤æ ‡ç­¾:', tag);\n\t      }\n\t    },\n\t\t\n\t \n\t\t\n    gotoGenerateBgImage() {\n      if (!this.postContent.trim()) {\n        uni.showToast({\n          title: 'è¯·å…ˆè¾“å…¥å†…å®¹',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      if (this.postContent.trim().length > 200) {\n        uni.showToast({\n          title: 'å†…å®¹è¿‡é•¿ï¼Œå»ºè®®ä¸è¶…è¿‡200å­—',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      if (this.selectedImages.length >= 9) {\n        uni.showToast({\n          title: 'æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ å›¾ç‰‡',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      uni.navigateTo({\n        url: `/subpkg/text-to-image/text-to-image?content=${encodeURIComponent(this.postContent.trim())}&isTopic=1`,\n        events: {\n          selectBgImage: (data) => {\n            if (this.generatedBgImage) {\n              const oldIndex = this.selectedImages.indexOf(this.generatedBgImage);\n              if (oldIndex > -1) {\n                this.selectedImages.splice(oldIndex, 1);\n                this.imageUrls.splice(oldIndex, 1);\n              }\n            }\n            \n            this.generatedBgImage = data.imageUrl;\n            this.selectedImages.push(data.imageUrl);\n            this.imageUrls.push(data.imageUrl);\n            \n            console.log('âœ… å·²é€‰æ‹©è¯é¢˜èƒŒæ™¯å›¾:', data.imageUrl);\n          }\n        }\n      });\n    },\n    \n    gotoVerification() {\n      uni.navigateTo({\n        url: '/subpkg/verification/verification'\n      })\n    },\n    \n    async checkVerificationStatus() {\n      try {\n        if (!this.openid) return\n        \n        const queryObj = { code: this.openid }\n        const { data: res } = await uni.$http.get('/users/userinfo', queryObj)\n        \n        if (res.meta.status === 200) {\n          this.updateUserBase(res.message)\n          console.log('ğŸ” è®¤è¯çŠ¶æ€æ£€æŸ¥:', {\n            is_verified: res.message.is_verified,\n            nickname: res.message.nickname,\n            major: res.message.major\n          })\n        }\n      } catch (error) {\n        console.error('æ£€æŸ¥è®¤è¯çŠ¶æ€å¤±è´¥:', error)\n      }\n    },\n    \n    toggleGoodsLink() {\n      this.enableGoodsLink = !this.enableGoodsLink;\n      if (!this.enableGoodsLink) {\n        this.selectedGoods = null;\n        this.relatedGoodsId = null;\n      }\n    },\n    \n    gotoSelectGoods() {\n      if (!this.userBase.goods_id || this.userBase.goods_id.length === 0) {\n        uni.showToast({\n          title: 'æ‚¨è¿˜æ²¡æœ‰å‘å¸ƒå•†å“',\n          icon: 'none'\n        });\n        return;\n      }\n    \n      uni.navigateTo({\n        url: '/subpkg/goods-selector/goods-selector',\n        events: {\n          selectGoods: (data) => {\n            this.selectedGoods = data.goods;\n            this.relatedGoodsId = data.goods_id;\n            console.log('âœ… å·²é€‰æ‹©å•†å“:', data.goods.goods_name);\n          }\n        }\n      });\n    },\n    \n    toggleContact() {\n      this.enableContact = !this.enableContact;\n      if (!this.enableContact) {\n        this.contactInfo = '';\n      }\n    },\n    \n    async chooseImage() {\n      if (this.isPublishing) return;\n      \n      const maxCount = 9 - this.selectedImages.length;\n    \n      if (maxCount <= 0) {\n        uni.showToast({\n          title: 'æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ å›¾ç‰‡',\n          icon: 'none'\n        });\n        return;\n      }\n    \n      uni.chooseImage({\n        count: maxCount,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: async (res) => {\n          console.log('ğŸ“¸ é€‰æ‹©äº†', res.tempFilePaths.length, 'å¼ å›¾ç‰‡')\n          \n          // ğŸ”¥ ç«‹å³æ·»åŠ åˆ°åˆ—è¡¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒ\n          const newImages = res.tempFilePaths\n          const startIndex = this.selectedImages.length\n          \n          // å…ˆæ·»åŠ å›¾ç‰‡åˆ°å±•ç¤ºåˆ—è¡¨\n          this.selectedImages = this.selectedImages.concat(newImages)\n          \n          // åˆå§‹åŒ–æ£€æµ‹çŠ¶æ€ï¼ˆæ£€æµ‹ä¸­ï¼‰\n          newImages.forEach(() => {\n            this.imageCheckStatus.push({\n              checking: true,\n              safe: null,\n              error: false\n            })\n          })\n          \n          uni.showToast({\n            title: `å·²æ·»åŠ  ${newImages.length} å¼ å›¾ç‰‡`,\n            icon: 'success',\n            duration: 1000\n          })\n          \n          // ğŸ”¥ å¼‚æ­¥æ£€æµ‹å›¾ç‰‡ï¼ˆä¸é˜»å¡ç”¨æˆ·æ“ä½œï¼‰\n          this.checkImagesInBackground(newImages, startIndex)\n        },\n        fail: (err) => {\n          console.error('âŒ é€‰æ‹©å›¾ç‰‡å¤±è´¥:', err)\n        }\n      });\n    },\n\n\tasync checkImagesInBackground(imagePaths, startIndex) {\n\t  console.log('ğŸ” å¼€å§‹åå°æ£€æµ‹', imagePaths.length, 'å¼ å›¾ç‰‡')\n\t  \n\t  // ğŸ”¥ ä¸²è¡Œæ‰§è¡Œæ£€æµ‹\n\t  for (let index = 0; index < imagePaths.length; index++) {\n\t    const filePath = imagePaths[index]\n\t    const globalIndex = startIndex + index\n\t    \n\t    try {\n\t      // æ£€æŸ¥æ–‡ä»¶å¤§å°\n\t      const fileInfo = await new Promise((resolve, reject) => {\n\t        uni.getFileInfo({\n\t          filePath: filePath,\n\t          success: resolve,\n\t          fail: reject\n\t        })\n\t      })\n\t      \n\t      console.log(`ğŸ“ å›¾ç‰‡ ${globalIndex + 1} å¤§å°:`, (fileInfo.size / 1024).toFixed(2) + ' KB')\n\t      \n\t      if (fileInfo.size > 1024 * 1024) {\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: null,\n\t          error: true,\n\t          reason: 'æ–‡ä»¶è¿‡å¤§'\n\t        }\n\t        continue\n\t      }\n\t      \n\t      // ä¸Šä¼ æ£€æµ‹\n\t      const res = await new Promise((resolve, reject) => {\n\t        uni.uploadFile({\n\t          url: 'https://xinshi00.com/upload/imgSecCheck',\n\t          filePath: filePath,\n\t          name: 'media',\n\t          formData: { openid: this.openid },\n\t          success: resolve,\n\t          fail: reject\n\t        })\n\t      })\n\t      \n\t      console.log(`ğŸ“¥ å›¾ç‰‡ ${globalIndex + 1} åŸå§‹å“åº”:`, {\n\t        statusCode: res.statusCode,\n\t        data: res.data\n\t      })\n\t      \n\t      // è§£æå“åº”\n\t      let result\n\t      try {\n\t        result = typeof res.data === 'string' ? JSON.parse(res.data) : res.data\n\t      } catch (parseError) {\n\t        console.error(`âŒ å›¾ç‰‡ ${globalIndex + 1} å“åº”è§£æå¤±è´¥:`, parseError)\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: null,\n\t          error: true,\n\t          reason: 'å“åº”è§£æå¤±è´¥'\n\t        }\n\t        continue\n\t      }\n\t      \n\t      console.log(`ğŸ“¥ å›¾ç‰‡ ${globalIndex + 1} è§£æåå“åº”:`, result)\n\t      \n\t      // æ ¹æ®å“åº”æ›´æ–°çŠ¶æ€\n\t      if (res.statusCode === 200 && result.meta && result.meta.status === 200) {\n\t        // âœ… å›¾ç‰‡å®‰å…¨\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: true,\n\t          error: false\n\t        }\n\t        console.log(`âœ… å›¾ç‰‡ ${globalIndex + 1} æ£€æµ‹é€šè¿‡`)\n\t        \n\t      } else if (res.statusCode === 400 || (result.meta && result.meta.status === 400)) {\n\t        // ğŸš« å›¾ç‰‡è¿è§„\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: false,\n\t          error: false,\n\t          reason: result.meta?.msg || 'å†…å®¹è¿è§„'\n\t        }\n\t        console.warn(`ğŸš« å›¾ç‰‡ ${globalIndex + 1} å†…å®¹è¿è§„:`, result.meta?.msg)\n\t        \n\t      } else {\n\t        // âŒ æ£€æµ‹å¤±è´¥\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: null,\n\t          error: true,\n\t          reason: result.meta?.msg || 'æ£€æµ‹å¤±è´¥'\n\t        }\n\t        console.error(`âŒ å›¾ç‰‡ ${globalIndex + 1} æ£€æµ‹å¤±è´¥:`, result.meta?.msg)\n\t      }\n\t      \n\t    } catch (err) {\n\t      console.error(`ğŸ’¥ å›¾ç‰‡ ${globalIndex + 1} æ£€æµ‹å¼‚å¸¸:`, err)\n\t      \n\t      this.imageCheckStatus[globalIndex] = {\n\t        checking: false,\n\t        safe: null,\n\t        error: true,\n\t        reason: 'ç½‘ç»œé”™è¯¯'\n\t      }\n\t    }\n\t  }\n\t  \n\t  // å¤„ç†è¿è§„å’Œå¤±è´¥çš„å›¾ç‰‡\n\t  const unsafeImages = this.imageCheckStatus\n\t    .map((status, index) => ({ status, index }))\n\t    .filter(item => item.status.safe === false)\n\t  \n\t  const errorImages = this.imageCheckStatus\n\t    .map((status, index) => ({ status, index }))\n\t    .filter(item => item.status.safe === null && item.status.error === true)\n\t  \n\t  if (unsafeImages.length > 0) {\n\t    uni.showModal({\n\t      title: 'å›¾ç‰‡æ£€æµ‹å®Œæˆ',\n\t      content: `æœ‰ ${unsafeImages.length} å¼ å›¾ç‰‡æœªé€šè¿‡æ£€æµ‹ï¼Œå·²è‡ªåŠ¨ç§»é™¤`,\n\t      showCancel: false,\n\t      confirmText: 'æˆ‘çŸ¥é“äº†',\n\t      success: () => {\n\t        unsafeImages.reverse().forEach(item => {\n\t          this.selectedImages.splice(item.index, 1)\n\t          this.imageUrls.splice(item.index, 1)\n\t          this.imageCheckStatus.splice(item.index, 1)\n\t        })\n\t      }\n\t    })\n\t  }\n\t  \n\t  if (errorImages.length > 0) {\n\t    const errorReasons = errorImages.map(item => item.status.reason).join('ã€')\n\t    uni.showModal({\n\t      title: 'å›¾ç‰‡æ£€æµ‹å¤±è´¥',\n\t      content: `æœ‰ ${errorImages.length} å¼ å›¾ç‰‡æ£€æµ‹å¤±è´¥ï¼ˆ${errorReasons}ï¼‰ï¼Œå·²è‡ªåŠ¨ç§»é™¤`,\n\t      showCancel: false,\n\t      confirmText: 'æˆ‘çŸ¥é“äº†',\n\t      success: () => {\n\t        errorImages.reverse().forEach(item => {\n\t          this.selectedImages.splice(item.index, 1)\n\t          this.imageUrls.splice(item.index, 1)\n\t          this.imageCheckStatus.splice(item.index, 1)\n\t        })\n\t      }\n\t    })\n\t  }\n\t  \n\t  this.allImagesChecked = true\n\t  console.log('âœ… æ‰€æœ‰å›¾ç‰‡æ£€æµ‹å®Œæˆ')\n\t},\n\t\n\tasync checkTextSafety(text) {\n\t  try {\n\t    console.log('ğŸ” å¼€å§‹æ£€æµ‹æ–‡æœ¬:', text.substring(0, 30) + '...')\n\t    \n\t    const { data: res } = await uni.$http.post('/upload/textSecCheck', {\n\t      content: text,\n\t      openid: this.openid\n\t    })\n\t    \n\t    console.log('ğŸ“¥ æ–‡æœ¬æ£€æµ‹ç»“æœ:', res)\n\t    \n\t    if (res.meta.status === 200) {\n\t      console.log('âœ… æ–‡æœ¬å†…å®¹å®‰å…¨')\n\t      return true\n\t    } else {\n\t      console.warn('ğŸš« æ–‡æœ¬å†…å®¹è¿è§„:', res.meta.msg)\n\t      return false\n\t    }\n\t    \n\t  } catch (err) {\n\t    console.error('ğŸ’¥ æ–‡æœ¬æ£€æµ‹å‡ºé”™:', err)\n\t    \n\t    uni.showToast({\n\t      title: 'æ–‡æœ¬æ£€æµ‹å¤±è´¥ï¼Œè¯·é‡è¯•',\n\t      icon: 'none',\n\t      duration: 2000\n\t    })\n\t    \n\t    return false\n\t  }\n\t},\n\t\n    async uploadImages(filePaths) {\n      if (!filePaths || filePaths.length === 0) {\n        return [];\n      }\n    \n      this.uploading = true;\n      uni.showLoading({\n        title: `ä¸Šä¼ ä¸­ 0/${filePaths.length}`,\n        mask: true\n      });\n    \n      try {\n        const uploadedUrls = [];\n    \n        for (let i = 0; i < filePaths.length; i++) {\n          const filePath = filePaths[i];\n    \n          uni.showLoading({\n            title: `ä¸Šä¼ ä¸­ ${i + 1}/${filePaths.length}`,\n            mask: true\n          });\n    \n          console.log(`[${i + 1}] è·å–ä¸Šä¼ å‡­è¯...`);\n          const { data: tokenRes } = await uni.$http.get('/upload/token', {\n            openid: this.openid,\n            fileType: 'image'\n          });\n    \n          if (tokenRes.meta.status !== 200) {\n            throw new Error('è·å–ä¸Šä¼ å‡­è¯å¤±è´¥');\n          }\n    \n          const fileContent = await new Promise((resolve, reject) => {\n            uni.getFileSystemManager().readFile({\n              filePath: filePath,\n              encoding: 'base64',\n              success: (res) => resolve(res.data),\n              fail: reject\n            });\n          });\n    \n          await new Promise((resolve, reject) => {\n            uni.request({\n              url: tokenRes.message.publicUrl,\n              method: 'PUT',\n              header: {\n                'Content-Type': 'application/octet-stream'\n              },\n              data: uni.base64ToArrayBuffer(fileContent),\n              success: (res) => {\n                if (res.statusCode === 200) {\n                  resolve(res);\n                } else {\n                  reject(new Error(`ä¸Šä¼ å¤±è´¥: ${res.statusCode}`));\n                }\n              },\n              fail: reject\n            });\n          });\n    \n          uploadedUrls.push(tokenRes.message.publicUrl);\n          console.log(`[${i + 1}] ä¸Šä¼ æˆåŠŸ:`, tokenRes.message.publicUrl);\n        }\n    \n        this.imageUrls = this.imageUrls.concat(uploadedUrls);\n    \n        uni.hideLoading();\n        uni.showToast({\n          title: 'å›¾ç‰‡ä¸Šä¼ æˆåŠŸ',\n          icon: 'success',\n          duration: 1500\n        });\n    \n        console.log('âœ… æ‰€æœ‰å›¾ç‰‡ä¸Šä¼ å®Œæˆ:', this.imageUrls);\n        return uploadedUrls;\n    \n      } catch (error) {\n        console.error('[ERROR] ä¸Šä¼ å¤±è´¥:', error);\n        uni.hideLoading();\n        uni.showToast({\n          title: error.message || 'ä¸Šä¼ å¤±è´¥',\n          icon: 'none',\n          duration: 3000\n        });\n    \n        filePaths.forEach(path => {\n          const index = this.selectedImages.indexOf(path);\n          if (index > -1) {\n            this.selectedImages.splice(index, 1);\n          }\n        });\n    \n        return [];\n      } finally {\n        this.uploading = false;\n      }\n    },\n    \n    deleteImage(index) {\n      if (this.isPublishing) return\n      \n      const deletedImage = this.selectedImages[index];\n      \n      if (deletedImage === this.generatedBgImage) {\n        this.generatedBgImage = '';\n      }\n      \n      this.selectedImages.splice(index, 1);\n      this.imageUrls.splice(index, 1);\n      this.imageCheckStatus.splice(index, 1); // ğŸ”¥ æ–°å¢ï¼šåˆ é™¤æ£€æµ‹çŠ¶æ€\n      \n      uni.showToast({\n        title: 'å·²åˆ é™¤',\n        icon: 'success',\n        duration: 1000\n      })\n    },\n\n    \n    // ğŸ”¥ åˆ†ç±»é€‰æ‹©é€»è¾‘ï¼ˆUIå±‚é¢ä»ä½¿ç”¨æ•°ç»„ï¼‰\n    selectCategory(category) {\n      const index = this.selectedCategory.indexOf(category);\n      \n      if (index > -1) {\n        // å·²é€‰ä¸­ï¼Œå–æ¶ˆé€‰ä¸­\n        this.selectedCategory.splice(index, 1);\n        \n        // å¦‚æœå–æ¶ˆçš„æ˜¯\"äºŒæ‰‹\"ï¼Œæ¸…é™¤å•†å“å…³è”\n        if (category === 'äºŒæ‰‹') {\n          this.enableGoodsLink = false;\n          this.selectedGoods = null;\n          this.relatedGoodsId = null;\n        }\n      } else {\n        // æœªé€‰ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦è¶…è¿‡3ä¸ª\n        if (this.selectedCategory.length >= 3) {\n          uni.showToast({\n            title: 'æœ€å¤šåªèƒ½é€‰æ‹©3ä¸ªåˆ†ç±»',\n            icon: 'none',\n            duration: 1500\n          });\n          return;\n        }\n        \n        // æ·»åŠ é€‰ä¸­\n        this.selectedCategory.push(category);\n      }\n      \n      console.log('ğŸ“ å½“å‰é€‰ä¸­åˆ†ç±»ï¼ˆæ•°ç»„ï¼‰:', this.selectedCategory);\n    },\n    \n    showDepartmentPicker(type) {\n      if (type === 'exclude' && this.includeDepartment) {\n        uni.showToast({\n          title: 'å·²è®¾ç½®\"åªå‘å¸ƒåˆ°\"ï¼Œä¸èƒ½åŒæ—¶è®¾ç½®',\n          icon: 'none'\n        });\n        return;\n      }\n    \n      if (type === 'include' && this.excludeDepartments.length > 0) {\n        uni.showToast({\n          title: 'å·²è®¾ç½®\"ä¸å‘å¸ƒåˆ°\"ï¼Œä¸èƒ½åŒæ—¶è®¾ç½®',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      if (type === 'include' && !this.userBase.major) {\n        uni.showToast({\n          title: 'æ‚¨çš„ä¸ªäººä¿¡æ¯ä¸­æœªè®¾ç½®é™¢ç³»',\n          icon: 'none',\n          duration: 2000\n        });\n        return;\n      }\n    \n      this.modalType = type;\n    \n      if (type === 'exclude') {\n        this.tempSelectedDepartments = [...this.excludeDepartments];\n      } else {\n        this.tempSelectedDepartment = this.includeDepartment;\n      }\n    \n      this.showModal = true;\n    },\n    \n    closeModal() {\n      this.showModal = false;\n      this.tempSelectedDepartments = [];\n      this.tempSelectedDepartment = '';\n    },\n    \n    isDepartmentSelected(dept) {\n      if (this.modalType === 'exclude') {\n        return this.tempSelectedDepartments.includes(dept);\n      } else {\n        return this.tempSelectedDepartment === dept;\n      }\n    },\n    \n    toggleDepartment(dept) {\n      if (this.modalType === 'exclude') {\n        const index = this.tempSelectedDepartments.indexOf(dept);\n        if (index > -1) {\n          this.tempSelectedDepartments.splice(index, 1);\n        } else {\n          this.tempSelectedDepartments.push(dept);\n        }\n      } else {\n        if (this.tempSelectedDepartment === dept) {\n          this.tempSelectedDepartment = '';\n        } else {\n          this.tempSelectedDepartment = dept;\n        }\n      }\n    },\n    \n    confirmDepartments() {\n      if (this.modalType === 'exclude') {\n        this.excludeDepartments = [...this.tempSelectedDepartments];\n      } else {\n        this.includeDepartment = this.tempSelectedDepartment;\n      }\n      this.closeModal();\n    },\n    \n    removeDepartment(type, index) {\n      if (type === 'exclude') {\n        this.excludeDepartments.splice(index, 1);\n      }\n    },\n    \n    clearIncludeDepartment() {\n      this.includeDepartment = '';\n    },\n    \n    validateForm() {\n\t\t// ä½¿ç”¨çº¯å†…å®¹ï¼ˆä¸åŒ…å«æ ‡ç­¾ï¼‰\n\t\t    const pureContent = this.postContent.trim();\n\t\t\n\t\t  if (!pureContent && this.selectedImages.length === 0) {\n\t\t        uni.showToast({\n\t\t          title: 'è¯·è¾“å…¥å¸–å­å†…å®¹æˆ–ä¸Šä¼ å›¾ç‰‡',\n\t\t          icon: 'none'\n\t\t        });\n\t\t        return false;\n\t\t      }\n\t\t\n\t\tif (pureContent.length > 500) {\n\t\t      uni.showToast({\n\t\t        title: 'å†…å®¹é•¿åº¦ä¸èƒ½è¶…è¿‡500å­—',\n\t\t        icon: 'none'\n\t\t      });\n\t\t      return false;\n\t\t    }\n\t\t  \n\n      if (!pureContent) {\n        uni.showToast({\n          title: 'è¯·è¾“å…¥å¸–å­å†…å®¹',\n          icon: 'none'\n        });\n        return false;\n      }\n    \n      if (pureContent.length < 1) {\n        uni.showToast({\n          title: 'å†…å®¹ä¸èƒ½ä¸ºç©º',\n          icon: 'none'\n        });\n        return false;\n      }\n\n      if (this.selectedImages.length > 9) {\n        uni.showToast({\n          title: 'æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ å›¾ç‰‡',\n          icon: 'none'\n        });\n        return false;\n      }\n    \n      if (this.enableContact && !this.contactInfo.trim()) {\n        uni.showToast({\n          title: 'è¯·è¾“å…¥è”ç³»æ–¹å¼',\n          icon: 'none'\n        });\n        return false;\n      }\n    \n      if (this.enableContact && this.contactInfo.trim().length > 50) {\n        uni.showToast({\n          title: 'è”ç³»æ–¹å¼é•¿åº¦ä¸èƒ½è¶…è¿‡50å­—ç¬¦',\n          icon: 'none'\n        });\n        return false;\n      }\n      \n      // ğŸ”¥ ä¿®æ”¹ï¼šæ£€æŸ¥\"äºŒæ‰‹\"æ ‡ç­¾çš„å•†å“å…³è”\n      if (this.selectedTagsInContent.includes('äºŒæ‰‹') && this.enableGoodsLink && !this.relatedGoodsId) {\n        uni.showToast({\n          title: 'è¯·é€‰æ‹©è¦å…³è”çš„å•†å“',\n          icon: 'none'\n        });\n        return false;\n      }\n    \n      if (this.excludeDepartments.length > 0 && this.includeDepartment) {\n        uni.showToast({\n          title: 'ä¸èƒ½åŒæ—¶è®¾ç½®\"ä¸å‘å¸ƒåˆ°\"å’Œ\"åªå‘å¸ƒåˆ°\"',\n          icon: 'none'\n        });\n        return false;\n      }\n    \n      return true;\n    },\n    \n  async publishPost() {\n    try {\n      console.log('[0] æ£€æŸ¥ç”¨æˆ·è®¤è¯çŠ¶æ€...')\n      console.log('ç”¨æˆ·è®¤è¯çŠ¶æ€:', this.userBase.is_verified)\n  \n      if (!this.userBase || this.userBase.is_verified !== 1) {\n        let title = 'è®¤è¯æé†’'\n        let content = 'å‘å¸ƒå¸–å­éœ€è¦å®Œæˆæ ¡å›­è®¤è¯,æ˜¯å¦å‰å¾€è®¤è¯?'\n  \n        switch (this.userBase?.is_verified) {\n          case 0:\n            content = 'å‘å¸ƒå¸–å­éœ€è¦å®Œæˆæ ¡å›­è®¤è¯,æ˜¯å¦å‰å¾€è®¤è¯?'\n            break\n          case 2:\n            title = 'å®¡æ ¸ä¸­'\n            content = 'æ‚¨çš„è®¤è¯ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­,æš‚æ—¶æ— æ³•å‘å¸ƒå¸–å­'\n            uni.showToast({\n              title: 'è®¤è¯å®¡æ ¸ä¸­,æš‚æ—¶æ— æ³•å‘å¸ƒ',\n              icon: 'none',\n              duration: 2000\n            })\n            return\n          case 3:\n            content = 'æ‚¨çš„è®¤è¯ç”³è¯·è¢«æ‹’ç»,è¯·é‡æ–°æäº¤è®¤è¯ç”³è¯·'\n            break\n          default:\n            content = 'å‘å¸ƒå¸–å­éœ€è¦å®Œæˆæ ¡å›­è®¤è¯,æ˜¯å¦å‰å¾€è®¤è¯?'\n        }\n  \n        if (this.userBase?.is_verified !== 2) {\n          uni.showModal({\n            title: title,\n            content: content,\n            confirmText: 'å»è®¤è¯',\n            cancelText: 'å–æ¶ˆ',\n            success: (res) => {\n              if (res.confirm) {\n                uni.navigateTo({\n                  url: '/subpkg/verification/verification'\n                })\n              }\n            }\n          })\n        }\n        return\n      }\n  \n      if (!this.validateForm()) {\n        return;\n      }\n\t\n\t// ğŸ”¥ æ–°å¢ï¼šæ£€æŸ¥å›¾ç‰‡æ˜¯å¦è¿˜åœ¨æ£€æµ‹ä¸­\n\t    const stillChecking = this.imageCheckStatus.some(status => status.checking)\n\t\tif (stillChecking) {\n\t\t      uni.showModal({\n\t\t        title: 'è¯·ç¨å€™',\n\t\t        content: 'å›¾ç‰‡æ­£åœ¨æ£€æµ‹ä¸­ï¼Œè¯·ç¨åå†è¯•',\n\t\t        showCancel: false,\n\t\t        confirmText: 'æˆ‘çŸ¥é“äº†'\n\t\t      })\n\t\t      return\n\t\t    }\n\t\t    \n\t\t    // ğŸ”¥ æ–°å¢ï¼šæ£€æŸ¥æ˜¯å¦æœ‰è¿è§„å›¾ç‰‡\n\t\t    const hasUnsafeImages = this.imageCheckStatus.some(status => status.safe === false)\n\t\t    \n\t\t    if (hasUnsafeImages) {\n\t\t      uni.showModal({\n\t\t        title: 'å›¾ç‰‡è¿è§„',\n\t\t        content: 'å­˜åœ¨è¿è§„å›¾ç‰‡ï¼Œè¯·åˆ é™¤åé‡è¯•',\n\t\t        showCancel: false,\n\t\t        confirmText: 'æˆ‘çŸ¥é“äº†'\n\t\t      })\n\t\t      return\n\t\t    }\n\t\t\t\n\t\t\t// ğŸ”¥ æ–°å¢ï¼šæ–‡æœ¬å†…å®¹å®‰å…¨æ£€æµ‹\n\t\t\t    console.log('[1] æ£€æµ‹æ–‡æœ¬å†…å®¹å®‰å…¨æ€§...')\n\t\t\t    uni.showLoading({\n\t\t\t      title: 'æ£€æµ‹æ–‡æœ¬å†…å®¹...',\n\t\t\t      mask: true\n\t\t\t    })\n\t\t\t    \n\t\t\t    const pureContent = this.postContent.trim()\n\t\t\t    const isTextSafe = await this.checkTextSafety(pureContent)\n\t\t\t    \n\t\t\t    uni.hideLoading()\n\t\t\t    \n\t\t\t    if (!isTextSafe) {\n\t\t\t      uni.showModal({\n\t\t\t        title: 'å†…å®¹è¿è§„',\n\t\t\t        content: 'å¸–å­å†…å®¹åŒ…å«è¿è§„å†…å®¹ï¼Œè¯·ä¿®æ”¹åé‡è¯•',\n\t\t\t        showCancel: false,\n\t\t\t        confirmText: 'æˆ‘çŸ¥é“äº†'\n\t\t\t      })\n\t\t\t      return\n\t\t\t    }\n\t\t\t    \n\t\t\t    console.log('âœ… æ–‡æœ¬å†…å®¹æ£€æµ‹é€šè¿‡')\n\t\t\t\n      if (!this.openid) {\n        uni.showToast({\n          title: 'è¯·å…ˆç™»å½•',\n          icon: 'none'\n        });\n        return;\n      }\n  \n      if (this.uploading) {\n        uni.showToast({\n          title: 'å›¾ç‰‡ä¸Šä¼ ä¸­,è¯·ç¨å€™',\n          icon: 'none'\n        });\n        return;\n      }\n  \n      if (this.isPublishing) return;\n  \n      this.isPublishing = true;\n  \n      uni.showLoading({\n        title: 'å‘å¸ƒä¸­...',\n        mask: true\n      });\n  \n      const finalImages = [...this.imageUrls];\n      \n\t   // âœ… ä½¿ç”¨çº¯å†…å®¹ï¼ˆä¸åŒ…å«æ ‡ç­¾ï¼‰\n\t    const pureContent1 = this.postContent.trim();\n\t        \n\t\t\t\n     // âœ… æ ‡ç­¾è½¬ä¸ºå­—ç¬¦ä¸²\n           const propertiesString = this.selectedTagsInContent.length > 0 \n             ? this.selectedTagsInContent.join(',') \n             : 'null';\n      \n     console.log('ğŸ“¤ å‘é€æ•°æ®:', {\n             content: pureContent1,  // çº¯å†…å®¹\n             properties: propertiesString,  // æ ‡ç­¾å­—ç¬¦ä¸²\n           });\n  \n      const { data: res } = await uni.$http.post('/posts/create', {\n        openid: this.openid,\n        nickname: this.userBase.nickname || 'ç”¨æˆ·',\n        avatar: this.userBase.avatarUrl || '',\n        content: pureContent1,  // âœ… åªå‘é€çº¯å†…å®¹\n        properties: propertiesString,  // âœ… æ ‡ç­¾å•ç‹¬å‘é€\n        images: finalImages,\n        excludeDepartments: this.excludeDepartments,\n        includeDepartment: this.includeDepartment,\n        contactInfo: this.enableContact ? this.contactInfo.trim() : null,\n        relatedGoodsId: this.enableGoodsLink ? this.relatedGoodsId : null,\n        isTopicDiscussion: this.isTopicDiscussion,\n\t\tonlyMyself: this.onlyMyself ? 1 : 0  // ğŸ”¥ æ–°å¢è¿™ä¸€è¡Œ\n      });\n  \n      uni.hideLoading();\n  \n      if (res.meta.status === 201) {\n\t\t  // ğŸ”¥ æ–°å¢ï¼šä¿å­˜å½“å‰å›¾ç‰‡çŠ¶æ€\n\t\t        const hasImages = this.selectedImages.length > 0;\n\t\t\t\t\n\t\t\t\t// ğŸ”¥ æ–°å¢ï¼šæ„å»ºå®Œæ•´çš„ post å¯¹è±¡\n\t\t\t\t      const postData = {\n\t\t\t\t        post_id: res.message.post_id,\n\t\t\t\t        openid: this.openid,\n\t\t\t\t        nickname: this.userBase.nickname || 'ç”¨æˆ·',\n\t\t\t\t        avatar: this.userBase.avatarUrl || '',\n\t\t\t\t        content: pureContent1,\n\t\t\t\t        properties: propertiesString,\n\t\t\t\t        images: finalImages,\n\t\t\t\t        excludeDepartments: this.excludeDepartments,\n\t\t\t\t        includeDepartment: this.includeDepartment,\n\t\t\t\t        contactInfo: this.enableContact ? this.contactInfo.trim() : null,\n\t\t\t\t        relatedGoodsId: this.enableGoodsLink ? this.relatedGoodsId : null,\n\t\t\t\t        isTopicDiscussion: this.isTopicDiscussion,\n\t\t\t\t        onlyMyself: this.onlyMyself ? 1 : 0,\n\t\t\t\t        created_at: new Date().toISOString(),\n\t\t\t\t        // æ·»åŠ å…¶ä»–å¯èƒ½éœ€è¦çš„å­—æ®µ\n\t\t\t\t        likes_count: 0,\n\t\t\t\t        comments_count: 0,\n\t\t\t\t        shares_count: 0\n\t\t\t\t      };\n\t\t\t\t\t  \n\t\t\t\t\t  // ğŸ”¥ æ ¸å¿ƒæ”¹åŠ¨ï¼šä½¿ç”¨ Vuex å­˜å‚¨æ•°æ®\n\t\t\t\t\t        this.$store.commit('m_posts/setNewPost', {\n\t\t\t\t\t          post: postData,\n\t\t\t\t\t          targetPage: hasImages ? 'home' : 'treehole'\n\t\t\t\t\t        });\n        // æ¸…ç©ºåˆ†ç±»æ•°ç»„\n        this.selectedTagsInContent = [];\n        this.availableTags = ['æ—¥å¸¸', 'äºŒæ‰‹', 'è¯¢é—®', 'åæ§½'];\n        // æ¸…ç©ºå…¶ä»–è¡¨å•\n        this.postContent = '';\n        this.selectedImages = [];\n        this.imageUrls = [];\n        this.excludeDepartments = [];\n        this.includeDepartment = '';\n        this.enableContact = false;\n        this.contactInfo = '';\n        this.enableGoodsLink = false;\n        this.selectedGoods = null;\n        this.relatedGoodsId = null;\n        this.generatedBgImage = '';\n\t\tthis.onlyMyself = false;  // ğŸ”¥ æ–°å¢:é‡ç½®ä»…è‡ªå·±å¯è§çŠ¶æ€\n\t\t \n\t\t \n        uni.showToast({\n          title: 'å‘å¸ƒæˆåŠŸ',\n          icon: 'success',\n          duration: 1500\n        });\n\t\t\n\t\t// æ¸…ç©ºæ£€æµ‹çŠ¶æ€\n\t\tthis.imageCheckStatus = []\n\t\tthis.allImagesChecked = false\n\t\t\n\t\t      console.log('ğŸ“Š æ˜¯å¦æœ‰å›¾ç‰‡:', hasImages);\n  \n        console.log('âœ… å‘å¸ƒæˆåŠŸ,å¸–å­ID:', res.message.post_id);\n\t\t\n\t\t// ğŸ”¥ æ ¸å¿ƒæ”¹åŠ¨ï¼šç®€åŒ–è·³è½¬é€»è¾‘ï¼ˆä¸ä¼ å‚æ•°ï¼‰\n\t\t      setTimeout(() => {\n\t\t        if (hasImages) {\n\t\t          console.log('ğŸ“¸ æœ‰å›¾ç‰‡ï¼Œè·³è½¬åˆ° home é¡µé¢');\n\t\t          uni.switchTab({\n\t\t            url: '/pages/home/home', // ä¸å¸¦å‚æ•°\n\t\t            success: () => {\n\t\t              console.log('âœ… æˆåŠŸè·³è½¬åˆ° home é¡µé¢');\n\t\t            }\n\t\t          });\n\t\t        } else {\n\t\t          console.log('ğŸ’¬ æ— å›¾ç‰‡ï¼Œè·³è½¬åˆ° treehole é¡µé¢');\n\t\t          uni.switchTab({\n\t\t            url: '/pages/treehole/treehole', // ä¸å¸¦å‚æ•°\n\t\t            success: () => {\n\t\t              console.log('âœ… æˆåŠŸè·³è½¬åˆ° treehole é¡µé¢');\n\t\t            }\n\t\t          });\n\t\t        }\n\t\t      }, 1500);\n\t\t\t  \n\t\t\n      } else {\n        uni.showToast({\n          title: res.meta.msg || 'å‘å¸ƒå¤±è´¥',\n          icon: 'none'\n        });\n      }\n  \n    } catch (error) {\n      uni.hideLoading();\n      console.error('âŒ å‘å¸ƒå¸–å­å¤±è´¥:', error);\n      uni.showToast({\n        title: 'å‘å¸ƒå¤±è´¥,è¯·é‡è¯•',\n        icon: 'none'\n      });\n    } finally {\n      this.isPublishing = false;\n    }\n  }\n  },\n  \n  async onShow() {\n    await this.checkVerificationStatus()\n  },\n  \n  async onLoad(options) {\n    if (options.content) {\n      try {\n        this.postContent = decodeURIComponent(options.content)\n      } catch (error) {\n        console.error('âŒ è§£æ URL å‚æ•°å¤±è´¥:', error)\n      }\n    }\n    \n\t// ğŸ”¥ æ–°å¢ï¼šæ¥æ”¶å›¾ç‰‡æ•°æ®\n\t  if (options.images) {\n\t    try {\n\t      const images = JSON.parse(decodeURIComponent(options.images))\n\t      if (Array.isArray(images) && images.length > 0) {\n\t        this.selectedImages = images\n\t        this.imageUrls = images\n\t        console.log('âœ… å·²æ¥æ”¶å›¾ç‰‡:', images)\n\t      }\n\t    } catch (error) {\n\t      console.error('âŒ è§£æå›¾ç‰‡æ•°æ®å¤±è´¥:', error)\n\t    }\n\t  }\n\t  \n    const eventChannel = this.getOpenerEventChannel()\n    if (eventChannel) {\n      eventChannel.on('topicImageData', (data) => {\n        console.log('ğŸ“¥ æ”¶åˆ°è¯é¢˜å›¾ç‰‡æ•°æ®:', data)\n        \n        if (data.content) {\n          this.postContent = data.content\n        }\n        \n\t\t// ğŸ”¥ ä¼˜å…ˆä½¿ç”¨ images æ•°ç»„ï¼ˆåŒ…å«æ‰€æœ‰å›¾ç‰‡ï¼‰\n\t\t    if (data.images && Array.isArray(data.images) && data.images.length > 0) {\n\t\t      this.selectedImages = data.images\n\t\t      this.imageUrls = data.images\n\t\t      console.log('âœ… å·²æ¥æ”¶æ‰€æœ‰å›¾ç‰‡ï¼ˆèƒŒæ™¯å›¾ + topic å›¾ç‰‡ï¼‰:', data.images)\n\t\t    } \n\t\t\t\n        else if (data.imageUrl) {\n          this.selectedImages = [data.imageUrl]\n          this.imageUrls = [data.imageUrl]\n          this.generatedBgImage = data.imageUrl\n        }\n        \n\t\tif (data.isTopic !== undefined) {\n\t\t      this.isTopic = data.isTopic\n\t\t    }\n\t\t\t\n        uni.showToast({\n          title: 'è¯é¢˜èƒŒæ™¯å›¾å·²æ·»åŠ ',\n          icon: 'success',\n          duration: 1500\n        })\n      })\n      \n      eventChannel.on('topicTextData', (data) => {\n        console.log('ğŸ“¥ æ”¶åˆ°çº¯æ–‡æœ¬è¯é¢˜æ•°æ®:', data)\n        \n        if (data.content) {\n          this.postContent = data.content\n        }\n        \n        uni.showToast({\n          title: 'è¯é¢˜å†…å®¹å·²æ·»åŠ ',\n          icon: 'success',\n          duration: 1000\n        })\n      })\n      \n      eventChannel.on('uploadImages', (data) => {\n        if (data.images && data.images.length > 0) {\n          this.selectedImages = data.images\n          this.uploadImages(data.images)\n        }\n      })\n    }\n    \n    await this.checkVerificationStatus()\n  }\n}\n</script>\n        \n        <style lang=\"scss\">\n        .publish-page {\n          min-height: 100vh;\n          background-color: #f5f5f5;\n          padding: 32rpx;\n          padding-bottom: 160rpx;\n        }\n        \n        // ğŸ¯ æ–°å¢ï¼šå†…å®¹åŒºåŸŸæ•´åˆæ ·å¼\n        .content-section {\n          background-color: #ffffff;\n          border-radius: 16rpx;\n          padding: 32rpx;\n          \n          // é¡¶éƒ¨å·¥å…·æ \n          .content-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 24rpx;\n            \n            .header-title {\n              font-size: 32rpx;\n              font-weight: 600;\n              color: #333333;\n            }\n            \n            // è¯é¢˜è®¨è®ºåˆ‡æ¢æŒ‰é’®ï¼ˆç´§å‡‘ç‰ˆï¼‰\n            .topic-toggle-btn {\n              display: flex;\n              align-items: center;\n              gap: 8rpx;\n              padding: 12rpx 20rpx;\n              background-color: #f8f9ff;\n              border: 2rpx solid #e0e7ff;\n              border-radius: 24rpx;\n              transition: all 0.3s;\n              \n              &.active {\n                background: linear-gradient(135deg, #f0f4ff 0%, #e8edff 100%);\n                border-color: #C00000;\n                \n                .toggle-icon {\n                  transform: scale(1.1);\n                }\n                \n                .toggle-label {\n                  color: #C00000;\n                  font-weight: 600;\n                }\n              }\n              \n              &:active {\n                transform: scale(0.96);\n              }\n              \n              .toggle-icon {\n                font-size: 32rpx;\n                transition: transform 0.3s;\n              }\n              \n              .toggle-label {\n                font-size: 24rpx;\n                color: #666666;\n                transition: all 0.3s;\n                white-space: nowrap;\n              }\n            }\n          }\n          \n          // å†…å®¹è¾“å…¥æ¡†\n          .content-input {\n            width: 100%;\n            min-height: 280rpx;\n            font-size: 32rpx;\n            line-height: 1.6;\n            color: #333333;\n            box-sizing: border-box;\n            border: none;\n            outline: none;\n          }\n          \n          .content-placeholder {\n            color: #c0c0c0;\n          }\n          \n          // è¯é¢˜è®¨è®ºæç¤º\n          .topic-hint {\n            display: flex;\n            align-items: center;\n            gap: 12rpx;\n            padding: 16rpx 20rpx;\n            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n            border-radius: 12rpx;\n            margin-top: 16rpx;\n            border-left: 4rpx solid #fbbf24;\n            \n            .hint-icon {\n              font-size: 28rpx;\n              flex-shrink: 0;\n            }\n            \n            .hint-text {\n              font-size: 24rpx;\n              color: #92400e;\n              line-height: 1.4;\n            }\n          }\n          \n    /* ğŸ”¥ ä¿®æ”¹å­—æ•°ç»Ÿè®¡æ ·å¼ */\n    .content-count {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16rpx 0;\n    \n      text {\n        font-size: 24rpx;\n        color: #999999;\n    \n        &.over-limit {\n          color: #ff4757;\n        }\n      }\n      \n      .tag-count {\n        color: #fbbf24;  /* ç±³é»„è‰² */\n        font-weight: 500;\n      }\n    }\n          \n          // å›¾ç‰‡ç½‘æ ¼æ ·å¼\n          .images-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 16rpx;\n          }\n          \n          .image-item {\n            position: relative;\n            width: 100%;\n            padding-bottom: 100%;\n          \n            .image {\n              position: absolute;\n              top: 0;\n              left: 0;\n              width: 100%;\n              height: 100%;\n              border-radius: 12rpx;\n              background-color: #f0f0f0;\n            }\n          \n            .delete-icon {\n              position: absolute;\n              top: -12rpx;\n              right: -12rpx;\n              width: 48rpx;\n              height: 48rpx;\n              background-color: rgba(0, 0, 0, 0.6);\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              z-index: 10;\n          \n              text {\n                font-size: 36rpx;\n                color: #ffffff;\n                line-height: 1;\n              }\n            }\n          }\n          \n          .add-image-btn {\n            width: 100%;\n            padding-bottom: 100%;\n            position: relative;\n            background-color: #f8f8f8;\n            border-radius: 12rpx;\n            border: 2rpx dashed #d9d9d9;\n            transition: all 0.3s;\n            \n            &:active {\n              background-color: #f0f0f0;\n              transform: scale(0.96);\n            }\n          \n            &.uploading {\n              background-color: #f0f2ff;\n              border-color: #C00000;\n          \n              .add-icon,\n              .add-text {\n                color: #C00000;\n              }\n            }\n          \n            .add-icon {\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -80%);\n              font-size: 56rpx;\n              color: #999999;\n            }\n          \n            .add-text {\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, 20%);\n              font-size: 22rpx;\n              color: #999999;\n              white-space: nowrap;\n            }\n          }\n          \n          // ç”ŸæˆèƒŒæ™¯å›¾æŒ‰é’®ï¼ˆç´§å‡‘ç‰ˆï¼‰\n          .generate-bg-btn {\n            width: 100%;\n            padding-bottom: 100%;\n            position: relative;\n            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n            border-radius: 12rpx;\n            border: 2rpx dashed #fbbf24;\n            transition: all 0.3s;\n          \n            &:active {\n              transform: scale(0.96);\n              background: linear-gradient(135deg, #fde68a 0%, #fcd34d 100%);\n            }\n          \n            .generate-icon {\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -80%);\n              font-size: 56rpx;\n            }\n          \n            .generate-text {\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, 20%);\n              font-size: 22rpx;\n              color: #92400e;\n              white-space: nowrap;\n              font-weight: 500;\n            }\n          }\n        }\n        \n        .category-section {\n          background-color: #ffffff;\n          border-radius: 16rpx;\n          padding: 32rpx;\n          margin-top: 24rpx;\n        \n          .section-title {\n            font-size: 30rpx;\n            color: #333333;\n            font-weight: 500;\n            margin-bottom: 24rpx;\n            display: block;\n          }\n        }\n        \n        .category-list {\n          display: flex;\n          gap: 16rpx;\n        }\n        \n        .category-item {\n          flex: 1;\n          padding: 20rpx 0;\n          background-color: #f5f5f5;\n          border-radius: 12rpx;\n          text-align: center;\n          border: 2rpx solid transparent;\n          transition: all 0.3s;\n\t\t  position: relative; // ğŸ”¥ æ–°å¢\n        \n          text {\n            font-size: 28rpx;\n            color: #666666;\n          }\n\t\t  // ğŸ”¥ æ–°å¢:é€‰ä¸­æ ‡è®°æ ·å¼\n\t\t    .check-icon {\n\t\t      position: absolute;\n\t\t      top: 8rpx;\n\t\t      right: 8rpx;\n\t\t      font-size: 24rpx;\n\t\t      color: #C00000;\n\t\t      font-weight: bold;\n\t\t    }\n\t\t\t\n        \n          &.active {\n            background-color: #f0f2ff;\n            border-color: #C00000;\n        \n            text {\n              color: #C00000;\n              font-weight: 500;\n            }\n          }\n        }\n        \n        .goods-link-section {\n          background-color: #ffffff;\n          border-radius: 16rpx;\n          padding: 32rpx;\n          margin-top: 24rpx;\n        \n          .section-title {\n            font-size: 30rpx;\n            color: #333333;\n            font-weight: 500;\n            margin-bottom: 24rpx;\n            display: block;\n          }\n        \n          .goods-link-toggle {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 4rpx 0;\n            margin-bottom: 24rpx;\n        \n            .toggle-label {\n              font-size: 28rpx;\n              color: #333333;\n            }\n        \n            .toggle-switch {\n              width: 92rpx;\n              height: 52rpx;\n              background-color: #e0e0e0;\n              border-radius: 26rpx;\n              position: relative;\n              transition: all 0.3s;\n        \n              &.active {\n                background-color: #C00000;\n              }\n        \n              .toggle-circle {\n                width: 48rpx;\n                height: 48rpx;\n                background-color: #ffffff;\n                border-radius: 50%;\n                position: absolute;\n                top: 2rpx;\n                left: 2rpx;\n                transition: all 0.3s;\n                box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.15);\n              }\n        \n              &.active .toggle-circle {\n                transform: translateX(40rpx);\n              }\n            }\n          }\n        \n          .selected-goods {\n            .goods-card {\n              display: flex;\n              align-items: center;\n              background-color: #f8f9ff;\n              border: 2rpx solid #e0e7ff;\n              border-radius: 16rpx;\n              padding: 20rpx;\n              gap: 16rpx;\n        \n              &:active {\n                background-color: #f0f4ff;\n              }\n        \n              .goods-image {\n                width: 80rpx;\n                height: 80rpx;\n                border-radius: 12rpx;\n                background-color: #f0f0f0;\n                flex-shrink: 0;\n              }\n        \n              .goods-info {\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                gap: 6rpx;\n        \n                .goods-name {\n                  font-size: 26rpx;\n                  color: #333333;\n                  font-weight: 500;\n                  line-height: 1.3;\n                  display: -webkit-box;\n                  -webkit-box-orient: vertical;\n                  -webkit-line-clamp: 2;\n                  overflow: hidden;\n                }\n        \n                .goods-price {\n                  font-size: 28rpx;\n                  color: #C00000;\n                  font-weight: 600;\n                }\n              }\n        \n              .change-btn {\n                font-size: 24rpx;\n                color: #C00000;\n                padding: 8rpx 16rpx;\n                background-color: #ffffff;\n                border: 1rpx solid #C00000;\n                border-radius: 20rpx;\n              }\n            }\n          }\n        \n          .select-goods-btn {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            background-color: #f8f8f8;\n            border-radius: 16rpx;\n            border: 2rpx dashed #d9d9d9;\n            padding: 60rpx 0;\n            transition: all 0.3s;\n        \n            &:active {\n              background-color: #f0f0f0;\n            }\n        \n            .select-icon {\n              font-size: 64rpx;\n              margin-bottom: 16rpx;\n            }\n        \n            .select-text {\n              font-size: 28rpx;\n              color: #666666;\n            }\n          }\n        \n          .goods-tips {\n            margin-top: 16rpx;\n            padding: 12rpx;\n            background-color: #f0f9ff;\n            border-radius: 8rpx;\n            border-left: 4rpx solid #0ea5e9;\n        \n            text {\n              font-size: 24rpx;\n              color: #0369a1;\n              line-height: 1.5;\n            }\n          }\n        }\n        \n        .contact-section {\n          background-color: #ffffff;\n          border-radius: 16rpx;\n          padding: 32rpx;\n          margin-top: 24rpx;\n        \n          .section-title {\n            font-size: 30rpx;\n            color: #333333;\n            font-weight: 500;\n            margin-bottom: 24rpx;\n            display: block;\n          }\n        \n          .contact-toggle {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 4rpx 0;\n            margin-bottom: 24rpx;\n        \n            .toggle-label {\n              font-size: 28rpx;\n              color: #333333;\n            }\n        \n            .toggle-switch {\n              width: 92rpx;\n              height: 52rpx;\n              background-color: #e0e0e0;\n              border-radius: 26rpx;\n              position: relative;\n              transition: all 0.3s;\n        \n              &.active {\n                background-color: #C00000;\n              }\n        \n              .toggle-circle {\n                width: 48rpx;\n                height: 48rpx;\n                background-color: #ffffff;\n                border-radius: 50%;\n                position: absolute;\n                top: 2rpx;\n                left: 2rpx;\n                transition: all 0.3s;\n                box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.15);\n              }\n        \n              &.active .toggle-circle {\n                transform: translateX(40rpx);\n              }\n            }\n          }\n        \n          .contact-input-container {\n            .input-label {\n              display: flex;\n              align-items: center;\n              gap: 16rpx;\n              margin-bottom: 16rpx;\n        \n              text:first-child {\n                font-size: 28rpx;\n                color: #333333;\n              }\n        \n              .input-tip {\n                font-size: 24rpx;\n                color: #999999;\n              }\n            }\n        \n            .contact-input {\n              width: 100%;\n              height: 88rpx;\n              background-color: #f8f8f8;\n              border-radius: 12rpx;\n              padding: 0 24rpx;\n              font-size: 28rpx;\n              color: #333333;\n              box-sizing: border-box;\n              border: 2rpx solid transparent;\n              transition: all 0.3s;\n        \n              &:focus {\n                border-color: #C00000;\n                background-color: #ffffff;\n              }\n            }\n        \n            .input-placeholder {\n              color: #c0c0c0;\n            }\n        \n            .contact-tips {\n              margin-top: 16rpx;\n              padding: 12rpx;\n              background-color: #f0f9ff;\n              border-radius: 8rpx;\n              border-left: 4rpx solid #0ea5e9;\n        \n              text {\n                font-size: 24rpx;\n                color: #0369a1;\n                line-height: 1.5;\n              }\n            }\n          }\n        }\n        \n        .department-section {\n          background-color: #ffffff;\n          border-radius: 16rpx;\n          padding: 32rpx;\n          margin-top: 24rpx;\n        \n          .section-title {\n            font-size: 30rpx;\n            color: #333333;\n            font-weight: 500;\n            margin-bottom: 24rpx;\n            display: block;\n          }\n        \n          .department-option {\n            margin-bottom: 24rpx;\n        \n            &:last-of-type {\n              margin-bottom: 16rpx;\n            }\n        \n            .option-header {\n              display: flex;\n              justify-content: space-between;\n              align-items: center;\n              padding: 24rpx;\n              background-color: #f8f8f8;\n              border-radius: 12rpx;\n        \n              .option-label {\n                font-size: 28rpx;\n                color: #333333;\n              }\n        \n              .option-value {\n                display: flex;\n                align-items: center;\n                gap: 8rpx;\n        \n                .value-text {\n                  font-size: 26rpx;\n                  color: #999999;\n                  max-width: 400rpx;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                  white-space: nowrap;\n        \n                  &.selected {\n                    color: #C00000;\n                  }\n                }\n        \n                .arrow {\n                  font-size: 32rpx;\n                  color: #999999;\n                }\n              }\n            }\n        \n            .selected-tags {\n              display: flex;\n              flex-wrap: wrap;\n              gap: 12rpx;\n              margin-top: 16rpx;\n              padding: 0 8rpx;\n        \n              .tag-item {\n                display: flex;\n                align-items: center;\n                gap: 8rpx;\n                padding: 8rpx 16rpx;\n                border-radius: 20rpx;\n                font-size: 24rpx;\n        \n                &.exclude {\n                  background-color: #fff5f5;\n                  color: #C00000;\n                  border: 1rpx solid #ffe0e0;\n                }\n        \n                &.include {\n                  background-color: #f0f2ff;\n                  color: #667eea;\n                  border: 1rpx solid #d9dcff;\n        \n                  &.single {\n                    font-weight: 500;\n                  }\n                }\n        \n                .tag-close {\n                  font-size: 28rpx;\n                  font-weight: bold;\n                  line-height: 1;\n                }\n              }\n            }\n          }\n        \n\t\t/* ğŸ”¥ æ–°å¢:ä»…è‡ªå·±å¯è§é€‰é¡¹æ ·å¼ */\n\t\t.only-myself-option {\n\t\t  margin-top: 24rpx;\n\t\t  padding-top: 24rpx;\n\t\t  border-top: 1rpx solid #f0f0f0;\n\t\t  \n\t\t  .option-header {\n\t\t    display: flex;\n\t\t    justify-content: space-between;\n\t\t    align-items: center;\n\t\t    padding: 20rpx 0;\n\t\t    \n\t\t    .option-left {\n\t\t      flex: 1;\n\t\t      display: flex;\n\t\t      flex-direction: column;\n\t\t      gap: 8rpx;\n\t\t      \n\t\t      .option-label {\n\t\t        font-size: 28rpx;\n\t\t        color: #333333;\n\t\t        font-weight: 500;\n\t\t      }\n\t\t      \n\t\t      .option-desc {\n\t\t        font-size: 24rpx;\n\t\t        color: #999999;\n\t\t        line-height: 1.4;\n\t\t      }\n\t\t    }\n\t\t    \n\t\t    .toggle-switch {\n\t\t      width: 92rpx;\n\t\t      height: 52rpx;\n\t\t      background-color: #e0e0e0;\n\t\t      border-radius: 26rpx;\n\t\t      position: relative;\n\t\t      transition: all 0.3s;\n\t\t      flex-shrink: 0;\n\t\t      \n\t\t      &.active {\n\t\t        background-color: #C00000;\n\t\t      }\n\t\t      \n\t\t      .toggle-circle {\n\t\t        width: 48rpx;\n\t\t        height: 48rpx;\n\t\t        background-color: #ffffff;\n\t\t        border-radius: 50%;\n\t\t        position: absolute;\n\t\t        top: 2rpx;\n\t\t        left: 2rpx;\n\t\t        transition: all 0.3s;\n\t\t        box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.15);\n\t\t      }\n\t\t      \n\t\t      &.active .toggle-circle {\n\t\t        transform: translateX(40rpx);\n\t\t      }\n\t\t    }\n\t\t  }\n\t\t}\n\t\t\t\n          .department-tip {\n            padding: 16rpx;\n            background-color: #fff9e6;\n            border-radius: 8rpx;\n            border-left: 4rpx solid #ffc107;\n        \n            text {\n              font-size: 24rpx;\n              color: #ff9800;\n              line-height: 1.5;\n            }\n          }\n        }\n        \n        .publish-btn {\n          position: fixed;\n          bottom: 48rpx;\n          left: 32rpx;\n          right: 32rpx;\n          height: 96rpx;\n          background: linear-gradient(135deg, #C00000 0%, #C00000 100%);\n          border-radius: 48rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 8rpx 24rpx rgba(192, 0, 0, 0.4);\n          transition: all 0.3s;\n        \n          &:active {\n            transform: scale(0.98);\n          }\n        \n          &.disabled {\n            opacity: 0.6;\n            pointer-events: none;\n          }\n        \n          text {\n            font-size: 32rpx;\n            color: #ffffff;\n            font-weight: 500;\n          }\n        }\n        \n        .department-modal {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          z-index: 1000;\n          background-color: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: flex-end;\n          animation: fadeIn 0.3s ease;\n        \n          .modal-content {\n            width: 100%;\n            max-height: 80vh;\n            background-color: #ffffff;\n            border-radius: 32rpx 32rpx 0 0;\n            display: flex;\n            flex-direction: column;\n            animation: slideUp 0.3s ease;\n        \n            .modal-header {\n              display: flex;\n              justify-content: space-between;\n              align-items: center;\n              padding: 32rpx;\n              border-bottom: 1rpx solid #f0f0f0;\n        \n              .modal-title {\n                font-size: 32rpx;\n                color: #333333;\n                font-weight: 500;\n              }\n        \n              .modal-close {\n                font-size: 48rpx;\n                color: #999999;\n                line-height: 1;\n                padding: 0 16rpx;\n              }\n            }\n        \n            .modal-body {\n              flex: 1;\n              overflow-y: auto;\n              padding: 16rpx 0;\n        \n              .department-item {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 24rpx 32rpx;\n                border-bottom: 1rpx solid #f5f5f5;\n                transition: background-color 0.3s;\n        \n                &:active {\n                  background-color: #f8f8f8;\n                }\n        \n                &.selected {\n                  background-color: #f0f2ff;\n        \n                  .department-name {\n                    color: #C00000;\n                    font-weight: 500;\n                  }\n                }\n        \n                .department-name {\n                  font-size: 28rpx;\n                  color: #333333;\n                }\n        \n                .department-check {\n                  font-size: 32rpx;\n                  color: #C00000;\n                  font-weight: bold;\n                }\n              }\n              \n              .empty-tip {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                padding: 120rpx 0;\n                \n                .empty-icon {\n                  font-size: 120rpx;\n                  margin-bottom: 24rpx;\n                  opacity: 0.5;\n                }\n                \n                .empty-text {\n                  font-size: 28rpx;\n                  color: #999999;\n                }\n              }\n            }\n        \n            .modal-footer {\n              display: flex;\n              gap: 16rpx;\n              padding: 24rpx 32rpx;\n              border-top: 1rpx solid #f0f0f0;\n        \n              .modal-btn {\n                flex: 1;\n                height: 88rpx;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 44rpx;\n                font-size: 30rpx;\n                transition: all 0.3s;\n        \n                &.cancel {\n                  background-color: #f5f5f5;\n        \n                  text {\n                    color: #666666;\n                  }\n        \n                  &:active {\n                    background-color: #e8e8e8;\n                  }\n                }\n        \n                &.confirm {\n                  background: linear-gradient(135deg, #C00000 0%, #C00000 100%);\n        \n                  text {\n                    color: #ffffff;\n                    font-weight: 500;\n                  }\n        \n                  &:active {\n                    opacity: 0.8;\n                  }\n                }\n              }\n            }\n          }\n        }\n        \n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        \n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n\n\t/* ğŸ”¥ ä¿®æ”¹ï¼šå¯é€‰æ ‡ç­¾åŒºåŸŸï¼ˆå­—æ•°ç»Ÿè®¡ä¸‹æ–¹ï¼‰ */\n\t.available-tags {\n\t  display: flex;\n\t  flex-wrap: wrap;\n\t  gap: 12rpx;\n\t  margin: 24rpx 0;\n\t  padding: 16rpx;\n\t  background-color: rgba(0, 0, 0, 0.05);  /* é€æ˜é»‘è‰²èƒŒæ™¯ */\n\t  border-radius: 12rpx;\n\t  \n\t  .tag-item.available {\n\t    padding: 10rpx 20rpx;\n\t    background-color: rgba(0, 0, 0, 0.6);  /* åŠé€æ˜é»‘è‰² */\n\t    border-radius: 20rpx;\n\t    transition: all 0.3s ease;\n\t    \n\t    .tag-text {\n\t      font-size: 26rpx;\n\t      color: #ffffff;\n\t      font-weight: 500;\n\t    }\n\t    \n\t    &:active {\n\t      transform: scale(0.95);\n\t      background-color: rgba(0, 0, 0, 0.8);\n\t    }\n\t  }\n\t}\n\t\t\n\t\t/* ğŸ”¥ æ–°å¢ï¼šå†…å®¹ä¸æ ‡ç­¾è”åˆæ˜¾ç¤º */\n\t\t.content-with-tags {\n\t\t  display: flex;\n\t\t  flex-wrap: wrap;\n\t\t  align-items: center;\n\t\t  gap: 8rpx;\n\t\t  min-height: 60rpx;\n\t\t  padding: 16rpx 0;\n\t\t  border-bottom: 1rpx solid #f0f0f0;\n\t\t  \n\t\t  .content-text {\n\t\t    font-size: 32rpx;\n\t\t    color: #333333;\n\t\t    line-height: 1.6;\n\t\t  }\n\t\t  \n\t\t  .inline-tags {\n\t\t    display: flex;\n\t\t    flex-wrap: wrap;\n\t\t    gap: 8rpx;\n\t\t    \n\t\t    .tag-badge {\n\t\t      display: inline-flex;\n\t\t      align-items: center;\n\t\t      padding: 6rpx 16rpx;\n\t\t      background-color: #fef3c7;  /* ç±³é»„è‰²èƒŒæ™¯ */\n\t\t      border-radius: 16rpx;\n\t\t      border: 1rpx solid #fbbf24;\n\t\t      transition: all 0.3s;\n\t\t      \n\t\t      .tag-text {\n\t\t        font-size: 26rpx;\n\t\t        color: #92400e;\n\t\t        font-weight: 500;\n\t\t      }\n\t\t      \n\t\t      &:active {\n\t\t        background-color: #fde68a;\n\t\t        transform: scale(0.95);\n\t\t      }\n\t\t    }\n\t\t  }\n\t\t}\n        </style>\n\n\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish-post.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish-post.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1763789909781\n      var cssReload = require(\"D:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}