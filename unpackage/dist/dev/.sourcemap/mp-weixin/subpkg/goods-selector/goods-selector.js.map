{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?f88f","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?2fb1","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?89ea","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?36d9","uni-app:///subpkg/goods-selector/goods-selector.vue","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?a63f","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/subpkg/goods-selector/goods-selector.vue?c0d0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","goodsList","selectedGoodsId","selectedGoods","isLoading","onLoad","computed","methods","loadUserGoods","uni","goods_id","goodsResponse","console","title","icon","selectGoods","cancel","confirm","eventChannel","goods","getStatusText","formatTime"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACc;;;AAG3E;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAyjB,CAAgB,skBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACwE7kB;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;EACA;EAEAC,4BACA,sDACA;EAEAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAIAC;kBACAC;gBACA;cAAA;gBAFAC;gBAAA,MAIAA;kBAAA;kBAAA;gBAAA;gBACAV,8CACA;gBACA;kBAAA;gBAAA;gBACAW;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIAA;gBACAH;kBACAI;kBACAC;gBACA;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACA;MACA;MACAH;IACA;IAEA;IACAI;MACAP;IACA;IAEA;IACAQ;MACA;QACAR;UACAI;UACAC;QACA;QACA;MACA;;MAEA;MACA;MACAI;QACAR;QACAS;MACA;MAEAV;IACA;IAEA;IACAW;MACA;QACA;QACA;QACA;MACA;MACA;IACA;IAEA;IAEA;IACAC;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnLA;AAAA;AAAA;AAAA;AAA4jC,CAAgB,6gCAAG,EAAC,C;;;;;;;;;;;ACAhlC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpkg/goods-selector/goods-selector.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/goods-selector/goods-selector.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods-selector.vue?vue&type=template&id=5dce927a&\"\nvar renderjs\nimport script from \"./goods-selector.vue?vue&type=script&lang=js&\"\nexport * from \"./goods-selector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods-selector.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/goods-selector/goods-selector.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-selector.vue?vue&type=template&id=5dce927a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.goodsList.length\n  var l0 =\n    g0 > 0\n      ? _vm.__map(_vm.goodsList, function (goods, index) {\n          var $orig = _vm.__get_orig(goods)\n          var m0 = _vm.getStatusText(goods.goods_status)\n          var m1 = _vm.formatTime(goods.add_time)\n          return {\n            $orig: $orig,\n            m0: m0,\n            m1: m1,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-selector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-selector.vue?vue&type=script&lang=js&\"","<!-- subpkg/goods-selector/goods-selector.vue -->\n<template>\n  <view class=\"goods-selector-page\">\n    <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->\n    <view class=\"header\">\n      <text class=\"header-title\">é€‰æ‹©å•†å“</text>\n      <text class=\"header-subtitle\">è¯·é€‰æ‹©è¦å…³è”çš„å•†å“</text>\n    </view>\n    \n    <!-- å•†å“åˆ—è¡¨ -->\n    <view class=\"goods-list\" v-if=\"goodsList.length > 0\">\n      <view \n        class=\"goods-item\"\n        v-for=\"(goods, index) in goodsList\"\n        :key=\"goods.goods_id\"\n        :class=\"{ 'selected': selectedGoodsId === goods.goods_id }\"\n        @click=\"selectGoods(goods)\"\n      >\n        <image \n          class=\"goods-image\" \n          :src=\"goods.goods_small_logo || goods.goods_big_logo\" \n          mode=\"aspectFill\"\n        ></image>\n        <view class=\"goods-info\">\n          <text class=\"goods-name\">{{ goods.goods_name }}</text>\n          <text class=\"goods-price\">Â¥{{ goods.goods_price }}</text>\n          <view class=\"goods-meta\">\n            <!-- ğŸ”§ ä¿®å¤ï¼šä½¿ç”¨å¯¹è±¡å½¢å¼çš„classç»‘å®š -->\n            <text \n              class=\"goods-status\"\n              :class=\"{\n                'on-sale': goods.goods_status === 1,\n                'sold-out': goods.goods_status === 2,\n                'off-shelf': goods.goods_status === 3\n              }\"\n            >\n              {{ getStatusText(goods.goods_status) }}\n            </text>\n            <text class=\"goods-time\">{{ formatTime(goods.add_time) }}</text>\n          </view>\n        </view>\n        <view class=\"select-indicator\" v-if=\"selectedGoodsId === goods.goods_id\">\n          <text class=\"check-icon\">âœ“</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- ç©ºçŠ¶æ€ -->\n    <view class=\"empty-state\" v-else-if=\"!isLoading\">\n      <text class=\"empty-icon\">ğŸ“¦</text>\n      <text class=\"empty-text\">æš‚æ— åœ¨å”®å•†å“</text>\n      <text class=\"empty-desc\">è¯·å…ˆå‘å¸ƒå•†å“åå†å…³è”</text>\n    </view>\n    \n    <!-- åŠ è½½çŠ¶æ€ -->\n    <view class=\"loading-state\" v-if=\"isLoading\">\n      <text class=\"loading-text\">åŠ è½½ä¸­...</text>\n    </view>\n    \n    <!-- åº•éƒ¨æŒ‰é’® -->\n    <view class=\"bottom-buttons\">\n      <view class=\"btn cancel-btn\" @click=\"cancel\">\n        <text>å–æ¶ˆ</text>\n      </view>\n      <view class=\"btn confirm-btn\" :class=\"{ 'disabled': !selectedGoodsId }\" @click=\"confirm\">\n        <text>ç¡®å®š</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      goodsList: [],\n      selectedGoodsId: null,\n      selectedGoods: null,\n      isLoading: true\n    }\n  },\n  \n  onLoad() {\n    this.loadUserGoods()\n  },\n  \n  computed: {\n    ...mapState('m_user', ['openid', 'userBase'])\n  },\n  \n  methods: {\n    // åŠ è½½ç”¨æˆ·å•†å“\n    async loadUserGoods() {\n      try {\n        this.isLoading = true\n        \n        if (!this.userBase.goods_id || this.userBase.goods_id.length === 0) {\n          this.goodsList = []\n          return\n        }\n        \n        const goodsResponse = await uni.$http.get('/goods/historysearch', { \n          goods_id: this.userBase.goods_id \n        })\n        \n        if (goodsResponse.data.meta.status === 200) {\n          const goodsList = goodsResponse.data.message || []\n          // åªæ˜¾ç¤ºåœ¨å”®å•†å“\n          this.goodsList = goodsList.filter(goods => goods.goods_status === 1)\n          console.log('âœ… åŠ è½½ç”¨æˆ·å•†å“æˆåŠŸ:', this.goodsList.length)\n        } else {\n          throw new Error(goodsResponse.data.meta.msg || 'åŠ è½½å¤±è´¥')\n        }\n        \n      } catch (error) {\n        console.error('âŒ åŠ è½½ç”¨æˆ·å•†å“å¤±è´¥:', error)\n        uni.showToast({\n          title: 'åŠ è½½å¤±è´¥',\n          icon: 'none'\n        })\n        this.goodsList = []\n      } finally {\n        this.isLoading = false\n      }\n    },\n    \n    // é€‰æ‹©å•†å“\n    selectGoods(goods) {\n      this.selectedGoodsId = goods.goods_id\n      this.selectedGoods = goods\n      console.log('ğŸ“¦ é€‰æ‹©å•†å“:', goods.goods_name)\n    },\n    \n    // å–æ¶ˆé€‰æ‹©\n    cancel() {\n      uni.navigateBack()\n    },\n    \n    // ç¡®è®¤é€‰æ‹©\n    confirm() {\n      if (!this.selectedGoodsId) {\n        uni.showToast({\n          title: 'è¯·å…ˆé€‰æ‹©å•†å“',\n          icon: 'none'\n        })\n        return\n      }\n      \n      // é€šè¿‡äº‹ä»¶é€šé“ä¼ é€’æ•°æ®å›å‘å¸ƒé¡µé¢\n      const eventChannel = this.getOpenerEventChannel()\n      eventChannel.emit('selectGoods', {\n        goods_id: this.selectedGoodsId,\n        goods: this.selectedGoods\n      })\n      \n      uni.navigateBack()\n    },\n    \n    // è·å–å•†å“çŠ¶æ€æ–‡æœ¬\n    getStatusText(status) {\n      const statusMap = {\n        1: 'åœ¨å”®',\n        2: 'å·²å”®å‡º',\n        3: 'å·²ä¸‹æ¶'\n      }\n      return statusMap[status] || 'æœªçŸ¥'\n    },\n    \n    // ğŸ”§ åˆ é™¤ï¼šç§»é™¤getStatusClassæ–¹æ³•ï¼Œæ”¹ç”¨æ¨¡æ¿ä¸­çš„å¯¹è±¡ç»‘å®š\n    \n    // æ ¼å¼åŒ–æ—¶é—´\n    formatTime(timestamp) {\n      if (!timestamp) return ''\n      const date = new Date(timestamp * 1000)\n      return `${date.getMonth() + 1}-${date.getDate()}`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.goods-selector-page {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding-bottom: 120rpx;\n}\n\n.header {\n  background-color: #ffffff;\n  padding: 32rpx;\n  text-align: center;\n  border-bottom: 1rpx solid #f0f0f0;\n  \n  .header-title {\n    font-size: 36rpx;\n    color: #333333;\n    font-weight: 500;\n    display: block;\n    margin-bottom: 8rpx;\n  }\n  \n  .header-subtitle {\n    font-size: 26rpx;\n    color: #999999;\n  }\n}\n\n.goods-list {\n  padding: 16rpx;\n}\n\n.goods-item {\n  display: flex;\n  align-items: center;\n  background-color: #ffffff;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-bottom: 16rpx;\n  border: 2rpx solid transparent;\n  transition: all 0.3s;\n  \n  &:active {\n    background-color: #f9f9f9;\n  }\n  \n  &.selected {\n    border-color: #C00000;\n    background-color: #fff5f5;\n  }\n  \n  .goods-image {\n    width: 120rpx;\n    height: 120rpx;\n    border-radius: 12rpx;\n    background-color: #f0f0f0;\n    margin-right: 24rpx;\n    flex-shrink: 0;\n  }\n  \n  .goods-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8rpx;\n    \n    .goods-name {\n      font-size: 30rpx;\n      color: #333333;\n      font-weight: 500;\n      line-height: 1.4;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      overflow: hidden;\n    }\n    \n    .goods-price {\n      font-size: 32rpx;\n      color: #C00000;\n      font-weight: 600;\n    }\n    \n    .goods-meta {\n      display: flex;\n      align-items: center;\n      gap: 16rpx;\n      \n      .goods-status {\n        font-size: 22rpx;\n        padding: 4rpx 12rpx;\n        border-radius: 12rpx;\n        \n        &.on-sale {\n          background-color: #f0f9ff;\n          color: #0369a1;\n        }\n        \n        &.sold-out {\n          background-color: #fef2f2;\n          color: #dc2626;\n        }\n        \n        &.off-shelf {\n          background-color: #f9fafb;\n          color: #6b7280;\n        }\n      }\n      \n      .goods-time {\n        font-size: 22rpx;\n        color: #999999;\n      }\n    }\n  }\n  \n  .select-indicator {\n    width: 48rpx;\n    height: 48rpx;\n    background-color: #C00000;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    .check-icon {\n      font-size: 28rpx;\n      color: #ffffff;\n      font-weight: bold;\n    }\n  }\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 40rpx;\n  text-align: center;\n  \n  .empty-icon {\n    font-size: 120rpx;\n    margin-bottom: 24rpx;\n  }\n  \n  .empty-text {\n    font-size: 32rpx;\n    color: #666666;\n    margin-bottom: 12rpx;\n  }\n  \n  .empty-desc {\n    font-size: 26rpx;\n    color: #999999;\n  }\n}\n\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 120rpx 0;\n  \n  .loading-text {\n    font-size: 28rpx;\n    color: #999999;\n  }\n}\n\n.bottom-buttons {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  gap: 24rpx;\n  padding: 24rpx 32rpx;\n  background-color: #ffffff;\n  border-top: 1rpx solid #f0f0f0;\n  \n  .btn {\n    flex: 1;\n    height: 88rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 44rpx;\n    font-size: 30rpx;\n    transition: all 0.3s;\n    \n    &.cancel-btn {\n      background-color: #f5f5f5;\n      color: #666666;\n      \n      &:active {\n        background-color: #e8e8e8;\n      }\n    }\n    \n    &.confirm-btn {\n      background: linear-gradient(135deg, #C00000 0%, #C00000 100%);\n      color: #ffffff;\n      font-weight: 500;\n      \n      &:active {\n        opacity: 0.8;\n      }\n      \n      &.disabled {\n        background: #cccccc;\n        opacity: 0.6;\n        pointer-events: none;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-selector.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-selector.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1762677684063\n      var cssReload = require(\"D:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}