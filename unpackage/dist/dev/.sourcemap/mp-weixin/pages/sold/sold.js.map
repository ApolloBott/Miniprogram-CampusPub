{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/pages/sold/sold.vue?6dd5","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/pages/sold/sold.vue?7a6e","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/pages/sold/sold.vue?685f","uni-app:///pages/sold/sold.vue","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/pages/sold/sold.vue?4431","webpack:///D:/HBuilderX.4.76.2025082103/HBuilderX/project/shopping/pages/sold/sold.vue?e2b7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","imageList","imageUrls","goodsDescription","price","uploading","categoryList","selectedCategory","selectedLocation","isPublishing","imageCheckStatus","allImagesChecked","onLoad","computed","methods","toggleLocation","uni","title","icon","duration","selectCategory","console","chooseImage","remainingCount","count","sizeType","sourceType","success","newImages","startIndex","checking","safe","error","fail","checkImagesInBackground","checkPromises","globalIndex","filePath","fileInfo","reason","uploadTask","url","name","formData","openid","res","result","Promise","unsafeImages","map","status","index","filter","content","showCancel","confirmText","checkTextSafety","deleteImage","clearAllData","useAIHelp","setTimeout","publishGoods","cancelText","stillChecking","hasUnsafeImages","mask","isTextSafe","publishData","code","publisherNickname","publisherAvatarUrl","description","location","coverImage","images","categories","queryObj","goods_id","goodsData","goods_name","goods_introduce","goods_price","publisher_avatarUrl","publisher_nickname","goods_big_logo","post","targetPage","uploadImages","i","fileType","tokenRes","encoding","fileContent","method","header","resolve","reject","onShow","text"],"mappings":"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","file":"pages/sold/sold.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/sold/sold.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./sold.vue?vue&type=template&id=3c014cf4&\"\nvar renderjs\nimport script from \"./sold.vue?vue&type=script&lang=js&\"\nexport * from \"./sold.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sold.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/sold/sold.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sold.vue?vue&type=template&id=3c014cf4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.token ? _vm.imageList.length : null\n  var g1 = _vm.token && g0 < 9 ? _vm.imageList.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sold.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sold.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"publish-container\" v-if=\"token\">\n    <!-- üî• ‰øÆÊîπÔºöÊñ∞È°∂ÈÉ®ÂØºËà™Ê†è -->\n    <view class=\"nav-header\">\n      <!-- Â∑¶‰æßÊ†áÈ¢ò -->\n      <view class=\"nav-left\">\n        <text class=\"nav-title\">ÂèëÈó≤ÁΩÆ</text>\n      </view>\n\n      <!-- Âè≥‰æßÂèëÂ∏ÉÊåâÈíÆ -->\n      <view class=\"nav-right\">\n        <button \n          class=\"publish-btn-small\" \n          @click=\"publishGoods\"\n          :disabled=\"isPublishing\"\n        >\n          <text v-if=\"!isPublishing\">ÂèëÂ∏É</text>\n          <text v-else>ÂèëÂ∏É‰∏≠...</text>\n        </button>\n      </view>\n    </view>\n\n    <!-- ÂÜÖÂÆπÂå∫ - Ê∑ªÂä†Â§ñÂ±ÇÂåÖË£πÂÖÉÁ¥† -->\n    <view class=\"page-content\">\n      <!-- üî• ÂêàÂπ∂Âå∫Âüü: ÂõæÁâá+ÊèèËø∞+‰ΩçÁΩÆ+ÂàÜÁ±ª üî• -->\n      <view class=\"card combined-section\">\n        <!-- ÂõæÁâá‰∏ä‰º†Âå∫Âüü -->\n        <view class=\"images-area\">\n          <view class=\"images-grid\">\n            <!-- Â∑≤‰∏ä‰º†ÁöÑÂõæÁâá -->\n            <view \n              v-for=\"(img, index) in imageList\" \n              :key=\"index\" \n              class=\"image-item\"\n            >\n              <image \n                :src=\"img\" \n                mode=\"aspectFill\" \n                class=\"preview-image\"\n              ></image>\n              <!-- Âà†Èô§ÊåâÈíÆ -->\n              <view class=\"delete-btn\" @click=\"deleteImage(index)\">\n                <text class=\"delete-icon\">‚úï</text>\n              </view>\n              <!-- ÂõæÁâáÂ∫èÂè∑ -->\n              <view class=\"image-index\">{{ index + 1 }}</view>\n            </view>\n\n            <!-- Ê∑ªÂä†ÂõæÁâáÊåâÈíÆ(ÊúÄÂ§ö9Âº†) -->\n            <view \n              v-if=\"imageList.length < 9\" \n              class=\"image-item add-image-btn\" \n              @click=\"chooseImage\"\n              :class=\"{ disabled: isPublishing }\"\n            >\n              <text class=\"add-text\">Ê∑ªÂä†ÂõæÁâá</text>\n              <text class=\"add-count\">({{ imageList.length }}/9)</text>\n            </view>\n          </view>\n        </view>\n\n        <!-- ÂïÜÂìÅÊèèËø∞ËæìÂÖ• -->\n        <view class=\"description-area\">\n          <textarea \n            class=\"description-input\" \n            v-model=\"goodsDescription\" \n            placeholder=\"ËØ∑ËØ¶ÁªÜÊèèËø∞ÂïÜÂìÅÁöÑÂìÅÁâå„ÄÅÂûãÂè∑„ÄÅÊàêËâ≤„ÄÅË¥≠‰π∞Êó∂Èó¥Á≠â‰ø°ÊÅØ...\" \n            auto-height \n            :disabled=\"isPublishing\"\n          />\n        </view>\n\n        <!-- üî• AIÂä©Êâã + ‰ΩçÁΩÆÈÄâÊã© üî• -->\n        <view class=\"action-row\">\n          <!-- AIÂä©ÊâãÊåâÈíÆ -->\n          <!-- <view \n            class=\"ai-helper\" \n            @click=\"useAIHelp\"\n            :class=\"{ disabled: isPublishing }\"\n          >\n            <text class=\"ai-text\">AIÁîüÊàêÊèèËø∞</text>\n          </view> -->\n\n          <!-- ‰ΩçÁΩÆÂàáÊç¢ÊåâÈíÆ -->\n          <view \n            class=\"location-toggle\" \n            @click=\"toggleLocation\"\n            :class=\"{ disabled: isPublishing }\"\n          >\n            <text class=\"location-text\">{{ selectedLocation }}Ê†°Âå∫</text>\n          </view>\n        </view>\n\n        <!-- üî• ÂïÜÂìÅÂàÜÁ±ª(Á¥ßÂáëÁâà) üî• -->\n        <view class=\"category-compact\">\n          <text class=\"category-label\">ÂàÜÁ±ª:</text>\n          <view class=\"category-tags\">\n            <view \n              v-for=\"(category, index) in categoryList\" \n              :key=\"index\"\n              class=\"category-tag-small\"\n              :class=\"{ \n                active: selectedCategory === category,\n                disabled: isPublishing\n              }\"\n              @click=\"selectCategory(category)\"\n            >\n              <text class=\"tag-text\">{{ category }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- ‰ª∑Ê†º -->\n      <view class=\"card list-item price-section\">\n        <view class=\"label-row\">\n          <text class=\"label\">‰ª∑Ê†º</text>\n        </view>\n        <view class=\"price-box\">\n          <text class=\"price-symbol\">¬•</text>\n          <input \n            class=\"price-input\" \n            v-model=\"price\" \n            type=\"digit\" \n            placeholder=\"0.00\" \n            :disabled=\"isPublishing\"\n          />\n        </view>\n      </view>\n\n      <!-- üî• ÂèëÂ∏É‰∏≠ÈÅÆÁΩ©Â±Ç üî• -->\n      <view class=\"publishing-overlay\" v-if=\"isPublishing\">\n        <view class=\"publishing-content\">\n          <view class=\"loading-spinner\"></view>\n          <text class=\"publishing-text\">Ê≠£Âú®ÂèëÂ∏É‰∏≠...</text>\n          <text class=\"publishing-tip\">ËØ∑ÂãøÈáçÂ§çÁÇπÂáª</text>\n        </view>\n      </view>\n\n      <view class=\"bottom-placeholder\"></view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      imageList: [],\n      imageUrls: [],\n      goodsDescription: '',\n      price: '',\n      uploading: false,\n      \n      categoryList: ['Â≠¶‰π†', 'Êó•Â∏∏', 'ÂÖ∂‰ªñÊúçÂä°'],\n      selectedCategory: '',\n      \n      selectedLocation: 'ÈóµË°å',\n      \n      // üî• Êñ∞Â¢ûÔºöÂèëÂ∏ÉÁä∂ÊÄÅÊéßÂà∂\n      isPublishing: false,\n\t  \n\t   // üî• Êñ∞Â¢ûÔºöÂõæÁâáÊ£ÄÊµãÁä∂ÊÄÅÁÆ°ÁêÜ\n\t      imageCheckStatus: [], // Â≠òÂÇ®ÊØèÂº†ÂõæÁâáÁöÑÊ£ÄÊµãÁä∂ÊÄÅ { checking: true/false, safe: true/false }\n\t      allImagesChecked: false, // ÊâÄÊúâÂõæÁâáÊòØÂê¶Ê£ÄÊµãÂÆåÊàê\n    }\n  },\n\n  onLoad(options) {\n    if (!options || Object.keys(options).length === 0) {\n      // Â§ÑÁêÜÁ©∫ÂèÇÊï∞ÊÉÖÂÜµ\n    }\n  },\n\n  computed: {\n    ...mapState('m_user', ['token', 'code', 'userBase', 'openid']),\n  },\n\n  methods: {\n    ...mapMutations('m_user', ['updateUserInfo', 'updateToken', 'updateUserBase']),\n\n    toggleLocation() {\n      if (this.isPublishing) return; // ÂèëÂ∏É‰∏≠Á¶ÅÁî®\n      this.selectedLocation = this.selectedLocation === 'ÈóµË°å' ? 'ÊôÆÈôÄ' : 'ÈóµË°å'\n      uni.showToast({\n        title: `Â∑≤ÂàáÊç¢Âà∞${this.selectedLocation}Ê†°Âå∫`,\n        icon: 'none',\n        duration: 1000\n      })\n    },\n\n    selectCategory(category) {\n      if (this.isPublishing) return; // ÂèëÂ∏É‰∏≠Á¶ÅÁî®\n      this.selectedCategory = category\n      console.log('ÈÄâÊã©ÂàÜÁ±ª:', category)\n    },\n\n   async chooseImage() {\n     if (this.isPublishing) return;\n     const remainingCount = 9 - this.imageList.length;\n     \n     uni.chooseImage({\n       count: remainingCount,\n       sizeType: ['compressed'],\n       sourceType: ['album', 'camera'],\n       success: async (res) => {\n         console.log('üì∏ ÈÄâÊã©‰∫Ü', res.tempFilePaths.length, 'Âº†ÂõæÁâá');\n         \n         // üî• Á´ãÂç≥Ê∑ªÂä†Âà∞ÂàóË°®ÔºåÊèêÂçáÁî®Êà∑‰ΩìÈ™å\n         const newImages = res.tempFilePaths;\n         const startIndex = this.imageList.length;\n         \n         // ÂÖàÊ∑ªÂä†ÂõæÁâáÂà∞Â±ïÁ§∫ÂàóË°®\n         this.imageList.push(...newImages);\n         \n         // ÂàùÂßãÂåñÊ£ÄÊµãÁä∂ÊÄÅÔºàÊ£ÄÊµã‰∏≠Ôºâ\n         newImages.forEach(() => {\n           this.imageCheckStatus.push({\n             checking: true,\n             safe: null,\n             error: false\n           });\n         });\n         \n         uni.showToast({\n           title: `Â∑≤Ê∑ªÂä† ${newImages.length} Âº†ÂõæÁâá`,\n           icon: 'success',\n           duration: 1000\n         });\n         \n         // üî• ÂºÇÊ≠•Ê£ÄÊµãÂõæÁâáÔºà‰∏çÈòªÂ°ûÁî®Êà∑Êìç‰ΩúÔºâ\n         this.checkImagesInBackground(newImages, startIndex);\n       },\n       fail: (err) => {\n         console.error('‚ùå ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', err);\n       }\n     });\n   },\n\n\n\t/**\n\t * üî• Êñ∞Â¢ûÔºöÂêéÂè∞ÂºÇÊ≠•Ê£ÄÊµãÂõæÁâá\n\t */\n\tasync checkImagesInBackground(imagePaths, startIndex) {\n\t  console.log('üîç ÂºÄÂßãÂêéÂè∞Ê£ÄÊµã', imagePaths.length, 'Âº†ÂõæÁâá');\n\t  \n\t  // üî• Âπ∂Ë°åÊ£ÄÊµãÊâÄÊúâÂõæÁâá\n\t  const checkPromises = imagePaths.map(async (filePath, index) => {\n\t    const globalIndex = startIndex + index;\n\t    \n\t    try {\n\t      // Ê£ÄÊü•Êñá‰ª∂Â§ßÂ∞è\n\t      const fileInfo = await new Promise((resolve, reject) => {\n\t        uni.getFileInfo({\n\t          filePath: filePath,\n\t          success: resolve,\n\t          fail: reject\n\t        });\n\t      });\n\t      \n\t      console.log(`üìÅ ÂõæÁâá ${globalIndex + 1} Â§ßÂ∞è:`, (fileInfo.size / 1024).toFixed(2) + ' KB');\n\t      \n\t      // üî• Êñá‰ª∂ËøáÂ§ßÁõ¥Êé•Ê†áËÆ∞‰∏∫‰∏çÂÆâÂÖ®\n\t      if (fileInfo.size > 1024 * 1024) {\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: false,\n\t          error: true,\n\t          reason: 'Êñá‰ª∂ËøáÂ§ß'\n\t        };\n\t        return;\n\t      }\n\t      \n\t      // üî• Ë∞ÉÁî®Ê£ÄÊµãÊé•Âè£Ôºà‰∏çÊòæÁ§∫ LoadingÔºâ\n\t      const uploadTask = uni.uploadFile({\n\t        url: 'https://xinshi00.com/upload/imgSecCheck',\n\t        filePath: filePath,\n\t        name: 'media',\n\t        formData: { openid: this.openid },\n\t      });\n\t      \n\t      const [error, res] = await new Promise((resolve) => {\n\t        uploadTask.then(resolve).catch(resolve);\n\t      });\n\t      \n\t      if (error) {\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: false,\n\t          error: true,\n\t          reason: 'Ê£ÄÊµãÂ§±Ë¥•'\n\t        };\n\t        return;\n\t      }\n\t      \n\t      const result = typeof res.data === 'string' ? JSON.parse(res.data) : res.data;\n\t      \n\t      if (result.meta && result.meta.status === 200) {\n\t        // ‚úÖ ÂõæÁâáÂÆâÂÖ®\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: true,\n\t          error: false\n\t        };\n\t        console.log(`‚úÖ ÂõæÁâá ${globalIndex + 1} Ê£ÄÊµãÈÄöËøá`);\n\t        \n\t      } else {\n\t        // ‚ùå ÂõæÁâáËøùËßÑ\n\t        this.imageCheckStatus[globalIndex] = {\n\t          checking: false,\n\t          safe: false,\n\t          error: false,\n\t          reason: 'ÂÜÖÂÆπËøùËßÑ'\n\t        };\n\t        console.warn(`üö´ ÂõæÁâá ${globalIndex + 1} Ê£ÄÊµã‰∏çÈÄöËøá`);\n\t      }\n\t      \n\t    } catch (err) {\n\t      console.error(`üí• ÂõæÁâá ${globalIndex + 1} Ê£ÄÊµãÂºÇÂ∏∏:`, err);\n\t      this.imageCheckStatus[globalIndex] = {\n\t        checking: false,\n\t        safe: false,\n\t        error: true,\n\t        reason: 'Ê£ÄÊµãÂºÇÂ∏∏'\n\t      };\n\t    }\n\t  });\n\t  \n\t  // Á≠âÂæÖÊâÄÊúâÊ£ÄÊµãÂÆåÊàê\n\t  await Promise.all(checkPromises);\n\t  \n\t  // üî• Ê£ÄÊü•ÊòØÂê¶ÊúâËøùËßÑÂõæÁâá\n\t  const unsafeImages = this.imageCheckStatus\n\t    .map((status, index) => ({ status, index }))\n\t    .filter(item => item.status.safe === false);\n\t  \n\t  if (unsafeImages.length > 0) {\n\t    console.warn('üö´ ÂèëÁé∞ËøùËßÑÂõæÁâá:', unsafeImages.length, 'Âº†');\n\t    \n\t    uni.showModal({\n\t      title: 'ÂõæÁâáÊ£ÄÊµãÂÆåÊàê',\n\t      content: `Êúâ ${unsafeImages.length} Âº†ÂõæÁâáÊú™ÈÄöËøáÊ£ÄÊµãÔºåÂ∑≤Ëá™Âä®ÁßªÈô§`,\n\t      showCancel: false,\n\t      confirmText: 'ÊàëÁü•ÈÅì‰∫Ü',\n\t      success: () => {\n\t        // üî• ÁßªÈô§ËøùËßÑÂõæÁâáÔºà‰ªéÂêéÂæÄÂâçÂà†Èô§ÔºåÈÅøÂÖçÁ¥¢ÂºïÈîô‰π±Ôºâ\n\t        unsafeImages.reverse().forEach(item => {\n\t          this.imageList.splice(item.index, 1);\n\t          this.imageCheckStatus.splice(item.index, 1);\n\t        });\n\t      }\n\t    });\n\t  } else {\n\t    console.log('‚úÖ ÊâÄÊúâÂõæÁâáÊ£ÄÊµãÈÄöËøá');\n\t  }\n\t  \n\t  this.allImagesChecked = true;\n\t},\n\n\n\n\t/**\n\t   * üî• Êñ∞Â¢ûÔºöÊñáÊú¨ÂÜÖÂÆπÂÆâÂÖ®Ê£ÄÊµã\n\t   */\n\t  async checkTextSafety(text) {\n\t    try {\n\t      console.log('üîç ÂºÄÂßãÊ£ÄÊµãÊñáÊú¨:', text.substring(0, 30) + '...');\n\t      \n\t      const { data: res } = await uni.$http.post('/upload/textSecCheck', {\n\t        content: text,\n\t        openid: this.openid\n\t      });\n\t      \n\t      console.log('üì• ÊñáÊú¨Ê£ÄÊµãÁªìÊûú:', res);\n\t      \n\t      if (res.meta.status === 200) {\n\t        console.log('‚úÖ ÊñáÊú¨ÂÜÖÂÆπÂÆâÂÖ®');\n\t        return true;\n\t      } else {\n\t        console.warn('üö´ ÊñáÊú¨ÂÜÖÂÆπËøùËßÑ:', res.meta.msg);\n\t        return false;\n\t      }\n\t      \n\t    } catch (err) {\n\t      console.error('üí• ÊñáÊú¨Ê£ÄÊµãÂá∫Èîô:', err);\n\t      \n\t      // üî• ÁΩëÁªúÈîôËØØÊó∂ÊèêÁ§∫Áî®Êà∑\n\t      uni.showToast({\n\t        title: 'ÊñáÊú¨Ê£ÄÊµãÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n\t        icon: 'none',\n\t        duration: 2000\n\t      });\n\t      \n\t      return false;\n\t    }\n\t  },\n\n\n\t\n    deleteImage(index) {\n      if (this.isPublishing) return; // ÂèëÂ∏É‰∏≠Á¶ÅÁî®\n      uni.showModal({\n        title: 'ÊèêÁ§∫',\n        content: 'Á°ÆÂÆöÂà†Èô§ËøôÂº†ÂõæÁâáÂêó?',\n        success: (res) => {\n          if (res.confirm) {\n            this.imageList.splice(index, 1)\n            this.imageUrls.splice(index, 1)\n          }\n        }\n      })\n    },\n\n   clearAllData() {\n     this.imageList = [];\n     this.imageUrls = [];\n     this.goodsDescription = '';\n     this.price = '';\n     this.selectedCategory = '';\n     this.selectedLocation = 'ÈóµË°å';\n     \n     // üî• Ê∏ÖÁ©∫Ê£ÄÊµãÁä∂ÊÄÅ\n     this.imageCheckStatus = [];\n     this.allImagesChecked = false;\n     \n     console.log('‚úÖ Êï∞ÊçÆÂ∑≤Ê∏ÖÁ©∫');\n   },\n\n    useAIHelp() {\n      if (this.isPublishing) return; // ÂèëÂ∏É‰∏≠Á¶ÅÁî®\n      uni.showToast({\n        title: 'AIÊ≠£Âú®ÁîüÊàêÊèèËø∞...',\n        icon: 'none'\n      })\n      setTimeout(() => {\n        this.goodsDescription = 'ËøôÊòØ‰∏ÄÊ¨æÂìÅË¥®‰ºòËâØÁöÑÈó≤ÁΩÆÂïÜÂìÅ,Âá†‰πéÂÖ®Êñ∞,ÂäüËÉΩÂÆåÂ•Ω,ÈÄÇÂêàÈúÄË¶ÅÁöÑÁî®Êà∑Ë¥≠‰π∞„ÄÇ'\n      }, 1000)\n    },\n\n    /**\n       * üî• ‰øÆÊîπÔºöÂèëÂ∏ÉÂïÜÂìÅÊñπÊ≥ïÔºåÂ¢ûÂä†ÊñáÊú¨ÂÆ°Ê†∏\n       */\n      async publishGoods() {\n        // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª\n        if (this.isPublishing) {\n          console.log('‚ö†Ô∏è ÂèëÂ∏É‰∏≠ÔºåËØ∑ÂãøÈáçÂ§çÁÇπÂáª');\n          return;\n        }\n    \n        // ËÆæÁΩÆÂèëÂ∏ÉÁä∂ÊÄÅ\n        this.isPublishing = true;\n        \n        console.log('[0] Ê£ÄÊü•Áî®Êà∑ËÆ§ËØÅÁä∂ÊÄÅ...')\n        console.log('Áî®Êà∑ËÆ§ËØÅÁä∂ÊÄÅ:', this.userBase.is_verified)\n        \n        if (this.userBase.is_verified !== 1) {\n          this.isPublishing = false;\n          uni.showModal({\n            title: 'ËÆ§ËØÅÊèêÈÜí',\n            content: 'ÂèëÂ∏ÉÂïÜÂìÅÈúÄË¶ÅÂÆåÊàêÊ†°Âõ≠ËÆ§ËØÅ,ÊòØÂê¶ÂâçÂæÄËÆ§ËØÅ?',\n            confirmText: 'ÂéªËÆ§ËØÅ',\n            cancelText: 'ÂèñÊ∂à',\n            success: (res) => {\n              if (res.confirm) {\n                uni.navigateTo({\n                  url: '/subpkg/verification/verification'\n                })\n              }\n            }\n          })\n          return\n        }\n        \n        if (this.imageList.length === 0) {\n          this.isPublishing = false;\n          uni.showToast({\n            title: 'ËØ∑Ëá≥Â∞ë‰∏ä‰º†‰∏ÄÂº†ÂõæÁâá',\n            icon: 'none'\n          })\n          return\n        }\n\t\t\n\t\t// üî• Êñ∞Â¢ûÔºöÊ£ÄÊü•ÂõæÁâáÊòØÂê¶ËøòÂú®Ê£ÄÊµã‰∏≠\n\t\t  const stillChecking = this.imageCheckStatus.some(status => status.checking);\n\t\t  \n\t\t  if (stillChecking) {\n\t\t      this.isPublishing = false;\n\t\t      uni.showModal({\n\t\t        title: 'ËØ∑Á®çÂÄô',\n\t\t        content: 'ÂõæÁâáÊ≠£Âú®Ê£ÄÊµã‰∏≠ÔºåËØ∑Á®çÂêéÂÜçËØï',\n\t\t        showCancel: false,\n\t\t        confirmText: 'ÊàëÁü•ÈÅì‰∫Ü'\n\t\t      });\n\t\t      return;\n\t\t    }\n\t\t\t\n\t\t\t// üî• Êñ∞Â¢ûÔºöÊ£ÄÊü•ÊòØÂê¶ÊúâËøùËßÑÂõæÁâá\n\t\t\t  const hasUnsafeImages = this.imageCheckStatus.some(status => status.safe === false);\n\t\t\t\n\t\t\t\n\t\t\tif (hasUnsafeImages) {\n\t\t\t    this.isPublishing = false;\n\t\t\t    uni.showModal({\n\t\t\t      title: 'ÂõæÁâáËøùËßÑ',\n\t\t\t      content: 'Â≠òÂú®ËøùËßÑÂõæÁâáÔºåËØ∑Âà†Èô§ÂêéÈáçËØï',\n\t\t\t      showCancel: false,\n\t\t\t      confirmText: 'ÊàëÁü•ÈÅì‰∫Ü'\n\t\t\t    });\n\t\t\t    return;\n\t\t\t  }\n\t\t\t  \n        if (!this.goodsDescription.trim()) {\n          this.isPublishing = false;\n          uni.showToast({\n            title: 'ËØ∑ËæìÂÖ•ÂïÜÂìÅÊèèËø∞',\n            icon: 'none'\n          })\n          return\n        }\n    \n        if (!this.price || parseFloat(this.price) <= 0) {\n          this.isPublishing = false;\n          uni.showToast({\n            title: 'ËØ∑ËæìÂÖ•ÊúâÊïà‰ª∑Ê†º',\n            icon: 'none'\n          })\n          return\n        }\n    \n        // üî• Êñ∞Â¢ûÔºöÊñáÊú¨ÂÜÖÂÆπÂÆâÂÖ®Ê£ÄÊµã\n        console.log('[1] Ê£ÄÊµãÊñáÊú¨ÂÜÖÂÆπÂÆâÂÖ®ÊÄß...');\n        uni.showLoading({\n          title: 'Ê£ÄÊµãÊñáÊú¨ÂÜÖÂÆπ...',\n          mask: true\n        });\n    \n        const isTextSafe = await this.checkTextSafety(this.goodsDescription.trim());\n        \n        if (!isTextSafe) {\n          uni.hideLoading();\n          this.isPublishing = false;\n          \n          uni.showModal({\n            title: 'ÂÜÖÂÆπËøùËßÑ',\n            content: 'ÂïÜÂìÅÊèèËø∞ÂåÖÂê´ËøùËßÑÂÜÖÂÆπÔºåËØ∑‰øÆÊîπÂêéÈáçËØï',\n            showCancel: false,\n            confirmText: 'ÊàëÁü•ÈÅì‰∫Ü'\n          });\n          return;\n        }\n    \n        console.log('‚úÖ ÊñáÊú¨ÂÜÖÂÆπÊ£ÄÊµãÈÄöËøá');\n    \n        // üî• ‰∏ä‰º†ÂõæÁâá\n        console.log('[2] ÂºÄÂßã‰∏ä‰º†ÂõæÁâá...');\n        await this.uploadImages(this.imageList);\n        \n        if (this.imageUrls.length === 0) {\n          uni.hideLoading();\n          this.isPublishing = false;\n          uni.showToast({\n            title: 'ÂõæÁâá‰∏ä‰º†Â§±Ë¥•,ËØ∑ÈáçËØï',\n            icon: 'none'\n          })\n          return\n        }\n    \n        // üî• ÊûÑÈÄ†ÂèëÂ∏ÉÊï∞ÊçÆ\n        const publishData = {\n          code: this.openid,\n          publisherNickname: this.userBase.nickname,\n          publisherAvatarUrl: this.userBase.avatarUrl,\n          description: this.goodsDescription.trim(),\n          price: parseFloat(this.price),\n          location: this.selectedLocation,\n          coverImage: this.imageUrls[0],\n          images: this.imageUrls,\n          categories: this.selectedCategory\n        }\n    \n        uni.showLoading({\n          title: 'ÂèëÂ∏É‰∏≠...',\n          mask: true\n        })\n    \n        try {\n          const { data: res } = await uni.$http.post('/goods/publish', publishData)\n    \n          if (res.meta.status !== 200) {\n            throw new Error(res.meta.msg || 'ÂèëÂ∏ÉÂ§±Ë¥•')\n          }\n    \n          try {\n            const queryObj = {\n              code: this.openid,\n              goods_id: res.message.goods_id\n            }\n\t\t\t\n\t\t\tconst goodsData = {\n\t\t\t\tgoods_id: res.message.goods_id,\n\t\t\t\tgoods_name: this.goodsDescription.trim(),\n\t\t\t\tgoods_introduce: this.goodsDescription.trim(),\n\t\t\t\tgoods_price: parseFloat(this.price),\n\t\t\t\tpublisher_avatarUrl: this.userBase.avatarUrl,\n\t\t\t\tpublisher_nickname: this.userBase.nickname,\n\t\t\t\tgoods_big_logo: this.imageUrls,\n\t\t\t\tcategories: this.selectedCategory,\n\t\t\t\tlocation: this.selectedLocation,\n\t\t\t}\n\t\t\tthis.$store.commit('m_posts/setNewPost', {\n\t\t\t  post: goodsData,\n\t\t\t  targetPage: 'cate'\n\t\t\t});\n\t\t\t\n            await uni.$http.post('/users/publish', queryObj)\n          } catch (updateError) {\n            console.error('Êõ¥Êñ∞Áî®Êà∑ÂèëÂ∏ÉËÆ∞ÂΩïÂ§±Ë¥•:', updateError)\n          }\n    \n          uni.hideLoading()\n          this.isPublishing = false;\n\t\t\n          uni.showToast({\n            title: 'ÂèëÂ∏ÉÊàêÂäü',\n            icon: 'success',\n            duration: 1500\n          })\n    \n          this.clearAllData()\n    \n          setTimeout(() => {\n            uni.switchTab({\n              url: '/pages/cate/cate'\n            })\n          }, 1500)\n    \n        } catch (error) {\n          uni.hideLoading()\n          this.isPublishing = false;\n          console.error('ÂèëÂ∏ÉÂïÜÂìÅÂ§±Ë¥•:', error)\n          uni.showToast({\n            title: error.message || 'ÂèëÂ∏ÉÂ§±Ë¥•',\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      },\n\n    async uploadImages(filePaths) {\n      if (!filePaths || filePaths.length === 0) {\n        return []\n      }\n\n      this.uploading = true\n      uni.showLoading({\n        title: `‰∏ä‰º†‰∏≠ 0/${filePaths.length}`,\n        mask: true\n      })\n\n      this.imageUrls = []\n\n      try {\n        for (let i = 0; i < filePaths.length; i++) {\n          const filePath = filePaths[i]\n\n          uni.showLoading({\n            title: `‰∏ä‰º†‰∏≠ ${i + 1}/${filePaths.length}`,\n            mask: true\n          })\n\n          const { data: tokenRes } = await uni.$http.get('/upload/token', {\n            openid: this.openid,\n            fileType: 'image'\n          })\n\n          if (tokenRes.meta.status !== 200) {\n            throw new Error('Ëé∑Âèñ‰∏ä‰º†Âá≠ËØÅÂ§±Ë¥•')\n          }\n\n          const fileContent = await new Promise((resolve, reject) => {\n            uni.getFileSystemManager().readFile({\n              filePath: filePath,\n              encoding: 'base64',\n              success: (res) => resolve(res.data),\n              fail: reject\n            })\n          })\n\n          await new Promise((resolve, reject) => {\n            uni.request({\n              url: tokenRes.message.publicUrl,\n              method: 'PUT',\n              header: {\n                'Content-Type': 'application/octet-stream'\n              },\n              data: uni.base64ToArrayBuffer(fileContent),\n              success: (res) => {\n                if (res.statusCode === 200) {\n                  resolve(res)\n                } else {\n                  reject(new Error(`‰∏ä‰º†Â§±Ë¥•: ${res.statusCode}`))\n                }\n              },\n              fail: reject\n            })\n          })\n\n          this.imageUrls.push(tokenRes.message.publicUrl)\n        }\n\n        uni.hideLoading()\n        return this.imageUrls\n\n      } catch (error) {\n        console.error('‰∏ä‰º†Â§±Ë¥•:', error)\n        uni.hideLoading()\n        uni.showToast({\n          title: error.message || '‰∏ä‰º†Â§±Ë¥•',\n          icon: 'none',\n          duration: 3000\n        })\n        return []\n      } finally {\n        this.uploading = false\n      }\n    },\n  },\n\n  async onShow() {\n   if (!this.openid) {\r\n   \t\t  // ÂºπÂá∫ÁôªÂΩïÊèêÁ§∫Ê°Ü\r\n   \t\t  uni.showModal({\r\n   \t\t    title: 'ÊèêÁ§∫',\r\n   \t\t    content: 'ÈúÄË¶ÅÁôªÂΩïÊâçËÉΩ‰ΩìÈ™åÊõ¥Â§öÂÜÖÂÆπÂì¶',\r\n   \t\t    cancelText: 'ÂèñÊ∂à',\r\n   \t\t    confirmText: 'ÁôªÂΩï',\r\n   \t\t    success: (res) => {\r\n   \t\t      if (res.confirm) {\r\n   \t\t        // Áî®Êà∑ÁÇπÂáª‰∫Ü\"ÁôªÂΩï\"ÊåâÈíÆ\r\n   \t\t        uni.switchTab({\r\n   \t\t          url: '/pages/my/my'\r\n   \t\t        })\r\n   \t\t      }\r\n   \t\t      // Áî®Êà∑ÁÇπÂáª‰∫Ü\"ÂèñÊ∂à\"ÊåâÈíÆÔºå‰∏çÂÅö‰ªª‰ΩïÊìç‰Ωú\r\n   \t\t    }\r\n   \t\t  })\r\n   \t\t  return\r\n   \t\t}\n\n    const queryObj = { code: this.openid }\n    const { data: res } = await uni.$http.get('/users/userinfo', queryObj)\n\n    if (res.meta.status === 200) {\n      console.log(res.message)\n      this.updateUserBase(res.message)\n    }\n\n    if (this.userBase.total_unread > 0) {\n      uni.setTabBarBadge({\n        index: 2,\n        text: this.userBase.total_unread + ''\n      })\n    } else {\n      uni.removeTabBarBadge({\n        index: 2\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.publish-container {\n  min-height: 100vh;\n  background: linear-gradient(180deg, #f5f7fa 0%, #ffffff 100%);\n  padding-bottom: calc(40rpx + env(safe-area-inset-bottom));\n  position: relative;\n}\n\n/* üî• ‰øÆÊîπÔºöÊñ∞È°∂ÈÉ®ÂØºËà™Ê†è */\n.nav-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16rpx 24rpx;\n  background: #ffffff;\n  border-bottom: 1rpx solid #f5f5f5;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);\n\n  .nav-left {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n\n    .nav-icon {\n      font-size: 32rpx;\n    }\n\n    .nav-title {\n      font-size: 28rpx;\n      font-weight: 600;\n      color: #333;\n    }\n  }\n\n  .nav-right {\n    .publish-btn-small {\n      padding: 8rpx 16rpx;\n      background: linear-gradient(135deg, #C00000 0%, #C00000 100%);\n      color: #fff;\n      font-size: 24rpx;\n      border-radius: 30rpx;\n      border: none;\n      font-weight: 600;\n      transition: all 0.3s ease;\n\n      &:active {\n        transform: scale(0.95);\n        opacity: 0.8;\n      }\n\n      /* üî• Á¶ÅÁî®Áä∂ÊÄÅÊ†∑Âºè */\n      &[disabled] {\n        background: #ccc;\n        opacity: 0.7;\n        transform: none;\n      }\n    }\n  }\n}\n\n/* üî• Á¶ÅÁî®Áä∂ÊÄÅÈÄöÁî®Ê†∑Âºè */\n.disabled {\n  opacity: 0.5 !important;\n  pointer-events: none !important;\n}\n\n.add-image-btn.disabled {\n  border-color: #ccc;\n  background: #f0f0f0;\n  \n  .add-icon, .add-text, .add-count {\n    color: #999 !important;\n  }\n}\n\n.category-tag-small.disabled {\n  background: #f0f0f0 !important;\n  border-color: #e0e0e0 !important;\n  color: #999 !important;\n  transform: none !important;\n}\n\n.ai-helper.disabled, .location-toggle.disabled {\n  opacity: 0.5;\n  pointer-events: none;\n}\n\n/* üî• ÂèëÂ∏É‰∏≠ÈÅÆÁΩ©Â±Ç */\n.publishing-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n\n.publishing-content {\n  background: #fff;\n  padding: 60rpx 40rpx;\n  border-radius: 24rpx;\n  text-align: center;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.2);\n  min-width: 300rpx;\n}\n\n.loading-spinner {\n  width: 80rpx;\n  height: 80rpx;\n  border: 6rpx solid #f3f3f3;\n  border-top: 6rpx solid #C00000;\n  border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin: 0 auto 30rpx;\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n  \n  .publishing-text {\n    display: block;\n    font-size: 32rpx;\n    color: #333;\n    font-weight: 600;\n    margin-bottom: 16rpx;\n  }\n  \n  .publishing-tip {\n    display: block;\n    font-size: 26rpx;\n    color: #999;\n  }\n  \n  .page-content {\n    padding: 24rpx;\n    position: relative;\n  }\n  \n  .card {\n    background: #ffffff;\n    border-radius: 24rpx;\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n    margin-bottom: 24rpx;\n    overflow: hidden;\n    transition: all 0.3s ease;\n  \n    &:active {\n      box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);\n    }\n  }\n  \n  .combined-section {\n    padding: 0;\n  }\n  \n  .images-area {\n    padding: 24rpx;\n    border-bottom: 2rpx solid #f5f5f5;\n  }\n  \n  .images-grid {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16rpx;\n  }\n  \n  .image-item {\n    position: relative;\n    width: 200rpx;\n    height: 200rpx;\n    border-radius: 16rpx;\n    overflow: hidden;\n    box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n    transition: all 0.3s ease;\n  \n    &:active {\n      transform: scale(0.95);\n    }\n  \n    .preview-image {\n      width: 100%;\n      height: 100%;\n    }\n  \n    .delete-btn {\n      position: absolute;\n      top: 8rpx;\n      right: 8rpx;\n      width: 44rpx;\n      height: 44rpx;\n      background: rgba(0, 0, 0, 0.7);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      backdrop-filter: blur(10rpx);\n  \n      .delete-icon {\n        color: #fff;\n        font-size: 32rpx;\n        line-height: 32rpx;\n        font-weight: bold;\n      }\n    }\n  \n    .image-index {\n      position: absolute;\n      top: 8rpx;\n      left: 8rpx;\n      min-width: 40rpx;\n      height: 40rpx;\n      padding: 0 8rpx;\n      background: linear-gradient(135deg, #C00000 0%, #C00000 100%);\n      border-radius: 20rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #fff;\n      font-size: 22rpx;\n      font-weight: bold;\n    }\n  }\n  \n  .add-image-btn {\n    border: 3rpx dashed #d9d9d9;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background: #fafafa;\n  \n    .add-icon {\n      font-size: 64rpx;\n      margin-bottom: 4rpx;\n    }\n  \n    .add-text {\n      font-size: 24rpx;\n      color: #999;\n      margin-bottom: 4rpx;\n    }\n  \n    .add-count {\n      font-size: 20rpx;\n      color: #ccc;\n    }\n  }\n  \n  .description-area {\n    padding: 0;\n  }\n  \n  .description-input {\n    width: 100%;\n    font-size: 28rpx;\n    color: #333;\n    min-height: 200rpx;\n    padding: 24rpx;\n    box-sizing: border-box;\n    line-height: 1.6;\n    border-bottom: 2rpx solid #f5f5f5;\n    \n    /* üî• Á¶ÅÁî®Áä∂ÊÄÅÊ†∑Âºè */\n    &:disabled {\n      background: #f9f9f9;\n      color: #999;\n    }\n  }\n  \n  .action-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16rpx 24rpx;\n    gap: 16rpx;\n    border-bottom: 2rpx solid #f5f5f5;\n  }\n  \n  .ai-helper {\n    display: flex;\n    align-items: center;\n    padding: 12rpx 20rpx;\n    background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%);\n    border-radius: 40rpx;\n    color: #C00000;\n    font-size: 24rpx;\n    border: 2rpx solid #ffd9d9;\n    transition: all 0.3s ease;\n    flex: 1;\n    justify-content: center;\n  \n    &:active {\n      opacity: 0.7;\n      transform: scale(0.98);\n    }\n  \n    .ai-icon {\n      margin-right: 8rpx;\n      font-size: 28rpx;\n      animation: sparkle 2s infinite;\n    }\n  \n    @keyframes sparkle {\n      0%, 100% { transform: scale(1) rotate(0deg); }\n      50% { transform: scale(1.2) rotate(180deg); }\n    }\n  }\n  \n  .location-toggle {\n    display: flex;\n    align-items: center;\n    padding: 12rpx 20rpx;\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n    border-radius: 40rpx;\n    color: #0369a1;\n    font-size: 24rpx;\n    border: 2rpx solid #bae6fd;\n    transition: all 0.3s ease;\n    flex: 1;\n    justify-content: center;\n  \n    &:active {\n      opacity: 0.7;\n      transform: scale(0.98);\n    }\n  \n    .location-icon {\n      margin-right: 8rpx;\n      font-size: 28rpx;\n    }\n  }\n  \n  .category-compact {\n    display: flex;\n    align-items: center;\n    padding: 16rpx 24rpx 24rpx;\n  \n    .category-label {\n      font-size: 26rpx;\n      color: #666;\n      margin-right: 16rpx;\n      flex-shrink: 0;\n    }\n  \n    .category-tags {\n      display: flex;\n      gap: 12rpx;\n      flex: 1;\n    }\n  \n    .category-tag-small {\n      padding: 10rpx 20rpx;\n      background: #f8f8f8;\n      border: 2rpx solid #e8e8e8;\n      border-radius: 30rpx;\n      font-size: 24rpx;\n      color: #666;\n      transition: all 0.3s ease;\n      flex: 1;\n      text-align: center;\n  \n      &.active {\n        background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%);\n        border-color: #C00000;\n        color: #C00000;\n        font-weight: 600;\n        transform: scale(1.05);\n      }\n  \n      &:active {\n        transform: scale(0.95);\n      }\n    }\n  }\n  \n  .list-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 28rpx 24rpx;\n  \n    .label-row {\n      display: flex;\n      align-items: center;\n  \n      .label-icon {\n        font-size: 32rpx;\n        margin-right: 8rpx;\n      }\n  \n      .label {\n        font-size: 30rpx;\n        color: #333;\n        font-weight: 600;\n      }\n    }\n  }\n  \n  .price-section {\n    align-items: center;\n  }\n  \n  .price-box {\n    display: flex;\n    align-items: center;\n    min-width: 200rpx;\n  \n    .price-symbol {\n      font-size: 32rpx;\n      color: #C00000;\n      font-weight: bold;\n      margin-right: 8rpx;\n    }\n  \n    .price-input {\n      font-size: 40rpx;\n      color: #C00000;\n      font-weight: bold;\n      text-align: right;\n      flex: 1;\n      \n      /* üî• Á¶ÅÁî®Áä∂ÊÄÅÊ†∑Âºè */\n      &:disabled {\n        background: #f9f9f9;\n        color: #999;\n      }\n    }\n  }\n  \n  .bottom-placeholder {\n    height: 40rpx;\n  }\n  </style>","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sold.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sold.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1763785503114\n      var cssReload = require(\"D:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}